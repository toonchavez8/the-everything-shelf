"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const X=require("obsidian");/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Br(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const Ee={},Hn=[],Ht=()=>{},wu=()=>!1,Fa=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Yr=e=>e.startsWith("onUpdate:"),st=Object.assign,Ur=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},bu=Object.prototype.hasOwnProperty,Pe=(e,t)=>bu.call(e,t),ke=Array.isArray,zn=e=>Wo(e)==="[object Map]",so=e=>Wo(e)==="[object Set]",Cl=e=>Wo(e)==="[object Date]",xe=e=>typeof e=="function",Ke=e=>typeof e=="string",Kt=e=>typeof e=="symbol",Ye=e=>e!==null&&typeof e=="object",bs=e=>(Ye(e)||xe(e))&&xe(e.then)&&xe(e.catch),ks=Object.prototype.toString,Wo=e=>ks.call(e),ku=e=>Wo(e).slice(8,-1),Cs=e=>Wo(e)==="[object Object]",Wr=e=>Ke(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Do=Br(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ea=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},Cu=/-(\w)/g,Tt=Ea(e=>e.replace(Cu,(t,n)=>n?n.toUpperCase():"")),_u=/\B([A-Z])/g,Mn=Ea(e=>e.replace(_u,"-$1").toLowerCase()),Pa=Ea(e=>e.charAt(0).toUpperCase()+e.slice(1)),sr=Ea(e=>e?`on${Pa(e)}`:""),St=(e,t)=>!Object.is(e,t),fa=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},_s=(e,t,n,o=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:o,value:n})},wa=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let _l;const Ia=()=>_l||(_l=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function io(e){if(ke(e)){const t={};for(let n=0;n<e.length;n++){const o=e[n],a=Ke(o)?Vu(o):io(o);if(a)for(const r in a)t[r]=a[r]}return t}else if(Ke(e)||Ye(e))return e}const Su=/;(?![^(]*\))/g,xu=/:([^]+)/,Du=/\/\*[^]*?\*\//g;function Vu(e){const t={};return e.replace(Du,"").split(Su).forEach(n=>{if(n){const o=n.split(xu);o.length>1&&(t[o[0].trim()]=o[1].trim())}}),t}function $t(e){let t="";if(Ke(e))t=e;else if(ke(e))for(let n=0;n<e.length;n++){const o=$t(e[n]);o&&(t+=o+" ")}else if(Ye(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const ju="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",$u=Br(ju);function Ss(e){return!!e||e===""}function Nu(e,t){if(e.length!==t.length)return!1;let n=!0;for(let o=0;n&&o<e.length;o++)n=Lo(e[o],t[o]);return n}function Lo(e,t){if(e===t)return!0;let n=Cl(e),o=Cl(t);if(n||o)return n&&o?e.getTime()===t.getTime():!1;if(n=Kt(e),o=Kt(t),n||o)return e===t;if(n=ke(e),o=ke(t),n||o)return n&&o?Nu(e,t):!1;if(n=Ye(e),o=Ye(t),n||o){if(!n||!o)return!1;const a=Object.keys(e).length,r=Object.keys(t).length;if(a!==r)return!1;for(const l in e){const s=e.hasOwnProperty(l),i=t.hasOwnProperty(l);if(s&&!i||!s&&i||!Lo(e[l],t[l]))return!1}}return String(e)===String(t)}function Lr(e,t){return e.findIndex(n=>Lo(n,t))}const xs=e=>!!(e&&e.__v_isRef===!0),P=e=>Ke(e)?e:e==null?"":ke(e)||Ye(e)&&(e.toString===ks||!xe(e.toString))?xs(e)?P(e.value):JSON.stringify(e,Ds,2):String(e),Ds=(e,t)=>xs(t)?Ds(e,t.value):zn(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[o,a],r)=>(n[ir(o,r)+" =>"]=a,n),{})}:so(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>ir(n))}:Kt(t)?ir(t):Ye(t)&&!ke(t)&&!Cs(t)?String(t):t,ir=(e,t="")=>{var n;return Kt(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ht;class Mu{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ht,!t&&ht&&(this.index=(ht.scopes||(ht.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=ht;try{return ht=this,t()}finally{ht=n}}}on(){ht=this}off(){ht=this.parent}stop(t){if(this._active){this._active=!1;let n,o;for(n=0,o=this.effects.length;n<o;n++)this.effects[n].stop();for(this.effects.length=0,n=0,o=this.cleanups.length;n<o;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,o=this.scopes.length;n<o;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const a=this.parent.scopes.pop();a&&a!==this&&(this.parent.scopes[this.index]=a,a.index=this.index)}this.parent=void 0}}}function Vs(){return ht}function Ou(e,t=!1){ht&&ht.cleanups.push(e)}let Re;const ur=new WeakSet;class js{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ht&&ht.active&&ht.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,ur.has(this)&&(ur.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Ns(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Sl(this),Ms(this);const t=Re,n=zt;Re=this,zt=!0;try{return this.fn()}finally{Os(this),Re=t,zt=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Hr(t);this.deps=this.depsTail=void 0,Sl(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?ur.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Dr(this)&&this.run()}get dirty(){return Dr(this)}}let $s=0,Vo,jo;function Ns(e,t=!1){if(e.flags|=8,t){e.next=jo,jo=e;return}e.next=Vo,Vo=e}function Jr(){$s++}function qr(){if(--$s>0)return;if(jo){let t=jo;for(jo=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;Vo;){let t=Vo;for(Vo=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(o){e||(e=o)}t=n}}if(e)throw e}function Ms(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Os(e){let t,n=e.depsTail,o=n;for(;o;){const a=o.prevDep;o.version===-1?(o===n&&(n=a),Hr(o),Au(o)):t=o,o.dep.activeLink=o.prevActiveLink,o.prevActiveLink=void 0,o=a}e.deps=t,e.depsTail=n}function Dr(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(As(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function As(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===To))return;e.globalVersion=To;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!Dr(e)){e.flags&=-3;return}const n=Re,o=zt;Re=e,zt=!0;try{Ms(e);const a=e.fn(e._value);(t.version===0||St(a,e._value))&&(e._value=a,t.version++)}catch(a){throw t.version++,a}finally{Re=n,zt=o,Os(e),e.flags&=-3}}function Hr(e,t=!1){const{dep:n,prevSub:o,nextSub:a}=e;if(o&&(o.nextSub=a,e.prevSub=void 0),a&&(a.prevSub=o,e.nextSub=void 0),n.subs===e&&(n.subs=o,!o&&n.computed)){n.computed.flags&=-5;for(let r=n.computed.deps;r;r=r.nextDep)Hr(r,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function Au(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let zt=!0;const Ts=[];function On(){Ts.push(zt),zt=!1}function An(){const e=Ts.pop();zt=e===void 0?!0:e}function Sl(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=Re;Re=void 0;try{t()}finally{Re=n}}}let To=0;class Tu{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Ra{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!Re||!zt||Re===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Re)n=this.activeLink=new Tu(Re,this),Re.deps?(n.prevDep=Re.depsTail,Re.depsTail.nextDep=n,Re.depsTail=n):Re.deps=Re.depsTail=n,Fs(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const o=n.nextDep;o.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=o),n.prevDep=Re.depsTail,n.nextDep=void 0,Re.depsTail.nextDep=n,Re.depsTail=n,Re.deps===n&&(Re.deps=o)}return n}trigger(t){this.version++,To++,this.notify(t)}notify(t){Jr();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{qr()}}}function Fs(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let o=t.deps;o;o=o.nextDep)Fs(o)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const ba=new WeakMap,Rn=Symbol(""),Vr=Symbol(""),Fo=Symbol("");function dt(e,t,n){if(zt&&Re){let o=ba.get(e);o||ba.set(e,o=new Map);let a=o.get(n);a||(o.set(n,a=new Ra),a.map=o,a.key=n),a.track()}}function vn(e,t,n,o,a,r){const l=ba.get(e);if(!l){To++;return}const s=i=>{i&&i.trigger()};if(Jr(),t==="clear")l.forEach(s);else{const i=ke(e),u=i&&Wr(n);if(i&&n==="length"){const c=Number(o);l.forEach((v,g)=>{(g==="length"||g===Fo||!Kt(g)&&g>=c)&&s(v)})}else switch((n!==void 0||l.has(void 0))&&s(l.get(n)),u&&s(l.get(Fo)),t){case"add":i?u&&s(l.get("length")):(s(l.get(Rn)),zn(e)&&s(l.get(Vr)));break;case"delete":i||(s(l.get(Rn)),zn(e)&&s(l.get(Vr)));break;case"set":zn(e)&&s(l.get(Rn));break}}qr()}function Fu(e,t){const n=ba.get(e);return n&&n.get(t)}function Wn(e){const t=Fe(e);return t===e?t:(dt(t,"iterate",Fo),Yt(e)?t:t.map(ct))}function Ba(e){return dt(e=Fe(e),"iterate",Fo),e}const Eu={__proto__:null,[Symbol.iterator](){return dr(this,Symbol.iterator,ct)},concat(...e){return Wn(this).concat(...e.map(t=>ke(t)?Wn(t):t))},entries(){return dr(this,"entries",e=>(e[1]=ct(e[1]),e))},every(e,t){return cn(this,"every",e,t,void 0,arguments)},filter(e,t){return cn(this,"filter",e,t,n=>n.map(ct),arguments)},find(e,t){return cn(this,"find",e,t,ct,arguments)},findIndex(e,t){return cn(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return cn(this,"findLast",e,t,ct,arguments)},findLastIndex(e,t){return cn(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return cn(this,"forEach",e,t,void 0,arguments)},includes(...e){return cr(this,"includes",e)},indexOf(...e){return cr(this,"indexOf",e)},join(e){return Wn(this).join(e)},lastIndexOf(...e){return cr(this,"lastIndexOf",e)},map(e,t){return cn(this,"map",e,t,void 0,arguments)},pop(){return ho(this,"pop")},push(...e){return ho(this,"push",e)},reduce(e,...t){return xl(this,"reduce",e,t)},reduceRight(e,...t){return xl(this,"reduceRight",e,t)},shift(){return ho(this,"shift")},some(e,t){return cn(this,"some",e,t,void 0,arguments)},splice(...e){return ho(this,"splice",e)},toReversed(){return Wn(this).toReversed()},toSorted(e){return Wn(this).toSorted(e)},toSpliced(...e){return Wn(this).toSpliced(...e)},unshift(...e){return ho(this,"unshift",e)},values(){return dr(this,"values",ct)}};function dr(e,t,n){const o=Ba(e),a=o[t]();return o!==e&&!Yt(e)&&(a._next=a.next,a.next=()=>{const r=a._next();return r.value&&(r.value=n(r.value)),r}),a}const Pu=Array.prototype;function cn(e,t,n,o,a,r){const l=Ba(e),s=l!==e&&!Yt(e),i=l[t];if(i!==Pu[t]){const v=i.apply(e,r);return s?ct(v):v}let u=n;l!==e&&(s?u=function(v,g){return n.call(this,ct(v),g,e)}:n.length>2&&(u=function(v,g){return n.call(this,v,g,e)}));const c=i.call(l,u,o);return s&&a?a(c):c}function xl(e,t,n,o){const a=Ba(e);let r=n;return a!==e&&(Yt(e)?n.length>3&&(r=function(l,s,i){return n.call(this,l,s,i,e)}):r=function(l,s,i){return n.call(this,l,ct(s),i,e)}),a[t](r,...o)}function cr(e,t,n){const o=Fe(e);dt(o,"iterate",Fo);const a=o[t](...n);return(a===-1||a===!1)&&Qr(n[0])?(n[0]=Fe(n[0]),o[t](...n)):a}function ho(e,t,n=[]){On(),Jr();const o=Fe(e)[t].apply(e,n);return qr(),An(),o}const Iu=Br("__proto__,__v_isRef,__isVue"),Es=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Kt));function Ru(e){Kt(e)||(e=String(e));const t=Fe(this);return dt(t,"has",e),t.hasOwnProperty(e)}class Ps{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,o){if(n==="__v_skip")return t.__v_skip;const a=this._isReadonly,r=this._isShallow;if(n==="__v_isReactive")return!a;if(n==="__v_isReadonly")return a;if(n==="__v_isShallow")return r;if(n==="__v_raw")return o===(a?r?Ku:Ys:r?Bs:Rs).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(o)?t:void 0;const l=ke(t);if(!a){let i;if(l&&(i=Eu[n]))return i;if(n==="hasOwnProperty")return Ru}const s=Reflect.get(t,n,ce(t)?t:o);return(Kt(n)?Es.has(n):Iu(n))||(a||dt(t,"get",n),r)?s:ce(s)?l&&Wr(n)?s:s.value:Ye(s)?a?Kr(s):bn(s):s}}class Is extends Ps{constructor(t=!1){super(!1,t)}set(t,n,o,a){let r=t[n];if(!this._isShallow){const i=Bn(r);if(!Yt(o)&&!Bn(o)&&(r=Fe(r),o=Fe(o)),!ke(t)&&ce(r)&&!ce(o))return i?!1:(r.value=o,!0)}const l=ke(t)&&Wr(n)?Number(n)<t.length:Pe(t,n),s=Reflect.set(t,n,o,ce(t)?t:a);return t===Fe(a)&&(l?St(o,r)&&vn(t,"set",n,o):vn(t,"add",n,o)),s}deleteProperty(t,n){const o=Pe(t,n);t[n];const a=Reflect.deleteProperty(t,n);return a&&o&&vn(t,"delete",n,void 0),a}has(t,n){const o=Reflect.has(t,n);return(!Kt(n)||!Es.has(n))&&dt(t,"has",n),o}ownKeys(t){return dt(t,"iterate",ke(t)?"length":Rn),Reflect.ownKeys(t)}}class Bu extends Ps{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const Yu=new Is,Uu=new Bu,Wu=new Is(!0);const jr=e=>e,oa=e=>Reflect.getPrototypeOf(e);function Lu(e,t,n){return function(...o){const a=this.__v_raw,r=Fe(a),l=zn(r),s=e==="entries"||e===Symbol.iterator&&l,i=e==="keys"&&l,u=a[e](...o),c=n?jr:t?$r:ct;return!t&&dt(r,"iterate",i?Vr:Rn),{next(){const{value:v,done:g}=u.next();return g?{value:v,done:g}:{value:s?[c(v[0]),c(v[1])]:c(v),done:g}},[Symbol.iterator](){return this}}}}function aa(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Ju(e,t){const n={get(a){const r=this.__v_raw,l=Fe(r),s=Fe(a);e||(St(a,s)&&dt(l,"get",a),dt(l,"get",s));const{has:i}=oa(l),u=t?jr:e?$r:ct;if(i.call(l,a))return u(r.get(a));if(i.call(l,s))return u(r.get(s));r!==l&&r.get(a)},get size(){const a=this.__v_raw;return!e&&dt(Fe(a),"iterate",Rn),Reflect.get(a,"size",a)},has(a){const r=this.__v_raw,l=Fe(r),s=Fe(a);return e||(St(a,s)&&dt(l,"has",a),dt(l,"has",s)),a===s?r.has(a):r.has(a)||r.has(s)},forEach(a,r){const l=this,s=l.__v_raw,i=Fe(s),u=t?jr:e?$r:ct;return!e&&dt(i,"iterate",Rn),s.forEach((c,v)=>a.call(r,u(c),u(v),l))}};return st(n,e?{add:aa("add"),set:aa("set"),delete:aa("delete"),clear:aa("clear")}:{add(a){!t&&!Yt(a)&&!Bn(a)&&(a=Fe(a));const r=Fe(this);return oa(r).has.call(r,a)||(r.add(a),vn(r,"add",a,a)),this},set(a,r){!t&&!Yt(r)&&!Bn(r)&&(r=Fe(r));const l=Fe(this),{has:s,get:i}=oa(l);let u=s.call(l,a);u||(a=Fe(a),u=s.call(l,a));const c=i.call(l,a);return l.set(a,r),u?St(r,c)&&vn(l,"set",a,r):vn(l,"add",a,r),this},delete(a){const r=Fe(this),{has:l,get:s}=oa(r);let i=l.call(r,a);i||(a=Fe(a),i=l.call(r,a)),s&&s.call(r,a);const u=r.delete(a);return i&&vn(r,"delete",a,void 0),u},clear(){const a=Fe(this),r=a.size!==0,l=a.clear();return r&&vn(a,"clear",void 0,void 0),l}}),["keys","values","entries",Symbol.iterator].forEach(a=>{n[a]=Lu(a,e,t)}),n}function zr(e,t){const n=Ju(e,t);return(o,a,r)=>a==="__v_isReactive"?!e:a==="__v_isReadonly"?e:a==="__v_raw"?o:Reflect.get(Pe(n,a)&&a in o?n:o,a,r)}const qu={get:zr(!1,!1)},Hu={get:zr(!1,!0)},zu={get:zr(!0,!1)};const Rs=new WeakMap,Bs=new WeakMap,Ys=new WeakMap,Ku=new WeakMap;function Gu(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Qu(e){return e.__v_skip||!Object.isExtensible(e)?0:Gu(ku(e))}function bn(e){return Bn(e)?e:Gr(e,!1,Yu,qu,Rs)}function Xu(e){return Gr(e,!1,Wu,Hu,Bs)}function Kr(e){return Gr(e,!0,Uu,zu,Ys)}function Gr(e,t,n,o,a){if(!Ye(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=a.get(e);if(r)return r;const l=Qu(e);if(l===0)return e;const s=new Proxy(e,l===2?o:n);return a.set(e,s),s}function Kn(e){return Bn(e)?Kn(e.__v_raw):!!(e&&e.__v_isReactive)}function Bn(e){return!!(e&&e.__v_isReadonly)}function Yt(e){return!!(e&&e.__v_isShallow)}function Qr(e){return e?!!e.__v_raw:!1}function Fe(e){const t=e&&e.__v_raw;return t?Fe(t):e}function Zu(e){return!Pe(e,"__v_skip")&&Object.isExtensible(e)&&_s(e,"__v_skip",!0),e}const ct=e=>Ye(e)?bn(e):e,$r=e=>Ye(e)?Kr(e):e;function ce(e){return e?e.__v_isRef===!0:!1}function fe(e){return Us(e,!1)}function Xr(e){return Us(e,!0)}function Us(e,t){return ce(e)?e:new ed(e,t)}class ed{constructor(t,n){this.dep=new Ra,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:Fe(t),this._value=n?t:ct(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,o=this.__v_isShallow||Yt(t)||Bn(t);t=o?t:Fe(t),St(t,n)&&(this._rawValue=t,this._value=o?t:ct(t),this.dep.trigger())}}function b(e){return ce(e)?e.value:e}function je(e){return xe(e)?e():b(e)}const td={get:(e,t,n)=>t==="__v_raw"?e:b(Reflect.get(e,t,n)),set:(e,t,n,o)=>{const a=e[t];return ce(a)&&!ce(n)?(a.value=n,!0):Reflect.set(e,t,n,o)}};function Ws(e){return Kn(e)?e:new Proxy(e,td)}class nd{constructor(t){this.__v_isRef=!0,this._value=void 0;const n=this.dep=new Ra,{get:o,set:a}=t(n.track.bind(n),n.trigger.bind(n));this._get=o,this._set=a}get value(){return this._value=this._get()}set value(t){this._set(t)}}function od(e){return new nd(e)}class ad{constructor(t,n,o){this._object=t,this._key=n,this._defaultValue=o,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return Fu(Fe(this._object),this._key)}}class rd{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function on(e,t,n){return ce(e)?e:xe(e)?new rd(e):Ye(e)&&arguments.length>1?ld(e,t,n):fe(e)}function ld(e,t,n){const o=e[t];return ce(o)?o:new ad(e,t,n)}class sd{constructor(t,n,o){this.fn=t,this.setter=n,this._value=void 0,this.dep=new Ra(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=To-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=o}notify(){if(this.flags|=16,!(this.flags&8)&&Re!==this)return Ns(this,!0),!0}get value(){const t=this.dep.track();return As(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function id(e,t,n=!1){let o,a;return xe(e)?o=e:(o=e.get,a=e.set),new sd(o,a,n)}const ra={},ka=new WeakMap;let In;function ud(e,t=!1,n=In){if(n){let o=ka.get(n);o||ka.set(n,o=[]),o.push(e)}}function dd(e,t,n=Ee){const{immediate:o,deep:a,once:r,scheduler:l,augmentJob:s,call:i}=n,u=M=>a?M:Yt(M)||a===!1||a===0?hn(M,1):hn(M);let c,v,g,p,C=!1,y=!1;if(ce(e)?(v=()=>e.value,C=Yt(e)):Kn(e)?(v=()=>u(e),C=!0):ke(e)?(y=!0,C=e.some(M=>Kn(M)||Yt(M)),v=()=>e.map(M=>{if(ce(M))return M.value;if(Kn(M))return u(M);if(xe(M))return i?i(M,2):M()})):xe(e)?t?v=i?()=>i(e,2):e:v=()=>{if(g){On();try{g()}finally{An()}}const M=In;In=c;try{return i?i(e,3,[p]):e(p)}finally{In=M}}:v=Ht,t&&a){const M=v,A=a===!0?1/0:a;v=()=>hn(M(),A)}const x=Vs(),O=()=>{c.stop(),x&&x.active&&Ur(x.effects,c)};if(r&&t){const M=t;t=(...A)=>{M(...A),O()}}let T=y?new Array(e.length).fill(ra):ra;const Z=M=>{if(!(!(c.flags&1)||!c.dirty&&!M))if(t){const A=c.run();if(a||C||(y?A.some((le,ie)=>St(le,T[ie])):St(A,T))){g&&g();const le=In;In=c;try{const ie=[A,T===ra?void 0:y&&T[0]===ra?[]:T,p];i?i(t,3,ie):t(...ie),T=A}finally{In=le}}}else c.run()};return s&&s(Z),c=new js(v),c.scheduler=l?()=>l(Z,!1):Z,p=M=>ud(M,!1,c),g=c.onStop=()=>{const M=ka.get(c);if(M){if(i)i(M,4);else for(const A of M)A();ka.delete(c)}},t?o?Z(!0):T=c.run():l?l(Z.bind(null,!0),!0):c.run(),O.pause=c.pause.bind(c),O.resume=c.resume.bind(c),O.stop=O,O}function hn(e,t=1/0,n){if(t<=0||!Ye(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,ce(e))hn(e.value,t,n);else if(ke(e))for(let o=0;o<e.length;o++)hn(e[o],t,n);else if(so(e)||zn(e))e.forEach(o=>{hn(o,t,n)});else if(Cs(e)){for(const o in e)hn(e[o],t,n);for(const o of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,o)&&hn(e[o],t,n)}return e}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Jo(e,t,n,o){try{return o?e(...o):e()}catch(a){Ya(a,t,n)}}function sn(e,t,n,o){if(xe(e)){const a=Jo(e,t,n,o);return a&&bs(a)&&a.catch(r=>{Ya(r,t,n)}),a}if(ke(e)){const a=[];for(let r=0;r<e.length;r++)a.push(sn(e[r],t,n,o));return a}}function Ya(e,t,n,o=!0){const a=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:l}=t&&t.appContext.config||Ee;if(t){let s=t.parent;const i=t.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;s;){const c=s.ec;if(c){for(let v=0;v<c.length;v++)if(c[v](e,i,u)===!1)return}s=s.parent}if(r){On(),Jo(r,null,10,[e,i,u]),An();return}}cd(e,n,a,o,l)}function cd(e,t,n,o=!0,a=!1){if(a)throw e;console.error(e)}const gt=[];let tn=-1;const Gn=[];let xn=null,qn=0;const Ls=Promise.resolve();let Ca=null;function Mt(e){const t=Ca||Ls;return e?t.then(this?e.bind(this):e):t}function fd(e){let t=tn+1,n=gt.length;for(;t<n;){const o=t+n>>>1,a=gt[o],r=Eo(a);r<e||r===e&&a.flags&2?t=o+1:n=o}return t}function Zr(e){if(!(e.flags&1)){const t=Eo(e),n=gt[gt.length-1];!n||!(e.flags&2)&&t>=Eo(n)?gt.push(e):gt.splice(fd(t),0,e),e.flags|=1,Js()}}function Js(){Ca||(Ca=Ls.then(zs))}function qs(e){ke(e)?Gn.push(...e):xn&&e.id===-1?xn.splice(qn+1,0,e):e.flags&1||(Gn.push(e),e.flags|=1),Js()}function Dl(e,t,n=tn+1){for(;n<gt.length;n++){const o=gt[n];if(o&&o.flags&2){if(e&&o.id!==e.uid)continue;gt.splice(n,1),n--,o.flags&4&&(o.flags&=-2),o(),o.flags&4||(o.flags&=-2)}}}function Hs(e){if(Gn.length){const t=[...new Set(Gn)].sort((n,o)=>Eo(n)-Eo(o));if(Gn.length=0,xn){xn.push(...t);return}for(xn=t,qn=0;qn<xn.length;qn++){const n=xn[qn];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}xn=null,qn=0}}const Eo=e=>e.id==null?e.flags&2?-1:1/0:e.id;function zs(e){try{for(tn=0;tn<gt.length;tn++){const t=gt[tn];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Jo(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;tn<gt.length;tn++){const t=gt[tn];t&&(t.flags&=-2)}tn=-1,gt.length=0,Hs(),Ca=null,(gt.length||Gn.length)&&zs()}}let et=null,Ks=null;function _a(e){const t=et;return et=e,Ks=e&&e.type.__scopeId||null,t}function f(e,t=et,n){if(!t||e._n)return e;const o=(...a)=>{o._d&&Fl(-1);const r=_a(t);let l;try{l=e(...a)}finally{_a(r),o._d&&Fl(1)}return l};return o._n=!0,o._c=!0,o._d=!0,o}function Yn(e,t){if(et===null)return e;const n=Ha(et),o=e.dirs||(e.dirs=[]);for(let a=0;a<t.length;a++){let[r,l,s,i=Ee]=t[a];r&&(xe(r)&&(r={mounted:r,updated:r}),r.deep&&hn(l),o.push({dir:r,instance:n,value:l,oldValue:void 0,arg:s,modifiers:i}))}return e}function Fn(e,t,n,o){const a=e.dirs,r=t&&t.dirs;for(let l=0;l<a.length;l++){const s=a[l];r&&(s.oldValue=r[l].value);let i=s.dir[o];i&&(On(),sn(i,n,8,[e.el,s,e,t]),An())}}const pd=Symbol("_vte"),md=e=>e.__isTeleport;function el(e,t){e.shapeFlag&6&&e.component?(e.transition=t,el(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}/*! #__NO_SIDE_EFFECTS__ */function I(e,t){return xe(e)?st({name:e.name},t,{setup:e}):e}function Gs(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function Sa(e,t,n,o,a=!1){if(ke(e)){e.forEach((C,y)=>Sa(C,t&&(ke(t)?t[y]:t),n,o,a));return}if(Qn(o)&&!a){o.shapeFlag&512&&o.type.__asyncResolved&&o.component.subTree.component&&Sa(e,t,n,o.component.subTree);return}const r=o.shapeFlag&4?Ha(o.component):o.el,l=a?null:r,{i:s,r:i}=e,u=t&&t.r,c=s.refs===Ee?s.refs={}:s.refs,v=s.setupState,g=Fe(v),p=v===Ee?()=>!1:C=>Pe(g,C);if(u!=null&&u!==i&&(Ke(u)?(c[u]=null,p(u)&&(v[u]=null)):ce(u)&&(u.value=null)),xe(i))Jo(i,s,12,[l,c]);else{const C=Ke(i),y=ce(i);if(C||y){const x=()=>{if(e.f){const O=C?p(i)?v[i]:c[i]:i.value;a?ke(O)&&Ur(O,r):ke(O)?O.includes(r)||O.push(r):C?(c[i]=[r],p(i)&&(v[i]=c[i])):(i.value=[r],e.k&&(c[e.k]=i.value))}else C?(c[i]=l,p(i)&&(v[i]=l)):y&&(i.value=l,e.k&&(c[e.k]=l))};l?(x.id=-1,Nt(x,n)):x()}}}Ia().requestIdleCallback;Ia().cancelIdleCallback;const Qn=e=>!!e.type.__asyncLoader,Qs=e=>e.type.__isKeepAlive;function vd(e,t){Xs(e,"a",t)}function hd(e,t){Xs(e,"da",t)}function Xs(e,t,n=rt){const o=e.__wdc||(e.__wdc=()=>{let a=n;for(;a;){if(a.isDeactivated)return;a=a.parent}return e()});if(Ua(t,o,n),n){let a=n.parent;for(;a&&a.parent;)Qs(a.parent.vnode)&&gd(o,t,n,a),a=a.parent}}function gd(e,t,n,o){const a=Ua(t,e,o,!0);Wa(()=>{Ur(o[t],a)},n)}function Ua(e,t,n=rt,o=!1){if(n){const a=n[e]||(n[e]=[]),r=t.__weh||(t.__weh=(...l)=>{On();const s=Ho(n),i=sn(t,n,e,l);return s(),An(),i});return o?a.unshift(r):a.push(r),r}}const kn=e=>(t,n=rt)=>{(!Io||e==="sp")&&Ua(e,(...o)=>t(...o),n)},yd=kn("bm"),bt=kn("m"),Zs=kn("bu"),wd=kn("u"),tl=kn("bum"),Wa=kn("um"),bd=kn("sp"),kd=kn("rtg"),Cd=kn("rtc");function _d(e,t=rt){Ua("ec",e,t)}const ei="components";function Sd(e,t){return ni(ei,e,!0,t)||e}const ti=Symbol.for("v-ndc");function qo(e){return Ke(e)?ni(ei,e,!1)||e:e||ti}function ni(e,t,n=!0,o=!1){const a=et||rt;if(a){const r=a.type;{const s=uc(r,!1);if(s&&(s===t||s===Tt(t)||s===Pa(Tt(t))))return r}const l=Vl(a[e]||r[e],t)||Vl(a.appContext[e],t);return!l&&o?r:l}}function Vl(e,t){return e&&(e[t]||e[Tt(t)]||e[Pa(Tt(t))])}function _e(e,t,n,o){let a;const r=n,l=ke(e);if(l||Ke(e)){const s=l&&Kn(e);let i=!1;s&&(i=!Yt(e),e=Ba(e)),a=new Array(e.length);for(let u=0,c=e.length;u<c;u++)a[u]=t(i?ct(e[u]):e[u],u,void 0,r)}else if(typeof e=="number"){a=new Array(e);for(let s=0;s<e;s++)a[s]=t(s+1,s,void 0,r)}else if(Ye(e))if(e[Symbol.iterator])a=Array.from(e,(s,i)=>t(s,i,void 0,r));else{const s=Object.keys(e);a=new Array(s.length);for(let i=0,u=s.length;i<u;i++){const c=s[i];a[i]=t(e[c],c,i,r)}}else a=[];return a}function ze(e,t,n={},o,a){if(et.ce||et.parent&&Qn(et.parent)&&et.parent.ce)return t!=="default"&&(n.name=t),m(),E(U,null,[d("slot",n,o&&o())],64);let r=e[t];r&&r._c&&(r._d=!1),m();const l=r&&oi(r(n)),s=n.key||l&&l.key,i=E(U,{key:(s&&!Kt(s)?s:`_${t}`)+(!l&&o?"_fb":"")},l||(o?o():[]),l&&e._===1?64:-2);return!a&&i.scopeId&&(i.slotScopeIds=[i.scopeId+"-s"]),r&&r._c&&(r._d=!0),i}function oi(e){return e.some(t=>ol(t)?!(t.type===Nn||t.type===U&&!oi(t.children)):!0)?e:null}const Nr=e=>e?xi(e)?Ha(e):Nr(e.parent):null,$o=st(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Nr(e.parent),$root:e=>Nr(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>ri(e),$forceUpdate:e=>e.f||(e.f=()=>{Zr(e.update)}),$nextTick:e=>e.n||(e.n=Mt.bind(e.proxy)),$watch:e=>qd.bind(e)}),fr=(e,t)=>e!==Ee&&!e.__isScriptSetup&&Pe(e,t),xd={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:o,data:a,props:r,accessCache:l,type:s,appContext:i}=e;let u;if(t[0]!=="$"){const p=l[t];if(p!==void 0)switch(p){case 1:return o[t];case 2:return a[t];case 4:return n[t];case 3:return r[t]}else{if(fr(o,t))return l[t]=1,o[t];if(a!==Ee&&Pe(a,t))return l[t]=2,a[t];if((u=e.propsOptions[0])&&Pe(u,t))return l[t]=3,r[t];if(n!==Ee&&Pe(n,t))return l[t]=4,n[t];Mr&&(l[t]=0)}}const c=$o[t];let v,g;if(c)return t==="$attrs"&&dt(e.attrs,"get",""),c(e);if((v=s.__cssModules)&&(v=v[t]))return v;if(n!==Ee&&Pe(n,t))return l[t]=4,n[t];if(g=i.config.globalProperties,Pe(g,t))return g[t]},set({_:e},t,n){const{data:o,setupState:a,ctx:r}=e;return fr(a,t)?(a[t]=n,!0):o!==Ee&&Pe(o,t)?(o[t]=n,!0):Pe(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:o,appContext:a,propsOptions:r}},l){let s;return!!n[l]||e!==Ee&&Pe(e,l)||fr(t,l)||(s=r[0])&&Pe(s,l)||Pe(o,l)||Pe($o,l)||Pe(a.config.globalProperties,l)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Pe(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function xa(e){return ke(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}function Ut(e,t){return!e||!t?e||t:ke(e)&&ke(t)?e.concat(t):st({},xa(e),xa(t))}let Mr=!0;function Dd(e){const t=ri(e),n=e.proxy,o=e.ctx;Mr=!1,t.beforeCreate&&jl(t.beforeCreate,e,"bc");const{data:a,computed:r,methods:l,watch:s,provide:i,inject:u,created:c,beforeMount:v,mounted:g,beforeUpdate:p,updated:C,activated:y,deactivated:x,beforeDestroy:O,beforeUnmount:T,destroyed:Z,unmounted:M,render:A,renderTracked:le,renderTriggered:ie,errorCaptured:L,serverPrefetch:me,expose:We,inheritAttrs:Ae,components:nt,directives:pt,filters:ot}=t;if(u&&Vd(u,o,null),l)for(const ne in l){const H=l[ne];xe(H)&&(o[ne]=H.bind(n))}if(a){const ne=a.call(n,n);Ye(ne)&&(e.data=bn(ne))}if(Mr=!0,r)for(const ne in r){const H=r[ne],oe=xe(H)?H.bind(n,n):xe(H.get)?H.get.bind(n,n):Ht,$e=!xe(H)&&xe(H.set)?H.set.bind(n):Ht,se=w({get:oe,set:$e});Object.defineProperty(o,ne,{enumerable:!0,configurable:!0,get:()=>se.value,set:V=>se.value=V})}if(s)for(const ne in s)ai(s[ne],o,n,ne);if(i){const ne=xe(i)?i.call(n):i;Reflect.ownKeys(ne).forEach(H=>{Va(H,ne[H])})}c&&jl(c,e,"c");function ee(ne,H){ke(H)?H.forEach(oe=>ne(oe.bind(n))):H&&ne(H.bind(n))}if(ee(yd,v),ee(bt,g),ee(Zs,p),ee(wd,C),ee(vd,y),ee(hd,x),ee(_d,L),ee(Cd,le),ee(kd,ie),ee(tl,T),ee(Wa,M),ee(bd,me),ke(We))if(We.length){const ne=e.exposed||(e.exposed={});We.forEach(H=>{Object.defineProperty(ne,H,{get:()=>n[H],set:oe=>n[H]=oe})})}else e.exposed||(e.exposed={});A&&e.render===Ht&&(e.render=A),Ae!=null&&(e.inheritAttrs=Ae),nt&&(e.components=nt),pt&&(e.directives=pt),me&&Gs(e)}function Vd(e,t,n=Ht){ke(e)&&(e=Or(e));for(const o in e){const a=e[o];let r;Ye(a)?"default"in a?r=Zn(a.from||o,a.default,!0):r=Zn(a.from||o):r=Zn(a),ce(r)?Object.defineProperty(t,o,{enumerable:!0,configurable:!0,get:()=>r.value,set:l=>r.value=l}):t[o]=r}}function jl(e,t,n){sn(ke(e)?e.map(o=>o.bind(t.proxy)):e.bind(t.proxy),t,n)}function ai(e,t,n,o){let a=o.includes(".")?yi(n,o):()=>n[o];if(Ke(e)){const r=t[e];xe(r)&&lt(a,r)}else if(xe(e))lt(a,e.bind(n));else if(Ye(e))if(ke(e))e.forEach(r=>ai(r,t,n,o));else{const r=xe(e.handler)?e.handler.bind(n):t[e.handler];xe(r)&&lt(a,r,e)}}function ri(e){const t=e.type,{mixins:n,extends:o}=t,{mixins:a,optionsCache:r,config:{optionMergeStrategies:l}}=e.appContext,s=r.get(t);let i;return s?i=s:!a.length&&!n&&!o?i=t:(i={},a.length&&a.forEach(u=>Da(i,u,l,!0)),Da(i,t,l)),Ye(t)&&r.set(t,i),i}function Da(e,t,n,o=!1){const{mixins:a,extends:r}=t;r&&Da(e,r,n,!0),a&&a.forEach(l=>Da(e,l,n,!0));for(const l in t)if(!(o&&l==="expose")){const s=jd[l]||n&&n[l];e[l]=s?s(e[l],t[l]):t[l]}return e}const jd={data:$l,props:Nl,emits:Nl,methods:_o,computed:_o,beforeCreate:vt,created:vt,beforeMount:vt,mounted:vt,beforeUpdate:vt,updated:vt,beforeDestroy:vt,beforeUnmount:vt,destroyed:vt,unmounted:vt,activated:vt,deactivated:vt,errorCaptured:vt,serverPrefetch:vt,components:_o,directives:_o,watch:Nd,provide:$l,inject:$d};function $l(e,t){return t?e?function(){return st(xe(e)?e.call(this,this):e,xe(t)?t.call(this,this):t)}:t:e}function $d(e,t){return _o(Or(e),Or(t))}function Or(e){if(ke(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function vt(e,t){return e?[...new Set([].concat(e,t))]:t}function _o(e,t){return e?st(Object.create(null),e,t):t}function Nl(e,t){return e?ke(e)&&ke(t)?[...new Set([...e,...t])]:st(Object.create(null),xa(e),xa(t??{})):t}function Nd(e,t){if(!e)return t;if(!t)return e;const n=st(Object.create(null),e);for(const o in t)n[o]=vt(e[o],t[o]);return n}function li(){return{app:null,config:{isNativeTag:wu,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Md=0;function Od(e,t){return function(o,a=null){xe(o)||(o=st({},o)),a!=null&&!Ye(a)&&(a=null);const r=li(),l=new WeakSet,s=[];let i=!1;const u=r.app={_uid:Md++,_component:o,_props:a,_container:null,_context:r,_instance:null,version:cc,get config(){return r.config},set config(c){},use(c,...v){return l.has(c)||(c&&xe(c.install)?(l.add(c),c.install(u,...v)):xe(c)&&(l.add(c),c(u,...v))),u},mixin(c){return r.mixins.includes(c)||r.mixins.push(c),u},component(c,v){return v?(r.components[c]=v,u):r.components[c]},directive(c,v){return v?(r.directives[c]=v,u):r.directives[c]},mount(c,v,g){if(!i){const p=u._ceVNode||d(o,a);return p.appContext=r,g===!0?g="svg":g===!1&&(g=void 0),e(p,c,g),i=!0,u._container=c,c.__vue_app__=u,Ha(p.component)}},onUnmount(c){s.push(c)},unmount(){i&&(sn(s,u._instance,16),e(null,u._container),delete u._container.__vue_app__)},provide(c,v){return r.provides[c]=v,u},runWithContext(c){const v=Xn;Xn=u;try{return c()}finally{Xn=v}}};return u}}let Xn=null;function Va(e,t){if(rt){let n=rt.provides;const o=rt.parent&&rt.parent.provides;o===n&&(n=rt.provides=Object.create(o)),n[e]=t}}function Zn(e,t,n=!1){const o=rt||et;if(o||Xn){const a=Xn?Xn._context.provides:o?o.parent==null?o.vnode.appContext&&o.vnode.appContext.provides:o.parent.provides:void 0;if(a&&e in a)return a[e];if(arguments.length>1)return n&&xe(t)?t.call(o&&o.proxy):t}}const si={},ii=()=>Object.create(si),ui=e=>Object.getPrototypeOf(e)===si;function Ad(e,t,n,o=!1){const a={},r=ii();e.propsDefaults=Object.create(null),di(e,t,a,r);for(const l in e.propsOptions[0])l in a||(a[l]=void 0);n?e.props=o?a:Xu(a):e.type.props?e.props=a:e.props=r,e.attrs=r}function Td(e,t,n,o){const{props:a,attrs:r,vnode:{patchFlag:l}}=e,s=Fe(a),[i]=e.propsOptions;let u=!1;if((o||l>0)&&!(l&16)){if(l&8){const c=e.vnode.dynamicProps;for(let v=0;v<c.length;v++){let g=c[v];if(Ja(e.emitsOptions,g))continue;const p=t[g];if(i)if(Pe(r,g))p!==r[g]&&(r[g]=p,u=!0);else{const C=Tt(g);a[C]=Ar(i,s,C,p,e,!1)}else p!==r[g]&&(r[g]=p,u=!0)}}}else{di(e,t,a,r)&&(u=!0);let c;for(const v in s)(!t||!Pe(t,v)&&((c=Mn(v))===v||!Pe(t,c)))&&(i?n&&(n[v]!==void 0||n[c]!==void 0)&&(a[v]=Ar(i,s,v,void 0,e,!0)):delete a[v]);if(r!==s)for(const v in r)(!t||!Pe(t,v))&&(delete r[v],u=!0)}u&&vn(e.attrs,"set","")}function di(e,t,n,o){const[a,r]=e.propsOptions;let l=!1,s;if(t)for(let i in t){if(Do(i))continue;const u=t[i];let c;a&&Pe(a,c=Tt(i))?!r||!r.includes(c)?n[c]=u:(s||(s={}))[c]=u:Ja(e.emitsOptions,i)||(!(i in o)||u!==o[i])&&(o[i]=u,l=!0)}if(r){const i=Fe(n),u=s||Ee;for(let c=0;c<r.length;c++){const v=r[c];n[v]=Ar(a,i,v,u[v],e,!Pe(u,v))}}return l}function Ar(e,t,n,o,a,r){const l=e[n];if(l!=null){const s=Pe(l,"default");if(s&&o===void 0){const i=l.default;if(l.type!==Function&&!l.skipFactory&&xe(i)){const{propsDefaults:u}=a;if(n in u)o=u[n];else{const c=Ho(a);o=u[n]=i.call(null,t),c()}}else o=i;a.ce&&a.ce._setProp(n,o)}l[0]&&(r&&!s?o=!1:l[1]&&(o===""||o===Mn(n))&&(o=!0))}return o}const Fd=new WeakMap;function ci(e,t,n=!1){const o=n?Fd:t.propsCache,a=o.get(e);if(a)return a;const r=e.props,l={},s=[];let i=!1;if(!xe(e)){const c=v=>{i=!0;const[g,p]=ci(v,t,!0);st(l,g),p&&s.push(...p)};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!r&&!i)return Ye(e)&&o.set(e,Hn),Hn;if(ke(r))for(let c=0;c<r.length;c++){const v=Tt(r[c]);Ml(v)&&(l[v]=Ee)}else if(r)for(const c in r){const v=Tt(c);if(Ml(v)){const g=r[c],p=l[v]=ke(g)||xe(g)?{type:g}:st({},g),C=p.type;let y=!1,x=!0;if(ke(C))for(let O=0;O<C.length;++O){const T=C[O],Z=xe(T)&&T.name;if(Z==="Boolean"){y=!0;break}else Z==="String"&&(x=!1)}else y=xe(C)&&C.name==="Boolean";p[0]=y,p[1]=x,(y||Pe(p,"default"))&&s.push(v)}}const u=[l,s];return Ye(e)&&o.set(e,u),u}function Ml(e){return e[0]!=="$"&&!Do(e)}const fi=e=>e[0]==="_"||e==="$stable",nl=e=>ke(e)?e.map(nn):[nn(e)],Ed=(e,t,n)=>{if(t._n)return t;const o=f((...a)=>nl(t(...a)),n);return o._c=!1,o},pi=(e,t,n)=>{const o=e._ctx;for(const a in e){if(fi(a))continue;const r=e[a];if(xe(r))t[a]=Ed(a,r,o);else if(r!=null){const l=nl(r);t[a]=()=>l}}},mi=(e,t)=>{const n=nl(t);e.slots.default=()=>n},vi=(e,t,n)=>{for(const o in t)(n||o!=="_")&&(e[o]=t[o])},Pd=(e,t,n)=>{const o=e.slots=ii();if(e.vnode.shapeFlag&32){const a=t._;a?(vi(o,t,n),n&&_s(o,"_",a,!0)):pi(t,o)}else t&&mi(e,t)},Id=(e,t,n)=>{const{vnode:o,slots:a}=e;let r=!0,l=Ee;if(o.shapeFlag&32){const s=t._;s?n&&s===1?r=!1:vi(a,t,n):(r=!t.$stable,pi(t,a)),l=t}else t&&(mi(e,t),l={default:1});if(r)for(const s in a)!fi(s)&&l[s]==null&&delete a[s]},Nt=Xd;function Rd(e){return Bd(e)}function Bd(e,t){const n=Ia();n.__VUE__=!0;const{insert:o,remove:a,patchProp:r,createElement:l,createText:s,createComment:i,setText:u,setElementText:c,parentNode:v,nextSibling:g,setScopeId:p=Ht,insertStaticContent:C}=e,y=(S,D,F,q=null,Y=null,W=null,te=void 0,Q=null,z=!!D.dynamicChildren)=>{if(S===D)return;S&&!go(S,D)&&(q=kt(S),V(S,Y,W,!0),S=null),D.patchFlag===-2&&(z=!1,D.dynamicChildren=null);const{type:J,ref:ye,shapeFlag:ae}=D;switch(J){case qa:x(S,D,F,q);break;case Nn:O(S,D,F,q);break;case No:S==null&&T(D,F,q,te);break;case U:nt(S,D,F,q,Y,W,te,Q,z);break;default:ae&1?A(S,D,F,q,Y,W,te,Q,z):ae&6?pt(S,D,F,q,Y,W,te,Q,z):(ae&64||ae&128)&&J.process(S,D,F,q,Y,W,te,Q,z,dn)}ye!=null&&Y&&Sa(ye,S&&S.ref,W,D||S,!D)},x=(S,D,F,q)=>{if(S==null)o(D.el=s(D.children),F,q);else{const Y=D.el=S.el;D.children!==S.children&&u(Y,D.children)}},O=(S,D,F,q)=>{S==null?o(D.el=i(D.children||""),F,q):D.el=S.el},T=(S,D,F,q)=>{[S.el,S.anchor]=C(S.children,D,F,q,S.el,S.anchor)},Z=({el:S,anchor:D},F,q)=>{let Y;for(;S&&S!==D;)Y=g(S),o(S,F,q),S=Y;o(D,F,q)},M=({el:S,anchor:D})=>{let F;for(;S&&S!==D;)F=g(S),a(S),S=F;a(D)},A=(S,D,F,q,Y,W,te,Q,z)=>{D.type==="svg"?te="svg":D.type==="math"&&(te="mathml"),S==null?le(D,F,q,Y,W,te,Q,z):me(S,D,Y,W,te,Q,z)},le=(S,D,F,q,Y,W,te,Q)=>{let z,J;const{props:ye,shapeFlag:ae,transition:ve,dirs:Se}=S;if(z=S.el=l(S.type,W,ye&&ye.is,ye),ae&8?c(z,S.children):ae&16&&L(S.children,z,null,q,Y,pr(S,W),te,Q),Se&&Fn(S,null,q,"created"),ie(z,S,S.scopeId,te,q),ye){for(const Ie in ye)Ie!=="value"&&!Do(Ie)&&r(z,Ie,null,ye[Ie],W,q);"value"in ye&&r(z,"value",null,ye.value,W),(J=ye.onVnodeBeforeMount)&&Zt(J,q,S)}Se&&Fn(S,null,q,"beforeMount");const Ne=Yd(Y,ve);Ne&&ve.beforeEnter(z),o(z,D,F),((J=ye&&ye.onVnodeMounted)||Ne||Se)&&Nt(()=>{J&&Zt(J,q,S),Ne&&ve.enter(z),Se&&Fn(S,null,q,"mounted")},Y)},ie=(S,D,F,q,Y)=>{if(F&&p(S,F),q)for(let W=0;W<q.length;W++)p(S,q[W]);if(Y){let W=Y.subTree;if(D===W||ki(W.type)&&(W.ssContent===D||W.ssFallback===D)){const te=Y.vnode;ie(S,te,te.scopeId,te.slotScopeIds,Y.parent)}}},L=(S,D,F,q,Y,W,te,Q,z=0)=>{for(let J=z;J<S.length;J++){const ye=S[J]=Q?Dn(S[J]):nn(S[J]);y(null,ye,D,F,q,Y,W,te,Q)}},me=(S,D,F,q,Y,W,te)=>{const Q=D.el=S.el;let{patchFlag:z,dynamicChildren:J,dirs:ye}=D;z|=S.patchFlag&16;const ae=S.props||Ee,ve=D.props||Ee;let Se;if(F&&En(F,!1),(Se=ve.onVnodeBeforeUpdate)&&Zt(Se,F,D,S),ye&&Fn(D,S,F,"beforeUpdate"),F&&En(F,!0),(ae.innerHTML&&ve.innerHTML==null||ae.textContent&&ve.textContent==null)&&c(Q,""),J?We(S.dynamicChildren,J,Q,F,q,pr(D,Y),W):te||H(S,D,Q,null,F,q,pr(D,Y),W,!1),z>0){if(z&16)Ae(Q,ae,ve,F,Y);else if(z&2&&ae.class!==ve.class&&r(Q,"class",null,ve.class,Y),z&4&&r(Q,"style",ae.style,ve.style,Y),z&8){const Ne=D.dynamicProps;for(let Ie=0;Ie<Ne.length;Ie++){const Te=Ne[Ie],mt=ae[Te],at=ve[Te];(at!==mt||Te==="value")&&r(Q,Te,mt,at,Y,F)}}z&1&&S.children!==D.children&&c(Q,D.children)}else!te&&J==null&&Ae(Q,ae,ve,F,Y);((Se=ve.onVnodeUpdated)||ye)&&Nt(()=>{Se&&Zt(Se,F,D,S),ye&&Fn(D,S,F,"updated")},q)},We=(S,D,F,q,Y,W,te)=>{for(let Q=0;Q<D.length;Q++){const z=S[Q],J=D[Q],ye=z.el&&(z.type===U||!go(z,J)||z.shapeFlag&70)?v(z.el):F;y(z,J,ye,null,q,Y,W,te,!0)}},Ae=(S,D,F,q,Y)=>{if(D!==F){if(D!==Ee)for(const W in D)!Do(W)&&!(W in F)&&r(S,W,D[W],null,Y,q);for(const W in F){if(Do(W))continue;const te=F[W],Q=D[W];te!==Q&&W!=="value"&&r(S,W,Q,te,Y,q)}"value"in F&&r(S,"value",D.value,F.value,Y)}},nt=(S,D,F,q,Y,W,te,Q,z)=>{const J=D.el=S?S.el:s(""),ye=D.anchor=S?S.anchor:s("");let{patchFlag:ae,dynamicChildren:ve,slotScopeIds:Se}=D;Se&&(Q=Q?Q.concat(Se):Se),S==null?(o(J,F,q),o(ye,F,q),L(D.children||[],F,ye,Y,W,te,Q,z)):ae>0&&ae&64&&ve&&S.dynamicChildren?(We(S.dynamicChildren,ve,F,Y,W,te,Q),(D.key!=null||Y&&D===Y.subTree)&&hi(S,D,!0)):H(S,D,F,ye,Y,W,te,Q,z)},pt=(S,D,F,q,Y,W,te,Q,z)=>{D.slotScopeIds=Q,S==null?D.shapeFlag&512?Y.ctx.activate(D,F,q,te,z):ot(D,F,q,Y,W,te,z):qe(S,D,z)},ot=(S,D,F,q,Y,W,te)=>{const Q=S.component=ac(S,q,Y);if(Qs(S)&&(Q.ctx.renderer=dn),rc(Q,!1,te),Q.asyncDep){if(Y&&Y.registerDep(Q,ee,te),!S.el){const z=Q.subTree=d(Nn);O(null,z,D,F)}}else ee(Q,S,D,F,Y,W,te)},qe=(S,D,F)=>{const q=D.component=S.component;if(Gd(S,D,F))if(q.asyncDep&&!q.asyncResolved){ne(q,D,F);return}else q.next=D,q.update();else D.el=S.el,q.vnode=D},ee=(S,D,F,q,Y,W,te)=>{const Q=()=>{if(S.isMounted){let{next:ae,bu:ve,u:Se,parent:Ne,vnode:Ie}=S;{const j=gi(S);if(j){ae&&(ae.el=Ie.el,ne(S,ae,te)),j.asyncDep.then(()=>{S.isUnmounted||Q()});return}}let Te=ae,mt;En(S,!1),ae?(ae.el=Ie.el,ne(S,ae,te)):ae=Ie,ve&&fa(ve),(mt=ae.props&&ae.props.onVnodeBeforeUpdate)&&Zt(mt,Ne,ae,Ie),En(S,!0);const at=Al(S),$=S.subTree;S.subTree=at,y($,at,v($.el),kt($),S,Y,W),ae.el=at.el,Te===null&&Qd(S,at.el),Se&&Nt(Se,Y),(mt=ae.props&&ae.props.onVnodeUpdated)&&Nt(()=>Zt(mt,Ne,ae,Ie),Y)}else{let ae;const{el:ve,props:Se}=D,{bm:Ne,m:Ie,parent:Te,root:mt,type:at}=S,$=Qn(D);En(S,!1),Ne&&fa(Ne),!$&&(ae=Se&&Se.onVnodeBeforeMount)&&Zt(ae,Te,D),En(S,!0);{mt.ce&&mt.ce._injectChildStyle(at);const j=S.subTree=Al(S);y(null,j,F,q,S,Y,W),D.el=j.el}if(Ie&&Nt(Ie,Y),!$&&(ae=Se&&Se.onVnodeMounted)){const j=D;Nt(()=>Zt(ae,Te,j),Y)}(D.shapeFlag&256||Te&&Qn(Te.vnode)&&Te.vnode.shapeFlag&256)&&S.a&&Nt(S.a,Y),S.isMounted=!0,D=F=q=null}};S.scope.on();const z=S.effect=new js(Q);S.scope.off();const J=S.update=z.run.bind(z),ye=S.job=z.runIfDirty.bind(z);ye.i=S,ye.id=S.uid,z.scheduler=()=>Zr(ye),En(S,!0),J()},ne=(S,D,F)=>{D.component=S;const q=S.vnode.props;S.vnode=D,S.next=null,Td(S,D.props,q,F),Id(S,D.children,F),On(),Dl(S),An()},H=(S,D,F,q,Y,W,te,Q,z=!1)=>{const J=S&&S.children,ye=S?S.shapeFlag:0,ae=D.children,{patchFlag:ve,shapeFlag:Se}=D;if(ve>0){if(ve&128){$e(J,ae,F,q,Y,W,te,Q,z);return}else if(ve&256){oe(J,ae,F,q,Y,W,te,Q,z);return}}Se&8?(ye&16&&Xt(J,Y,W),ae!==J&&c(F,ae)):ye&16?Se&16?$e(J,ae,F,q,Y,W,te,Q,z):Xt(J,Y,W,!0):(ye&8&&c(F,""),Se&16&&L(ae,F,q,Y,W,te,Q,z))},oe=(S,D,F,q,Y,W,te,Q,z)=>{S=S||Hn,D=D||Hn;const J=S.length,ye=D.length,ae=Math.min(J,ye);let ve;for(ve=0;ve<ae;ve++){const Se=D[ve]=z?Dn(D[ve]):nn(D[ve]);y(S[ve],Se,F,null,Y,W,te,Q,z)}J>ye?Xt(S,Y,W,!0,!1,ae):L(D,F,q,Y,W,te,Q,z,ae)},$e=(S,D,F,q,Y,W,te,Q,z)=>{let J=0;const ye=D.length;let ae=S.length-1,ve=ye-1;for(;J<=ae&&J<=ve;){const Se=S[J],Ne=D[J]=z?Dn(D[J]):nn(D[J]);if(go(Se,Ne))y(Se,Ne,F,null,Y,W,te,Q,z);else break;J++}for(;J<=ae&&J<=ve;){const Se=S[ae],Ne=D[ve]=z?Dn(D[ve]):nn(D[ve]);if(go(Se,Ne))y(Se,Ne,F,null,Y,W,te,Q,z);else break;ae--,ve--}if(J>ae){if(J<=ve){const Se=ve+1,Ne=Se<ye?D[Se].el:q;for(;J<=ve;)y(null,D[J]=z?Dn(D[J]):nn(D[J]),F,Ne,Y,W,te,Q,z),J++}}else if(J>ve)for(;J<=ae;)V(S[J],Y,W,!0),J++;else{const Se=J,Ne=J,Ie=new Map;for(J=Ne;J<=ve;J++){const de=D[J]=z?Dn(D[J]):nn(D[J]);de.key!=null&&Ie.set(de.key,J)}let Te,mt=0;const at=ve-Ne+1;let $=!1,j=0;const B=new Array(at);for(J=0;J<at;J++)B[J]=0;for(J=Se;J<=ae;J++){const de=S[J];if(mt>=at){V(de,Y,W,!0);continue}let we;if(de.key!=null)we=Ie.get(de.key);else for(Te=Ne;Te<=ve;Te++)if(B[Te-Ne]===0&&go(de,D[Te])){we=Te;break}we===void 0?V(de,Y,W,!0):(B[we-Ne]=J+1,we>=j?j=we:$=!0,y(de,D[we],F,null,Y,W,te,Q,z),mt++)}const re=$?Ud(B):Hn;for(Te=re.length-1,J=at-1;J>=0;J--){const de=Ne+J,we=D[de],he=de+1<ye?D[de+1].el:q;B[J]===0?y(null,we,F,he,Y,W,te,Q,z):$&&(Te<0||J!==re[Te]?se(we,F,he,2):Te--)}}},se=(S,D,F,q,Y=null)=>{const{el:W,type:te,transition:Q,children:z,shapeFlag:J}=S;if(J&6){se(S.component.subTree,D,F,q);return}if(J&128){S.suspense.move(D,F,q);return}if(J&64){te.move(S,D,F,dn);return}if(te===U){o(W,D,F);for(let ae=0;ae<z.length;ae++)se(z[ae],D,F,q);o(S.anchor,D,F);return}if(te===No){Z(S,D,F);return}if(q!==2&&J&1&&Q)if(q===0)Q.beforeEnter(W),o(W,D,F),Nt(()=>Q.enter(W),Y);else{const{leave:ae,delayLeave:ve,afterLeave:Se}=Q,Ne=()=>o(W,D,F),Ie=()=>{ae(W,()=>{Ne(),Se&&Se()})};ve?ve(W,Ne,Ie):Ie()}else o(W,D,F)},V=(S,D,F,q=!1,Y=!1)=>{const{type:W,props:te,ref:Q,children:z,dynamicChildren:J,shapeFlag:ye,patchFlag:ae,dirs:ve,cacheIndex:Se}=S;if(ae===-2&&(Y=!1),Q!=null&&Sa(Q,null,F,S,!0),Se!=null&&(D.renderCache[Se]=void 0),ye&256){D.ctx.deactivate(S);return}const Ne=ye&1&&ve,Ie=!Qn(S);let Te;if(Ie&&(Te=te&&te.onVnodeBeforeUnmount)&&Zt(Te,D,S),ye&6)Ft(S.component,F,q);else{if(ye&128){S.suspense.unmount(F,q);return}Ne&&Fn(S,null,D,"beforeUnmount"),ye&64?S.type.remove(S,D,F,dn,q):J&&!J.hasOnce&&(W!==U||ae>0&&ae&64)?Xt(J,D,F,!1,!0):(W===U&&ae&384||!Y&&ye&16)&&Xt(z,D,F),q&&K(S)}(Ie&&(Te=te&&te.onVnodeUnmounted)||Ne)&&Nt(()=>{Te&&Zt(Te,D,S),Ne&&Fn(S,null,D,"unmounted")},F)},K=S=>{const{type:D,el:F,anchor:q,transition:Y}=S;if(D===U){Ge(F,q);return}if(D===No){M(S);return}const W=()=>{a(F),Y&&!Y.persisted&&Y.afterLeave&&Y.afterLeave()};if(S.shapeFlag&1&&Y&&!Y.persisted){const{leave:te,delayLeave:Q}=Y,z=()=>te(F,W);Q?Q(S.el,W,z):z()}else W()},Ge=(S,D)=>{let F;for(;S!==D;)F=g(S),a(S),S=F;a(D)},Ft=(S,D,F)=>{const{bum:q,scope:Y,job:W,subTree:te,um:Q,m:z,a:J}=S;Ol(z),Ol(J),q&&fa(q),Y.stop(),W&&(W.flags|=8,V(te,S,D,F)),Q&&Nt(Q,D),Nt(()=>{S.isUnmounted=!0},D),D&&D.pendingBranch&&!D.isUnmounted&&S.asyncDep&&!S.asyncResolved&&S.suspenseId===D.pendingId&&(D.deps--,D.deps===0&&D.resolve())},Xt=(S,D,F,q=!1,Y=!1,W=0)=>{for(let te=W;te<S.length;te++)V(S[te],D,F,q,Y)},kt=S=>{if(S.shapeFlag&6)return kt(S.component.subTree);if(S.shapeFlag&128)return S.suspense.next();const D=g(S.anchor||S.el),F=D&&D[pd];return F?g(F):D};let Et=!1;const ta=(S,D,F)=>{S==null?D._vnode&&V(D._vnode,null,null,!0):y(D._vnode||null,S,D,null,null,null,F),D._vnode=S,Et||(Et=!0,Dl(),Hs(),Et=!1)},dn={p:y,um:V,m:se,r:K,mt:ot,mc:L,pc:H,pbc:We,n:kt,o:e};return{render:ta,hydrate:void 0,createApp:Od(ta)}}function pr({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function En({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Yd(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function hi(e,t,n=!1){const o=e.children,a=t.children;if(ke(o)&&ke(a))for(let r=0;r<o.length;r++){const l=o[r];let s=a[r];s.shapeFlag&1&&!s.dynamicChildren&&((s.patchFlag<=0||s.patchFlag===32)&&(s=a[r]=Dn(a[r]),s.el=l.el),!n&&s.patchFlag!==-2&&hi(l,s)),s.type===qa&&(s.el=l.el)}}function Ud(e){const t=e.slice(),n=[0];let o,a,r,l,s;const i=e.length;for(o=0;o<i;o++){const u=e[o];if(u!==0){if(a=n[n.length-1],e[a]<u){t[o]=a,n.push(o);continue}for(r=0,l=n.length-1;r<l;)s=r+l>>1,e[n[s]]<u?r=s+1:l=s;u<e[n[r]]&&(r>0&&(t[o]=n[r-1]),n[r]=o)}}for(r=n.length,l=n[r-1];r-- >0;)n[r]=l,l=t[l];return n}function gi(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:gi(t)}function Ol(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Wd=Symbol.for("v-scx"),Ld=()=>Zn(Wd);function uo(e,t){return La(e,null,t)}function Jd(e,t){return La(e,null,{flush:"sync"})}function lt(e,t,n){return La(e,t,n)}function La(e,t,n=Ee){const{immediate:o,deep:a,flush:r,once:l}=n,s=st({},n),i=t&&o||!t&&r!=="post";let u;if(Io){if(r==="sync"){const p=Ld();u=p.__watcherHandles||(p.__watcherHandles=[])}else if(!i){const p=()=>{};return p.stop=Ht,p.resume=Ht,p.pause=Ht,p}}const c=rt;s.call=(p,C,y)=>sn(p,c,C,y);let v=!1;r==="post"?s.scheduler=p=>{Nt(p,c&&c.suspense)}:r!=="sync"&&(v=!0,s.scheduler=(p,C)=>{C?p():Zr(p)}),s.augmentJob=p=>{t&&(p.flags|=4),v&&(p.flags|=2,c&&(p.id=c.uid,p.i=c))};const g=dd(e,t,s);return Io&&(u?u.push(g):i&&g()),g}function qd(e,t,n){const o=this.proxy,a=Ke(e)?e.includes(".")?yi(o,e):()=>o[e]:e.bind(o,o);let r;xe(t)?r=t:(r=t.handler,n=t);const l=Ho(this),s=La(a,r.bind(o),n);return l(),s}function yi(e,t){const n=t.split(".");return()=>{let o=e;for(let a=0;a<n.length&&o;a++)o=o[n[a]];return o}}function Lt(e,t,n=Ee){const o=Si(),a=Tt(t),r=Mn(t),l=wi(e,a),s=od((i,u)=>{let c,v=Ee,g;return Jd(()=>{const p=e[a];St(c,p)&&(c=p,u())}),{get(){return i(),n.get?n.get(c):c},set(p){const C=n.set?n.set(p):p;if(!St(C,c)&&!(v!==Ee&&St(p,v)))return;const y=o.vnode.props;y&&(t in y||a in y||r in y)&&(`onUpdate:${t}`in y||`onUpdate:${a}`in y||`onUpdate:${r}`in y)||(c=p,u()),o.emit(`update:${t}`,C),St(p,C)&&St(p,v)&&!St(C,g)&&u(),v=p,g=C}}});return s[Symbol.iterator]=()=>{let i=0;return{next(){return i<2?{value:i++?l||Ee:s,done:!1}:{done:!0}}}},s}const wi=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Tt(t)}Modifiers`]||e[`${Mn(t)}Modifiers`];function Hd(e,t,...n){if(e.isUnmounted)return;const o=e.vnode.props||Ee;let a=n;const r=t.startsWith("update:"),l=r&&wi(o,t.slice(7));l&&(l.trim&&(a=n.map(c=>Ke(c)?c.trim():c)),l.number&&(a=n.map(wa)));let s,i=o[s=sr(t)]||o[s=sr(Tt(t))];!i&&r&&(i=o[s=sr(Mn(t))]),i&&sn(i,e,6,a);const u=o[s+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[s])return;e.emitted[s]=!0,sn(u,e,6,a)}}function bi(e,t,n=!1){const o=t.emitsCache,a=o.get(e);if(a!==void 0)return a;const r=e.emits;let l={},s=!1;if(!xe(e)){const i=u=>{const c=bi(u,t,!0);c&&(s=!0,st(l,c))};!n&&t.mixins.length&&t.mixins.forEach(i),e.extends&&i(e.extends),e.mixins&&e.mixins.forEach(i)}return!r&&!s?(Ye(e)&&o.set(e,null),null):(ke(r)?r.forEach(i=>l[i]=null):st(l,r),Ye(e)&&o.set(e,l),l)}function Ja(e,t){return!e||!Fa(t)?!1:(t=t.slice(2).replace(/Once$/,""),Pe(e,t[0].toLowerCase()+t.slice(1))||Pe(e,Mn(t))||Pe(e,t))}function Al(e){const{type:t,vnode:n,proxy:o,withProxy:a,propsOptions:[r],slots:l,attrs:s,emit:i,render:u,renderCache:c,props:v,data:g,setupState:p,ctx:C,inheritAttrs:y}=e,x=_a(e);let O,T;try{if(n.shapeFlag&4){const M=a||o,A=M;O=nn(u.call(A,M,c,v,p,g,C)),T=s}else{const M=t;O=nn(M.length>1?M(v,{attrs:s,slots:l,emit:i}):M(v,null)),T=t.props?s:zd(s)}}catch(M){Mo.length=0,Ya(M,e,1),O=d(Nn)}let Z=O;if(T&&y!==!1){const M=Object.keys(T),{shapeFlag:A}=Z;M.length&&A&7&&(r&&M.some(Yr)&&(T=Kd(T,r)),Z=eo(Z,T,!1,!0))}return n.dirs&&(Z=eo(Z,null,!1,!0),Z.dirs=Z.dirs?Z.dirs.concat(n.dirs):n.dirs),n.transition&&el(Z,n.transition),O=Z,_a(x),O}const zd=e=>{let t;for(const n in e)(n==="class"||n==="style"||Fa(n))&&((t||(t={}))[n]=e[n]);return t},Kd=(e,t)=>{const n={};for(const o in e)(!Yr(o)||!(o.slice(9)in t))&&(n[o]=e[o]);return n};function Gd(e,t,n){const{props:o,children:a,component:r}=e,{props:l,children:s,patchFlag:i}=t,u=r.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&i>=0){if(i&1024)return!0;if(i&16)return o?Tl(o,l,u):!!l;if(i&8){const c=t.dynamicProps;for(let v=0;v<c.length;v++){const g=c[v];if(l[g]!==o[g]&&!Ja(u,g))return!0}}}else return(a||s)&&(!s||!s.$stable)?!0:o===l?!1:o?l?Tl(o,l,u):!0:!!l;return!1}function Tl(e,t,n){const o=Object.keys(t);if(o.length!==Object.keys(e).length)return!0;for(let a=0;a<o.length;a++){const r=o[a];if(t[r]!==e[r]&&!Ja(n,r))return!0}return!1}function Qd({vnode:e,parent:t},n){for(;t;){const o=t.subTree;if(o.suspense&&o.suspense.activeBranch===e&&(o.el=e.el),o===e)(e=t.vnode).el=n,t=t.parent;else break}}const ki=e=>e.__isSuspense;function Xd(e,t){t&&t.pendingBranch?ke(e)?t.effects.push(...e):t.effects.push(e):qs(e)}const U=Symbol.for("v-fgt"),qa=Symbol.for("v-txt"),Nn=Symbol.for("v-cmt"),No=Symbol.for("v-stc"),Mo=[];let Ot=null;function m(e=!1){Mo.push(Ot=e?null:[])}function Zd(){Mo.pop(),Ot=Mo[Mo.length-1]||null}let Po=1;function Fl(e,t=!1){Po+=e,e<0&&Ot&&t&&(Ot.hasOnce=!0)}function Ci(e){return e.dynamicChildren=Po>0?Ot||Hn:null,Zd(),Po>0&&Ot&&Ot.push(e),e}function _(e,t,n,o,a,r){return Ci(h(e,t,n,o,a,r,!0))}function E(e,t,n,o,a){return Ci(d(e,t,n,o,a,!0))}function ol(e){return e?e.__v_isVNode===!0:!1}function go(e,t){return e.type===t.type&&e.key===t.key}const _i=({key:e})=>e??null,pa=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Ke(e)||ce(e)||xe(e)?{i:et,r:e,k:t,f:!!n}:e:null);function h(e,t=null,n=null,o=0,a=null,r=e===U?0:1,l=!1,s=!1){const i={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&_i(t),ref:t&&pa(t),scopeId:Ks,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:o,dynamicProps:a,dynamicChildren:null,appContext:null,ctx:et};return s?(rl(i,n),r&128&&e.normalize(i)):n&&(i.shapeFlag|=Ke(n)?8:16),Po>0&&!l&&Ot&&(i.patchFlag>0||r&6)&&i.patchFlag!==32&&Ot.push(i),i}const d=ec;function ec(e,t=null,n=null,o=0,a=null,r=!1){if((!e||e===ti)&&(e=Nn),ol(e)){const s=eo(e,t,!0);return n&&rl(s,n),Po>0&&!r&&Ot&&(s.shapeFlag&6?Ot[Ot.indexOf(e)]=s:Ot.push(s)),s.patchFlag=-2,s}if(dc(e)&&(e=e.__vccOpts),t){t=tc(t);let{class:s,style:i}=t;s&&!Ke(s)&&(t.class=$t(s)),Ye(i)&&(Qr(i)&&!ke(i)&&(i=st({},i)),t.style=io(i))}const l=Ke(e)?1:ki(e)?128:md(e)?64:Ye(e)?4:xe(e)?2:0;return h(e,t,n,o,a,l,r,!0)}function tc(e){return e?Qr(e)||ui(e)?st({},e):e:null}function eo(e,t,n=!1,o=!1){const{props:a,ref:r,patchFlag:l,children:s,transition:i}=e,u=t?De(a||{},t):a,c={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&_i(u),ref:t&&t.ref?n&&r?ke(r)?r.concat(pa(t)):[r,pa(t)]:pa(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:s,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==U?l===-1?16:l|16:l,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:i,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&eo(e.ssContent),ssFallback:e.ssFallback&&eo(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return i&&o&&el(c,i.clone(c)),c}function k(e=" ",t=0){return d(qa,null,e,t)}function al(e,t){const n=d(No,null,e);return n.staticCount=t,n}function R(e="",t=!1){return t?(m(),E(Nn,null,e)):d(Nn,null,e)}function nn(e){return e==null||typeof e=="boolean"?d(Nn):ke(e)?d(U,null,e.slice()):ol(e)?Dn(e):d(qa,null,String(e))}function Dn(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:eo(e)}function rl(e,t){let n=0;const{shapeFlag:o}=e;if(t==null)t=null;else if(ke(t))n=16;else if(typeof t=="object")if(o&65){const a=t.default;a&&(a._c&&(a._d=!1),rl(e,a()),a._c&&(a._d=!0));return}else{n=32;const a=t._;!a&&!ui(t)?t._ctx=et:a===3&&et&&(et.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else xe(t)?(t={default:t,_ctx:et},n=32):(t=String(t),o&64?(n=16,t=[k(t)]):n=8);e.children=t,e.shapeFlag|=n}function De(...e){const t={};for(let n=0;n<e.length;n++){const o=e[n];for(const a in o)if(a==="class")t.class!==o.class&&(t.class=$t([t.class,o.class]));else if(a==="style")t.style=io([t.style,o.style]);else if(Fa(a)){const r=t[a],l=o[a];l&&r!==l&&!(ke(r)&&r.includes(l))&&(t[a]=r?[].concat(r,l):l)}else a!==""&&(t[a]=o[a])}return t}function Zt(e,t,n,o=null){sn(e,t,7,[n,o])}const nc=li();let oc=0;function ac(e,t,n){const o=e.type,a=(t?t.appContext:e.appContext)||nc,r={uid:oc++,vnode:e,type:o,parent:t,appContext:a,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Mu(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(a.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ci(o,a),emitsOptions:bi(o,a),emit:null,emitted:null,propsDefaults:Ee,inheritAttrs:o.inheritAttrs,ctx:Ee,data:Ee,props:Ee,attrs:Ee,slots:Ee,refs:Ee,setupState:Ee,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=Hd.bind(null,r),e.ce&&e.ce(r),r}let rt=null;const Si=()=>rt||et;let ja,Tr;{const e=Ia(),t=(n,o)=>{let a;return(a=e[n])||(a=e[n]=[]),a.push(o),r=>{a.length>1?a.forEach(l=>l(r)):a[0](r)}};ja=t("__VUE_INSTANCE_SETTERS__",n=>rt=n),Tr=t("__VUE_SSR_SETTERS__",n=>Io=n)}const Ho=e=>{const t=rt;return ja(e),e.scope.on(),()=>{e.scope.off(),ja(t)}},El=()=>{rt&&rt.scope.off(),ja(null)};function xi(e){return e.vnode.shapeFlag&4}let Io=!1;function rc(e,t=!1,n=!1){t&&Tr(t);const{props:o,children:a}=e.vnode,r=xi(e);Ad(e,o,r,t),Pd(e,a,n);const l=r?lc(e,t):void 0;return t&&Tr(!1),l}function lc(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,xd);const{setup:o}=n;if(o){On();const a=e.setupContext=o.length>1?ic(e):null,r=Ho(e),l=Jo(o,e,0,[e.props,a]),s=bs(l);if(An(),r(),(s||e.sp)&&!Qn(e)&&Gs(e),s){if(l.then(El,El),t)return l.then(i=>{Pl(e,i)}).catch(i=>{Ya(i,e,0)});e.asyncDep=l}else Pl(e,l)}else Di(e)}function Pl(e,t,n){xe(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Ye(t)&&(e.setupState=Ws(t)),Di(e)}function Di(e,t,n){const o=e.type;e.render||(e.render=o.render||Ht);{const a=Ho(e);On();try{Dd(e)}finally{An(),a()}}}const sc={get(e,t){return dt(e,"get",""),e[t]}};function ic(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,sc),slots:e.slots,emit:e.emit,expose:t}}function Ha(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Ws(Zu(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in $o)return $o[n](e)},has(t,n){return n in t||n in $o}})):e.proxy}function uc(e,t=!0){return xe(e)?e.displayName||e.name:e.name||t&&e.__name}function dc(e){return xe(e)&&"__vccOpts"in e}const w=(e,t)=>id(e,t,Io),cc="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Fr;const Il=typeof window<"u"&&window.trustedTypes;if(Il)try{Fr=Il.createPolicy("vue",{createHTML:e=>e})}catch{}const Vi=Fr?e=>Fr.createHTML(e):e=>e,fc="http://www.w3.org/2000/svg",pc="http://www.w3.org/1998/Math/MathML",mn=typeof document<"u"?document:null,Rl=mn&&mn.createElement("template"),mc={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,o)=>{const a=t==="svg"?mn.createElementNS(fc,e):t==="mathml"?mn.createElementNS(pc,e):n?mn.createElement(e,{is:n}):mn.createElement(e);return e==="select"&&o&&o.multiple!=null&&a.setAttribute("multiple",o.multiple),a},createText:e=>mn.createTextNode(e),createComment:e=>mn.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>mn.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,o,a,r){const l=n?n.previousSibling:t.lastChild;if(a&&(a===r||a.nextSibling))for(;t.insertBefore(a.cloneNode(!0),n),!(a===r||!(a=a.nextSibling)););else{Rl.innerHTML=Vi(o==="svg"?`<svg>${e}</svg>`:o==="mathml"?`<math>${e}</math>`:e);const s=Rl.content;if(o==="svg"||o==="mathml"){const i=s.firstChild;for(;i.firstChild;)s.appendChild(i.firstChild);s.removeChild(i)}t.insertBefore(s,n)}return[l?l.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},vc=Symbol("_vtc");function hc(e,t,n){const o=e[vc];o&&(t=(t?[t,...o]:[...o]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const Bl=Symbol("_vod"),gc=Symbol("_vsh"),ji=Symbol("");function Tn(e){const t=Si();if(!t)return;const n=t.ut=(a=e(t.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${t.uid}"]`)).forEach(r=>$a(r,a))},o=()=>{const a=e(t.proxy);t.ce?$a(t.ce,a):Er(t.subTree,a),n(a)};Zs(()=>{qs(o)}),bt(()=>{lt(o,Ht,{flush:"post"});const a=new MutationObserver(o);a.observe(t.subTree.el.parentNode,{childList:!0}),Wa(()=>a.disconnect())})}function Er(e,t){if(e.shapeFlag&128){const n=e.suspense;e=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push(()=>{Er(n.activeBranch,t)})}for(;e.component;)e=e.component.subTree;if(e.shapeFlag&1&&e.el)$a(e.el,t);else if(e.type===U)e.children.forEach(n=>Er(n,t));else if(e.type===No){let{el:n,anchor:o}=e;for(;n&&($a(n,t),n!==o);)n=n.nextSibling}}function $a(e,t){if(e.nodeType===1){const n=e.style;let o="";for(const a in t)n.setProperty(`--${a}`,t[a]),o+=`--${a}: ${t[a]};`;n[ji]=o}}const yc=/(^|;)\s*display\s*:/;function wc(e,t,n){const o=e.style,a=Ke(n);let r=!1;if(n&&!a){if(t)if(Ke(t))for(const l of t.split(";")){const s=l.slice(0,l.indexOf(":")).trim();n[s]==null&&ma(o,s,"")}else for(const l in t)n[l]==null&&ma(o,l,"");for(const l in n)l==="display"&&(r=!0),ma(o,l,n[l])}else if(a){if(t!==n){const l=o[ji];l&&(n+=";"+l),o.cssText=n,r=yc.test(n)}}else t&&e.removeAttribute("style");Bl in e&&(e[Bl]=r?o.display:"",e[gc]&&(o.display="none"))}const Yl=/\s*!important$/;function ma(e,t,n){if(ke(n))n.forEach(o=>ma(e,t,o));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const o=bc(e,t);Yl.test(n)?e.setProperty(Mn(o),n.replace(Yl,""),"important"):e[o]=n}}const Ul=["Webkit","Moz","ms"],mr={};function bc(e,t){const n=mr[t];if(n)return n;let o=Tt(t);if(o!=="filter"&&o in e)return mr[t]=o;o=Pa(o);for(let a=0;a<Ul.length;a++){const r=Ul[a]+o;if(r in e)return mr[t]=r}return t}const Wl="http://www.w3.org/1999/xlink";function Ll(e,t,n,o,a,r=$u(t)){o&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(Wl,t.slice(6,t.length)):e.setAttributeNS(Wl,t,n):n==null||r&&!Ss(n)?e.removeAttribute(t):e.setAttribute(t,r?"":Kt(n)?String(n):n)}function Jl(e,t,n,o,a){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?Vi(n):n);return}const r=e.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const s=r==="OPTION"?e.getAttribute("value")||"":e.value,i=n==null?e.type==="checkbox"?"on":"":String(n);(s!==i||!("_value"in e))&&(e.value=i),n==null&&e.removeAttribute(t),e._value=n;return}let l=!1;if(n===""||n==null){const s=typeof e[t];s==="boolean"?n=Ss(n):n==null&&s==="string"?(n="",l=!0):s==="number"&&(n=0,l=!0)}try{e[t]=n}catch{}l&&e.removeAttribute(a||t)}function Vn(e,t,n,o){e.addEventListener(t,n,o)}function kc(e,t,n,o){e.removeEventListener(t,n,o)}const ql=Symbol("_vei");function Cc(e,t,n,o,a=null){const r=e[ql]||(e[ql]={}),l=r[t];if(o&&l)l.value=o;else{const[s,i]=_c(t);if(o){const u=r[t]=Dc(o,a);Vn(e,s,u,i)}else l&&(kc(e,s,l,i),r[t]=void 0)}}const Hl=/(?:Once|Passive|Capture)$/;function _c(e){let t;if(Hl.test(e)){t={};let o;for(;o=e.match(Hl);)e=e.slice(0,e.length-o[0].length),t[o[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Mn(e.slice(2)),t]}let vr=0;const Sc=Promise.resolve(),xc=()=>vr||(Sc.then(()=>vr=0),vr=Date.now());function Dc(e,t){const n=o=>{if(!o._vts)o._vts=Date.now();else if(o._vts<=n.attached)return;sn(Vc(o,n.value),t,5,[o])};return n.value=e,n.attached=xc(),n}function Vc(e,t){if(ke(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(o=>a=>!a._stopped&&o&&o(a))}else return t}const zl=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,jc=(e,t,n,o,a,r)=>{const l=a==="svg";t==="class"?hc(e,o,l):t==="style"?wc(e,n,o):Fa(t)?Yr(t)||Cc(e,t,n,o,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):$c(e,t,o,l))?(Jl(e,t,o),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Ll(e,t,o,l,r,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Ke(o))?Jl(e,Tt(t),o,r,t):(t==="true-value"?e._trueValue=o:t==="false-value"&&(e._falseValue=o),Ll(e,t,o,l))};function $c(e,t,n,o){if(o)return!!(t==="innerHTML"||t==="textContent"||t in e&&zl(t)&&xe(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const a=e.tagName;if(a==="IMG"||a==="VIDEO"||a==="CANVAS"||a==="SOURCE")return!1}return zl(t)&&Ke(n)?!1:t in e}const to=e=>{const t=e.props["onUpdate:modelValue"]||!1;return ke(t)?n=>fa(t,n):t};function Nc(e){e.target.composing=!0}function Kl(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const yn=Symbol("_assign"),zo={created(e,{modifiers:{lazy:t,trim:n,number:o}},a){e[yn]=to(a);const r=o||a.props&&a.props.type==="number";Vn(e,t?"change":"input",l=>{if(l.target.composing)return;let s=e.value;n&&(s=s.trim()),r&&(s=wa(s)),e[yn](s)}),n&&Vn(e,"change",()=>{e.value=e.value.trim()}),t||(Vn(e,"compositionstart",Nc),Vn(e,"compositionend",Kl),Vn(e,"change",Kl))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:o,trim:a,number:r}},l){if(e[yn]=to(l),e.composing)return;const s=(r||e.type==="number")&&!/^0\d/.test(e.value)?wa(e.value):e.value,i=t??"";s!==i&&(document.activeElement===e&&e.type!=="range"&&(o&&t===n||a&&e.value.trim()===i)||(e.value=i))}},Mc={deep:!0,created(e,t,n){e[yn]=to(n),Vn(e,"change",()=>{const o=e._modelValue,a=Ro(e),r=e.checked,l=e[yn];if(ke(o)){const s=Lr(o,a),i=s!==-1;if(r&&!i)l(o.concat(a));else if(!r&&i){const u=[...o];u.splice(s,1),l(u)}}else if(so(o)){const s=new Set(o);r?s.add(a):s.delete(a),l(s)}else l($i(e,r))})},mounted:Gl,beforeUpdate(e,t,n){e[yn]=to(n),Gl(e,t,n)}};function Gl(e,{value:t,oldValue:n},o){e._modelValue=t;let a;if(ke(t))a=Lr(t,o.props.value)>-1;else if(so(t))a=t.has(o.props.value);else{if(t===n)return;a=Lo(t,$i(e,!0))}e.checked!==a&&(e.checked=a)}const Oc={deep:!0,created(e,{value:t,modifiers:{number:n}},o){const a=so(t);Vn(e,"change",()=>{const r=Array.prototype.filter.call(e.options,l=>l.selected).map(l=>n?wa(Ro(l)):Ro(l));e[yn](e.multiple?a?new Set(r):r:r[0]),e._assigning=!0,Mt(()=>{e._assigning=!1})}),e[yn]=to(o)},mounted(e,{value:t}){Ql(e,t)},beforeUpdate(e,t,n){e[yn]=to(n)},updated(e,{value:t}){e._assigning||Ql(e,t)}};function Ql(e,t){const n=e.multiple,o=ke(t);if(!(n&&!o&&!so(t))){for(let a=0,r=e.options.length;a<r;a++){const l=e.options[a],s=Ro(l);if(n)if(o){const i=typeof s;i==="string"||i==="number"?l.selected=t.some(u=>String(u)===String(s)):l.selected=Lr(t,s)>-1}else l.selected=t.has(s);else if(Lo(Ro(l),t)){e.selectedIndex!==a&&(e.selectedIndex=a);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Ro(e){return"_value"in e?e._value:e.value}function $i(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const Ac=["ctrl","shift","alt","meta"],Tc={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Ac.some(n=>e[`${n}Key`]&&!t.includes(n))},Qt=(e,t)=>{const n=e._withMods||(e._withMods={}),o=t.join(".");return n[o]||(n[o]=(a,...r)=>{for(let l=0;l<t.length;l++){const s=Tc[t[l]];if(s&&s(a,t))return}return e(a,...r)})},Fc=st({patchProp:jc},mc);let Xl;function Ec(){return Xl||(Xl=Rd(Fc))}const co=(...e)=>{const t=Ec().createApp(...e),{mount:n}=t;return t.mount=o=>{const a=Ic(o);if(!a)return;const r=t._component;!xe(r)&&!r.render&&!r.template&&(r.template=a.innerHTML),a.nodeType===1&&(a.textContent="");const l=n(a,!1,Pc(a));return a instanceof Element&&(a.removeAttribute("v-cloak"),a.setAttribute("data-v-app","")),l},t};function Pc(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Ic(e){return Ke(e)?document.querySelector(e):e}const Rc={trailing:!0};function Bc(e,t=25,n={}){if(n={...Rc,...n},!Number.isFinite(t))throw new TypeError("Expected `wait` to be a finite number");let o,a,r=[],l,s;const i=(u,c)=>(l=Yc(e,u,c),l.finally(()=>{if(l=null,n.trailing&&s&&!a){const v=i(u,s);return s=null,v}}),l);return function(...u){return l?(n.trailing&&(s=u),l):new Promise(c=>{const v=!a&&n.leading;clearTimeout(a),a=setTimeout(()=>{a=null;const g=n.leading?o:i(this,u);for(const p of r)p(g);r=[]},t),v?(o=i(this,u),c(o)):r.push(c)})}}async function Yc(e,t,n){return await e.apply(t,n)}function Uc(){const e=X.moment.localeData();return{...e._config,ordinal:e._config.ordinal,meridiem:e._config.meridiem,meridiemParse:e._config.meridiemParse,dayOfMonthOrdinalParse:e._config.dayOfMonthOrdinalParse,isPM:e._config.isPM}}const Ln=X.moment.localeData(),hr=new Map([["o",String(Ln._config.dayOfMonthOrdinalParse).replace(String.raw`/\d{1,2}`,"").slice(0,-1)],["M","([1-9]|1[0-2])"],["MM","(0[1-9]|1[0-2])"],["MMM","("+Ln.monthsShort().join("|")+")"],["MMMM","("+Ln.months().join("|")+")"],["Q","[1-4]"],["D","[0-9]{1,2}"],["DD","[0-9]{2}"],["DDD","[1-9]{1,3}"],["DDDD","[1-9]{3}"],["d","[0-6]"],["dd","("+Ln.weekdaysMin().join("|")+")"],["ddd","("+Ln.weekdaysShort().join("|")+")"],["dddd","("+Ln.weekdays().join("|")+")"],["w","[0-9]{1,2}"],["ww","[0-9]{2}"],["W","[0-9]{1,2}"],["WW","[0-9]{2}"],["YY","[0-9]{2}"],["YYYY","[0-9]{4}"]]),Wc=new Set(["o","M","Q","D","d","w","W","Y"]);function Lc(e){const t=[];let n="",o=0,a=!1,r="";for(const l of e)if(a)l==="]"?(t.push(r),a=!1,r=""):r+=l;else if(l==="[")a=!0;else if(Wc.has(l))if(n===l)o++;else{if(o>0){const s=hr.get(n.repeat(o));s&&t.push(s)}o=1,n=l}else{if(o>0){const s=hr.get(n.repeat(o));s&&t.push(s),o=0,n=""}t.push(l)}if(o>0){const l=hr.get(n.repeat(o));l&&t.push(l),o=0,n=""}return new RegExp(t.join(""))}const no="custom-journal-locale",oo={dow:0,doy:0};function Jc(){const e=X.moment.locale(),t=Uc();oo.dow=t.week.dow,oo.doy=t.week.doy,X.moment.locales().includes(no)||(X.moment.defineLocale(no,t),X.moment.locale(e))}function Ni(e,t){return 7+e-t}function Mi(e,t){return 7+e-t}const Na=(e,t,n)=>{const o=X.moment.locale();X.moment.updateLocale(no,{week:{dow:e,doy:t}}),X.moment.locale(o),n&&X.moment.updateLocale(o,{week:{dow:e,doy:t}})},Ma=e=>{const t=X.moment.locale();X.moment.updateLocale(no,{week:oo}),X.moment.locale(t),e&&X.moment.updateLocale(t,{week:oo})};function G(e,t){const n=e?X.moment(e,t):X.moment();return n.locale(no),n}function Oe(){const e=X.moment();return e.locale(no),e.startOf("day")}function ll(e,t,n){const o=typeof t=="string"?G(t):t,a=typeof n=="string"?G(n):n;return o.isSame(a,e)}const qc={day:Hc,week:zc,month:Kc,quarter:Gc,year:Qc};function Hc(e){const t=G(e);return t.calendar(Oe(),{lastWeek:"[Last] dddd",lastDay:"[Yesterday]",sameDay:"[Today]",nextDay:"[Tomorrow]",nextWeek:"dddd",sameElse:function(){return"["+t.from(Oe())+"]"}})}function zc(e){const t=Oe().startOf("week"),n=G(e).startOf("week").diff(t,"week");switch(n){case 0:return"This week";case-1:return"Last week";case 1:return"Next week"}return n<0?`${Math.abs(n)} weeks ago`:`${n} weeks from now`}function Kc(e){const t=Oe().startOf("month"),n=G(e).diff(t,"month");switch(n){case 0:return"This month";case-1:return"Last month";case 1:return"Next month"}return n<0?`${Math.abs(n)} months ago`:`${n} months from now`}function Gc(e){const t=Oe().startOf("quarter"),n=G(e).diff(t,"quarter");switch(n){case 0:return"This quarter";case-1:return"Last quarter";case 1:return"Next quarter"}return n<0?`${Math.abs(n)} quarters ago`:`${n} quarters from now`}function Qc(e){const t=Oe().startOf("year"),n=G(e).diff(t,"year");switch(n){case 0:return"This year";case-1:return"Last year";case 1:return"Next year"}return n<0?`${Math.abs(n)} years ago`:`${n} years from now`}function Oi(e,t){return qc[e](t)}const Ai=[{name:"ISO 8601",description:`Week starts on Monday.
First week of year includes 1st Thursday (Jan 4th)`,used:"EU (exc. Portugal) and most of other European countries, most of Asia and Oceania",dow:1,doy:4},{name:"Western traditional",description:`Week starts on Sunday.
First week of year includes 1st Saturday (Jan 1st)`,used:"Canada, United States, Iceland, Portugal, Japan, Taiwan, Thailand, Hong Kong, Macau, Israel, Egypt, South Africa, the Philippines, and most of Latin America",dow:0,doy:6},{name:"Middle Eastern",description:`Week starts on Saturday.
First week of year includes 1st Friday (Jan 1st)`,used:"Much of the Middle East",dow:6,doy:12}];function Ti(e){let{dow:t,doy:n}=e;t===-1&&(t=X.moment().localeData().firstDayOfWeek(),n=X.moment().localeData().firstDayOfYear());const o=Ai.find(l=>l.dow===t&&l.doy===n);if(o)return o;const a=X.moment().locale("en").localeData().weekdays()[t],r=Mi(t,n);return{name:"custom",description:`Week starts on ${a}.
First week of year includes Jan ${r}`,used:"",dow:t,doy:n}}const Xc={key:0,class:"setting-item-info"},Zc={class:"setting-item-name"},ef={class:"setting-item-description"},tf={key:1,class:"setting-item-control"},N=I({__name:"ObsidianSetting",props:{name:{},description:{},heading:{type:Boolean},controlsOnly:{type:Boolean},noControls:{type:Boolean}},setup(e){return(t,n)=>(m(),_("div",{class:$t(["setting-item",{"setting-item--heading":t.heading}])},[t.controlsOnly?R("",!0):(m(),_("div",Xc,[h("div",Zc,[ze(t.$slots,"name",{},()=>[k(P(t.name??""),1)])]),h("div",ef,[ze(t.$slots,"description",{},()=>[k(P(t.description??""),1)])])])),t.noControls?R("",!0):(m(),_("div",tf,[ze(t.$slots,"default")]))],2))}}),nf=["disabled"],Ve=I({__name:"ObsidianDropdown",props:Ut({disabled:{type:Boolean}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=Lt(e,"modelValue");return(n,o)=>Yn((m(),_("select",{"onUpdate:modelValue":o[0]||(o[0]=a=>t.value=a),class:"dropdown",disabled:n.disabled},[ze(n.$slots,"default")],8,nf)),[[Oc,t.value]])}}),of=["aria-label"],He=I({__name:"ObsidianToggle",props:Ut({disabled:{type:Boolean},tooltip:{}},{modelValue:{type:Boolean},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=Lt(e,"modelValue");return(n,o)=>(m(),_("div",{class:$t(["checkbox-container",{"is-enabled":t.value,"is-disabled":n.disabled}]),"aria-label":n.tooltip,onClick:o[0]||(o[0]=a=>t.value=!t.value)},o[1]||(o[1]=[h("input",{type:"checkbox",tabindex:"0"},null,-1)]),10,of))}}),af=["aria-label"],rf=I({__name:"ObsidianIcon",props:{name:{},tooltip:{}},setup(e){const t=e,n=fe();bt(()=>{lt(()=>t.name,a=>o(a),{immediate:!0})});function o(a){if(n.value?.empty(),!a)return;const r=X.getIcon(a);r&&n.value&&n.value.append(r)}return(a,r)=>(m(),_("span",{ref_key:"element",ref:n,"aria-label":a.tooltip},null,8,af))}}),ge=(e,t)=>{const n=e.__vccOpts||e;for(const[o,a]of t)n[o]=a;return n},un=ge(rf,[["__scopeId","data-v-37c08292"]]),lf=["disabled","type","aria-label"],sf=I({__name:"ObsidianButton",props:{disabled:{type:Boolean},cta:{type:Boolean},warning:{type:Boolean},type:{},tooltip:{},flat:{type:Boolean}},setup(e){return(t,n)=>(m(),_("button",{class:$t({"mod-cta":t.cta,"mod-warning":t.warning,"clickable-icon":t.flat&&!t.cta}),disabled:t.disabled,type:t.type??"button","aria-label":t.tooltip},[ze(t.$slots,"default",{},void 0,!0)],10,lf))}}),ue=ge(sf,[["__scopeId","data-v-ff188d28"]]),uf=I({__name:"ObsidianIconButton",props:{icon:{},tooltip:{}},setup(e){return(t,n)=>(m(),E(ue,{tooltip:t.tooltip,flat:"",class:"icon-button"},{default:f(()=>[d(un,{name:t.icon},null,8,["name"])]),_:1},8,["tooltip"]))}}),be=ge(uf,[["__scopeId","data-v-3dd8502b"]]),fn="journal-calendar",Ce="YYYY-MM-DD",ft="journal",za="journal-date",an="journal-start-date",wn="journal-end-date",Ka="journal-index",Un=Symbol(),Fi=Symbol(),df=1*60*60*1e3,Ei={day:"D",week:"[W]w",month:"MMMM",quarter:"[Q]Q",year:"YYYY",custom:""};class Me extends X.Modal{constructor(t,n,o,a={},r){super(t.app),this.plugin=t,this.title=n,this.component=o,this.componentProps=a,this.customWidth=r,t.register(()=>{this.close()})}_vueApp;onOpen(){this.titleEl.setText(this.title),this.customWidth&&this.modalEl.setCssProps({"--dialog-width":`${this.customWidth}px`}),this._vueApp=co(this.component,{onClose:()=>{this.close()},...this.componentProps}),this._vueApp.provide(Un,this.plugin),this._vueApp.mount(this.contentEl)}onClose(){this._vueApp?.unmount(),this.contentEl.empty()}}const cf=I({__name:"RemoveJournal.modal",emits:["close","remove"],setup(e,{emit:t}){const n=t,o=fe("keep");function a(){n("remove",o.value),n("close")}return(r,l)=>(m(),_(U,null,[d(N,{name:"Journal notes",description:"What to do with notes connected to this journal"},{default:f(()=>[d(Ve,{modelValue:o.value,"onUpdate:modelValue":l[0]||(l[0]=s=>o.value=s)},{default:f(()=>l[2]||(l[2]=[h("option",{value:"keep"},"Keep",-1),h("option",{value:"clear"},"Clear journal data",-1),h("option",{value:"delete"},"Delete",-1)])),_:1},8,["modelValue"])]),_:1}),d(N,null,{default:f(()=>[d(ue,{onClick:l[1]||(l[1]=s=>r.$emit("close"))},{default:f(()=>l[3]||(l[3]=[k("Cancel")])),_:1}),d(ue,{cta:"",onClick:a},{default:f(()=>l[4]||(l[4]=[k("Remove")])),_:1})]),_:1})],64))}});function pe(){const e=Zn(Un);if(!e)throw new Error("Plugin not provided or composable used outside of vue context");return e}const ff={class:"flair"},sl=I({__name:"JournalSettingsList",props:{journals:{}},emits:["edit","bulk-add"],setup(e){const t=pe();function n(o){new Me(t,`Remove ${o} journal`,cf,{onRemove(a){t.removeJournal(o,a).catch(console.error)}}).open()}return(o,a)=>o.journals.length===0?(m(),E(N,{key:0},{description:f(()=>a[0]||(a[0]=[k(" No journals created yet. ")])),_:1})):(m(!0),_(U,{key:1},_e(o.journals,r=>(m(),E(N,{key:r.name},{name:f(()=>[k(P(r.name)+" ",1),h("span",ff,P(r.type),1)]),default:f(()=>[d(be,{icon:"import",tooltip:"Add existing notes to "+r.name,onClick:l=>o.$emit("bulk-add",r.name)},null,8,["tooltip","onClick"]),d(be,{icon:"pencil",tooltip:"Edit "+r.name,onClick:l=>o.$emit("edit",r.name)},null,8,["tooltip","onClick"]),d(be,{icon:"trash-2",tooltip:"Delete "+r.name,onClick:l=>n(r.name)},null,8,["tooltip","onClick"])]),_:2},1024))),128))}}),pf=["placeholder","disabled"],Je=I({__name:"ObsidianTextInput",props:Ut({placeholder:{},disabled:{type:Boolean}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=Lt(e,"modelValue");return(n,o)=>Yn((m(),_("input",{"onUpdate:modelValue":o[0]||(o[0]=a=>t.value=a),type:"text",placeholder:n.placeholder,disabled:n.disabled,spellcheck:"false"},null,8,pf)),[[zo,t.value]])}});/**
  * vee-validate v4.15.0
  * (c) 2024 Abdelrahman Awad
  * @license MIT
  */function Jt(e){return typeof e=="function"}function Pi(e){return e==null}const ao=e=>e!==null&&!!e&&typeof e=="object"&&!Array.isArray(e);function il(e){return Number(e)>=0}function mf(e){return typeof e=="object"&&e!==null}function vf(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}function Zl(e){if(!mf(e)||vf(e)!=="[object Object]")return!1;if(Object.getPrototypeOf(e)===null)return!0;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Bo(e,t){return Object.keys(t).forEach(n=>{if(Zl(t[n])&&Zl(e[n])){e[n]||(e[n]={}),Bo(e[n],t[n]);return}e[n]=t[n]}),e}function la(e){const t=e.split(".");if(!t.length)return"";let n=String(t[0]);for(let o=1;o<t.length;o++){if(il(t[o])){n+=`[${t[o]}]`;continue}n+=`.${t[o]}`}return n}const hf={};function gf(e){return hf[e]}function es(e,t,n){typeof n.value=="object"&&(n.value=Be(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function Be(e){if(typeof e!="object")return e;var t=0,n,o,a,r=Object.prototype.toString.call(e);if(r==="[object Object]"?a=Object.create(e.__proto__||null):r==="[object Array]"?a=Array(e.length):r==="[object Set]"?(a=new Set,e.forEach(function(l){a.add(Be(l))})):r==="[object Map]"?(a=new Map,e.forEach(function(l,s){a.set(Be(s),Be(l))})):r==="[object Date]"?a=new Date(+e):r==="[object RegExp]"?a=new RegExp(e.source,e.flags):r==="[object DataView]"?a=new e.constructor(Be(e.buffer)):r==="[object ArrayBuffer]"?a=e.slice(0):r.slice(-6)==="Array]"&&(a=new e.constructor(e)),a){for(o=Object.getOwnPropertySymbols(e);t<o.length;t++)es(a,o[t],Object.getOwnPropertyDescriptor(e,o[t]));for(t=0,o=Object.getOwnPropertyNames(e);t<o.length;t++)Object.hasOwnProperty.call(a,n=o[t])&&a[n]===e[n]||es(a,n,Object.getOwnPropertyDescriptor(e,n))}return a||e}const yf=Symbol("vee-validate-form"),wf=Symbol("vee-validate-form-context"),bf=typeof window<"u";function kf(e){return Jt(e)&&!!e.__locatorRef}function jn(e){return!!e&&Jt(e.parse)&&e.__type==="VVTypedSchema"}function Ii(e){return!!e&&Jt(e.validate)}function Cf(e){return e==="checkbox"||e==="radio"}function _f(e){return ao(e)||Array.isArray(e)}function Sf(e){return Array.isArray(e)?e.length===0:ao(e)&&Object.keys(e).length===0}function Ko(e){return/^\[.+\]$/i.test(e)}function xf(e){return Ri(e)&&e.multiple}function Ri(e){return e.tagName==="SELECT"}function Df(e){return Bi(e)&&e.target&&"submit"in e.target}function Bi(e){return e?!!(typeof Event<"u"&&Jt(Event)&&e instanceof Event||e&&e.srcElement):!1}function Oo(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,o,a;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(o=n;o--!==0;)if(!Oo(e[o],t[o]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(o of e.entries())if(!t.has(o[0]))return!1;for(o of e.entries())if(!Oo(o[1],t.get(o[0])))return!1;return!0}if(ns(e)&&ns(t))return!(e.size!==t.size||e.name!==t.name||e.lastModified!==t.lastModified||e.type!==t.type);if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(o of e.entries())if(!t.has(o[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(o=n;o--!==0;)if(e[o]!==t[o])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(a=Object.keys(e),n=a.length-ts(e,a),n!==Object.keys(t).length-ts(t,Object.keys(t)))return!1;for(o=n;o--!==0;)if(!Object.prototype.hasOwnProperty.call(t,a[o]))return!1;for(o=n;o--!==0;){var r=a[o];if(!Oo(e[r],t[r]))return!1}return!0}return e!==e&&t!==t}function ts(e,t){let n=0;for(let a=t.length;a--!==0;){var o=t[a];e[o]===void 0&&n++}return n}function ns(e){return bf?e instanceof File:!1}function Ga(e){return Ko(e)?e.replace(/\[|\]/gi,""):e}function gn(e,t,n){return e?Ko(t)?e[Ga(t)]:(t||"").split(/\.|\[(\d+)\]/).filter(Boolean).reduce((a,r)=>_f(a)&&r in a?a[r]:n,e):n}function pn(e,t,n){if(Ko(t)){e[Ga(t)]=n;return}const o=t.split(/\.|\[(\d+)\]/).filter(Boolean);let a=e;for(let r=0;r<o.length;r++){if(r===o.length-1){a[o[r]]=n;return}(!(o[r]in a)||Pi(a[o[r]]))&&(a[o[r]]=il(o[r+1])?[]:{}),a=a[o[r]]}}function gr(e,t){if(Array.isArray(e)&&il(t)){e.splice(Number(t),1);return}ao(e)&&delete e[t]}function os(e,t){if(Ko(t)){delete e[Ga(t)];return}const n=t.split(/\.|\[(\d+)\]/).filter(Boolean);let o=e;for(let r=0;r<n.length;r++){if(r===n.length-1){gr(o,n[r]);break}if(!(n[r]in o)||Pi(o[n[r]]))break;o=o[n[r]]}const a=n.map((r,l)=>gn(e,n.slice(0,l).join(".")));for(let r=a.length-1;r>=0;r--)if(Sf(a[r])){if(r===0){gr(e,n[0]);continue}gr(a[r-1],n[r-1])}}function Rt(e){return Object.keys(e)}function as(e,t=0){let n=null,o=[];return function(...a){return n&&clearTimeout(n),n=setTimeout(()=>{const r=e(...a);o.forEach(l=>l(r)),o=[]},t),new Promise(r=>o.push(r))}}function Vf(e,t){let n;return async function(...a){const r=e(...a);n=r;const l=await r;return r!==n?l:(n=void 0,t(l,a))}}function rs(e){return Array.isArray(e)?e:e?[e]:[]}function sa(e,t){const n={};for(const o in e)t.includes(o)||(n[o]=e[o]);return n}function jf(e){let t=null,n=[];return function(...o){const a=Mt(()=>{if(t!==a)return;const r=e(...o);n.forEach(l=>l(r)),n=[],t=null});return t=a,new Promise(r=>n.push(r))}}function yr(e){if(Yi(e))return e._value}function Yi(e){return"_value"in e}function $f(e){return e.type==="number"||e.type==="range"?Number.isNaN(e.valueAsNumber)?e.value:e.valueAsNumber:e.value}function ls(e){if(!Bi(e))return e;const t=e.target;if(Cf(t.type)&&Yi(t))return yr(t);if(t.type==="file"&&t.files){const n=Array.from(t.files);return t.multiple?n:n[0]}if(xf(t))return Array.from(t.options).filter(n=>n.selected&&!n.disabled).map(yr);if(Ri(t)){const n=Array.from(t.options).find(o=>o.selected);return n?yr(n):t.value}return $f(t)}function Nf(e){const t={};return Object.defineProperty(t,"_$$isNormalized",{value:!0,writable:!1,enumerable:!1,configurable:!1}),e?ao(e)&&e._$$isNormalized?e:ao(e)?Object.keys(e).reduce((n,o)=>{const a=Mf(e[o]);return e[o]!==!1&&(n[o]=ss(a)),n},t):typeof e!="string"?t:e.split("|").reduce((n,o)=>{const a=Of(o);return a.name&&(n[a.name]=ss(a.params)),n},t):t}function Mf(e){return e===!0?[]:Array.isArray(e)||ao(e)?e:[e]}function ss(e){const t=n=>typeof n=="string"&&n[0]==="@"?Af(n.slice(1)):n;return Array.isArray(e)?e.map(t):e instanceof RegExp?[e]:Object.keys(e).reduce((n,o)=>(n[o]=t(e[o]),n),{})}const Of=e=>{let t=[];const n=e.split(":")[0];return e.includes(":")&&(t=e.split(":").slice(1).join(":").split(",")),{name:n,params:t}};function Af(e){const t=n=>{var o;return(o=gn(n,e))!==null&&o!==void 0?o:n[e]};return t.__locatorRef=e,t}const Tf={generateMessage:({field:e})=>`${e} is not valid.`,bails:!0,validateOnBlur:!0,validateOnChange:!0,validateOnInput:!1,validateOnModelUpdate:!0};let Ff=Object.assign({},Tf);const So=()=>Ff;async function Ef(e,t,n={}){const o=n?.bails,a={name:n?.name||"{field}",rules:t,label:n?.label,bails:o??!0,formData:n?.values||{}},r=await Pf(a,e);return Object.assign(Object.assign({},r),{valid:!r.errors.length})}async function Pf(e,t){const n=e.rules;if(jn(n)||Ii(n))return Rf(t,Object.assign(Object.assign({},e),{rules:n}));if(Jt(n)||Array.isArray(n)){const s={field:e.label||e.name,name:e.name,label:e.label,form:e.formData,value:t},i=Array.isArray(n)?n:[n],u=i.length,c=[];for(let v=0;v<u;v++){const g=i[v],p=await g(t,s);if(!(typeof p!="string"&&!Array.isArray(p)&&p)){if(Array.isArray(p))c.push(...p);else{const y=typeof p=="string"?p:Wi(s);c.push(y)}if(e.bails)return{errors:c}}}return{errors:c}}const o=Object.assign(Object.assign({},e),{rules:Nf(n)}),a=[],r=Object.keys(o.rules),l=r.length;for(let s=0;s<l;s++){const i=r[s],u=await Bf(o,t,{name:i,params:o.rules[i]});if(u.error&&(a.push(u.error),e.bails))return{errors:a}}return{errors:a}}function If(e){return!!e&&e.name==="ValidationError"}function Ui(e){return{__type:"VVTypedSchema",async parse(n,o){var a;try{return{output:await e.validate(n,{abortEarly:!1,context:o?.formData||{}}),errors:[]}}catch(r){if(!If(r))throw r;if(!(!((a=r.inner)===null||a===void 0)&&a.length)&&r.errors.length)return{errors:[{path:r.path,errors:r.errors}]};const l=r.inner.reduce((s,i)=>{const u=i.path||"";return s[u]||(s[u]={errors:[],path:u}),s[u].errors.push(...i.errors),s},{});return{errors:Object.values(l)}}}}}async function Rf(e,t){const o=await(jn(t.rules)?t.rules:Ui(t.rules)).parse(e,{formData:t.formData}),a=[];for(const r of o.errors)r.errors.length&&a.push(...r.errors);return{value:o.value,errors:a}}async function Bf(e,t,n){const o=gf(n.name);if(!o)throw new Error(`No such validator '${n.name}' exists.`);const a=Yf(n.params,e.formData),r={field:e.label||e.name,name:e.name,label:e.label,value:t,form:e.formData,rule:Object.assign(Object.assign({},n),{params:a})},l=await o(t,a,r);return typeof l=="string"?{error:l}:{error:l?void 0:Wi(r)}}function Wi(e){const t=So().generateMessage;return t?t(e):"Field is invalid"}function Yf(e,t){const n=o=>kf(o)?o(t):o;return Array.isArray(e)?e.map(n):Object.keys(e).reduce((o,a)=>(o[a]=n(e[a]),o),{})}async function Uf(e,t){const o=await(jn(e)?e:Ui(e)).parse(Be(t),{formData:Be(t)}),a={},r={};for(const l of o.errors){const s=l.errors,i=(l.path||"").replace(/\["(\d+)"\]/g,(u,c)=>`[${c}]`);a[i]={valid:!s.length,errors:s},s.length&&(r[i]=s[0])}return{valid:!o.errors.length,results:a,errors:r,values:o.value,source:"schema"}}async function Wf(e,t,n){const a=Rt(e).map(async u=>{var c,v,g;const p=(c=n?.names)===null||c===void 0?void 0:c[u],C=await Ef(gn(t,u),e[u],{name:p?.name||u,label:p?.label,values:t,bails:(g=(v=n?.bailsMap)===null||v===void 0?void 0:v[u])!==null&&g!==void 0?g:!0});return Object.assign(Object.assign({},C),{path:u})});let r=!0;const l=await Promise.all(a),s={},i={};for(const u of l)s[u.path]={valid:u.valid,errors:u.errors},u.valid||(r=!1,i[u.path]=u.errors[0]);return{valid:r,results:s,errors:i,source:"schema"}}let Lf=0;const ia=["bails","fieldsCount","id","multiple","type","validate"];function Li(e){const t=e?.initialValues||{},n=Object.assign({},je(t)),o=b(e?.validationSchema);return o&&jn(o)&&Jt(o.cast)?Be(o.cast(n)||{}):Be(n)}function Cn(e){var t;const n=Lf++,o=e?.name||"Form";let a=0;const r=fe(!1),l=fe(!1),s=fe(0),i=[],u=bn(Li(e)),c=fe([]),v=fe({}),g=fe({}),p=jf(()=>{g.value=c.value.reduce(($,j)=>($[la(je(j.path))]=j,$),{})});function C($,j){const B=ne($);if(!B){typeof $=="string"&&(v.value[la($)]=rs(j));return}if(typeof $=="string"){const re=la($);v.value[re]&&delete v.value[re]}B.errors=rs(j),B.valid=!B.errors.length}function y($){Rt($).forEach(j=>{C(j,$[j])})}e?.initialErrors&&y(e.initialErrors);const x=w(()=>{const $=c.value.reduce((j,B)=>(B.errors.length&&(j[je(B.path)]=B.errors),j),{});return Object.assign(Object.assign({},v.value),$)}),O=w(()=>Rt(x.value).reduce(($,j)=>{const B=x.value[j];return B?.length&&($[j]=B[0]),$},{})),T=w(()=>c.value.reduce(($,j)=>($[je(j.path)]={name:je(j.path)||"",label:j.label||""},$),{})),Z=w(()=>c.value.reduce(($,j)=>{var B;return $[je(j.path)]=(B=j.bails)!==null&&B!==void 0?B:!0,$},{})),M=Object.assign({},e?.initialErrors||{}),A=(t=e?.keepValuesOnUnmount)!==null&&t!==void 0?t:!1,{initialValues:le,originalInitialValues:ie,setInitialValues:L}=qf(c,u,e),me=Jf(c,u,ie,O),We=w(()=>c.value.reduce(($,j)=>{const B=gn(u,je(j.path));return pn($,je(j.path),B),$},{})),Ae=e?.validationSchema;function nt($,j){var B,re;const de=w(()=>gn(le.value,je($))),we=g.value[je($)],he=j?.type==="checkbox"||j?.type==="radio";if(we&&he){we.multiple=!0;const Pt=a++;return Array.isArray(we.id)?we.id.push(Pt):we.id=[we.id,Pt],we.fieldsCount++,we.__flags.pendingUnmount[Pt]=!1,we}const Le=w(()=>gn(u,je($))),Qe=je($),it=oe.findIndex(Pt=>Pt===Qe);it!==-1&&oe.splice(it,1);const Ue=w(()=>{var Pt,vo,or,ar;const rr=je(Ae);if(jn(rr))return(vo=(Pt=rr.describe)===null||Pt===void 0?void 0:Pt.call(rr,je($)).required)!==null&&vo!==void 0?vo:!1;const lr=je(j?.schema);return jn(lr)&&(ar=(or=lr.describe)===null||or===void 0?void 0:or.call(lr).required)!==null&&ar!==void 0?ar:!1}),ut=a++,Ct=bn({id:ut,path:$,touched:!1,pending:!1,valid:!0,validated:!!(!((B=M[Qe])===null||B===void 0)&&B.length),required:Ue,initialValue:de,errors:Xr([]),bails:(re=j?.bails)!==null&&re!==void 0?re:!1,label:j?.label,type:j?.type||"default",value:Le,multiple:!1,__flags:{pendingUnmount:{[ut]:!1},pendingReset:!1},fieldsCount:1,validate:j?.validate,dirty:w(()=>!Oo(b(Le),b(de)))});return c.value.push(Ct),g.value[Qe]=Ct,p(),O.value[Qe]&&!M[Qe]&&Mt(()=>{z(Qe,{mode:"silent"})}),ce($)&&lt($,Pt=>{p();const vo=Be(Le.value);g.value[Pt]=Ct,Mt(()=>{pn(u,Pt,vo)})}),Ct}const pt=as(ve,5),ot=as(ve,5),qe=Vf(async $=>await($==="silent"?pt():ot()),($,[j])=>{const B=Rt(kt.errorBag.value),de=[...new Set([...Rt($.results),...c.value.map(we=>we.path),...B])].sort().reduce((we,he)=>{var Le;const Qe=he,it=ne(Qe)||H(Qe),Ue=((Le=$.results[Qe])===null||Le===void 0?void 0:Le.errors)||[],ut=je(it?.path)||Qe,Ct=Hf({errors:Ue,valid:!Ue.length},we.results[ut]);return we.results[ut]=Ct,Ct.valid||(we.errors[ut]=Ct.errors[0]),it&&v.value[ut]&&delete v.value[ut],it?(it.valid=Ct.valid,j==="silent"||j==="validated-only"&&!it.validated||C(it,Ct.errors),we):(C(ut,Ue),we)},{valid:$.valid,results:{},errors:{},source:$.source});return $.values&&(de.values=$.values,de.source=$.source),Rt(de.results).forEach(we=>{var he;const Le=ne(we);Le&&j!=="silent"&&(j==="validated-only"&&!Le.validated||C(Le,(he=de.results[we])===null||he===void 0?void 0:he.errors))}),de});function ee($){c.value.forEach($)}function ne($){const j=typeof $=="string"?la($):$;return typeof j=="string"?g.value[j]:j}function H($){return c.value.filter(B=>$.startsWith(je(B.path))).reduce((B,re)=>B?re.path.length>B.path.length?re:B:re,void 0)}let oe=[],$e;function se($){return oe.push($),$e||($e=Mt(()=>{[...oe].sort().reverse().forEach(B=>{os(u,B)}),oe=[],$e=null})),$e}function V($){return function(B,re){return function(we){return we instanceof Event&&(we.preventDefault(),we.stopPropagation()),ee(he=>he.touched=!0),r.value=!0,s.value++,Q().then(he=>{const Le=Be(u);if(he.valid&&typeof B=="function"){const Qe=Be(We.value);let it=$?Qe:Le;return he.values&&(it=he.source==="schema"?he.values:Object.assign({},it,he.values)),B(it,{evt:we,controlledValues:Qe,setErrors:y,setFieldError:C,setTouched:Y,setFieldTouched:S,setValues:dn,setFieldValue:Et,resetForm:te,resetField:W})}!he.valid&&typeof re=="function"&&re({values:Le,evt:we,errors:he.errors,results:he.results})}).then(he=>(r.value=!1,he),he=>{throw r.value=!1,he})}}}const Ge=V(!1);Ge.withControlled=V(!0);function Ft($,j){const B=c.value.findIndex(de=>de.path===$&&(Array.isArray(de.id)?de.id.includes(j):de.id===j)),re=c.value[B];if(!(B===-1||!re)){if(Mt(()=>{z($,{mode:"silent",warn:!1})}),re.multiple&&re.fieldsCount&&re.fieldsCount--,Array.isArray(re.id)){const de=re.id.indexOf(j);de>=0&&re.id.splice(de,1),delete re.__flags.pendingUnmount[j]}(!re.multiple||re.fieldsCount<=0)&&(c.value.splice(B,1),J($),p(),delete g.value[$])}}function Xt($){Rt(g.value).forEach(j=>{j.startsWith($)&&delete g.value[j]}),c.value=c.value.filter(j=>!j.path.startsWith($)),Mt(()=>{p()})}const kt={name:o,formId:n,values:u,controlledValues:We,errorBag:x,errors:O,schema:Ae,submitCount:s,meta:me,isSubmitting:r,isValidating:l,fieldArrays:i,keepValuesOnUnmount:A,validateSchema:b(Ae)?qe:void 0,validate:Q,setFieldError:C,validateField:z,setFieldValue:Et,setValues:dn,setErrors:y,setFieldTouched:S,setTouched:Y,resetForm:te,resetField:W,handleSubmit:Ge,useFieldModel:Ie,defineInputBinds:Te,defineComponentBinds:mt,defineField:Ne,stageInitialValue:ye,unsetInitialValue:J,setFieldInitialValue:ae,createPathState:nt,getPathState:ne,unsetPathValue:se,removePathState:Ft,initialValues:le,getAllPathStates:()=>c.value,destroyPath:Xt,isFieldTouched:D,isFieldDirty:F,isFieldValid:q};function Et($,j,B=!0){const re=Be(j),de=typeof $=="string"?$:$.path;ne(de)||nt(de),pn(u,de,re),B&&z(de)}function ta($,j=!0){Rt(u).forEach(B=>{delete u[B]}),Rt($).forEach(B=>{Et(B,$[B],!1)}),j&&Q()}function dn($,j=!0){Bo(u,$),i.forEach(B=>B&&B.reset()),j&&Q()}function na($,j){const B=ne(je($))||nt($);return w({get(){return B.value},set(re){var de;const we=je($);Et(we,re,(de=je(j))!==null&&de!==void 0?de:!1)}})}function S($,j){const B=ne($);B&&(B.touched=j)}function D($){const j=ne($);return j?j.touched:c.value.filter(B=>B.path.startsWith($)).some(B=>B.touched)}function F($){const j=ne($);return j?j.dirty:c.value.filter(B=>B.path.startsWith($)).some(B=>B.dirty)}function q($){const j=ne($);return j?j.valid:c.value.filter(B=>B.path.startsWith($)).every(B=>B.valid)}function Y($){if(typeof $=="boolean"){ee(j=>{j.touched=$});return}Rt($).forEach(j=>{S(j,!!$[j])})}function W($,j){var B;const re=j&&"value"in j?j.value:gn(le.value,$),de=ne($);de&&(de.__flags.pendingReset=!0),ae($,Be(re),!0),Et($,re,!1),S($,(B=j?.touched)!==null&&B!==void 0?B:!1),C($,j?.errors||[]),Mt(()=>{de&&(de.__flags.pendingReset=!1)})}function te($,j){let B=Be($?.values?$.values:ie.value);B=j?.force?B:Bo(ie.value,B),B=jn(Ae)&&Jt(Ae.cast)?Ae.cast(B):B,L(B,{force:j?.force}),ee(re=>{var de;re.__flags.pendingReset=!0,re.validated=!1,re.touched=((de=$?.touched)===null||de===void 0?void 0:de[je(re.path)])||!1,Et(je(re.path),gn(B,je(re.path)),!1),C(je(re.path),void 0)}),j?.force?ta(B,!1):dn(B,!1),y($?.errors||{}),s.value=$?.submitCount||0,Mt(()=>{Q({mode:"silent"}),ee(re=>{re.__flags.pendingReset=!1})})}async function Q($){const j=$?.mode||"force";if(j==="force"&&ee(he=>he.validated=!0),kt.validateSchema)return kt.validateSchema(j);l.value=!0;const B=await Promise.all(c.value.map(he=>he.validate?he.validate($).then(Le=>({key:je(he.path),valid:Le.valid,errors:Le.errors,value:Le.value})):Promise.resolve({key:je(he.path),valid:!0,errors:[],value:void 0})));l.value=!1;const re={},de={},we={};for(const he of B)re[he.key]={valid:he.valid,errors:he.errors},he.value&&pn(we,he.key,he.value),he.errors.length&&(de[he.key]=he.errors[0]);return{valid:B.every(he=>he.valid),results:re,errors:de,values:we,source:"fields"}}async function z($,j){var B;const re=ne($);if(re&&j?.mode!=="silent"&&(re.validated=!0),Ae){const{results:de}=await qe(j?.mode||"validated-only");return de[$]||{errors:[],valid:!0}}return re?.validate?re.validate(j):(!re&&(B=j?.warn),Promise.resolve({errors:[],valid:!0}))}function J($){os(le.value,$)}function ye($,j,B=!1){ae($,j),pn(u,$,j),B&&!e?.initialValues&&pn(ie.value,$,Be(j))}function ae($,j,B=!1){pn(le.value,$,Be(j)),B&&pn(ie.value,$,Be(j))}async function ve(){const $=b(Ae);if(!$)return{valid:!0,results:{},errors:{},source:"none"};l.value=!0;const j=Ii($)||jn($)?await Uf($,u):await Wf($,u,{names:T.value,bailsMap:Z.value});return l.value=!1,j}const Se=Ge(($,{evt:j})=>{Df(j)&&j.target.submit()});bt(()=>{if(e?.initialErrors&&y(e.initialErrors),e?.initialTouched&&Y(e.initialTouched),e?.validateOnMount){Q();return}kt.validateSchema&&kt.validateSchema("silent")}),ce(Ae)&&lt(Ae,()=>{var $;($=kt.validateSchema)===null||$===void 0||$.call(kt,"validated-only")}),Va(yf,kt);function Ne($,j){const B=Jt(j)?void 0:j?.label,re=ne(je($))||nt($,{label:B}),de=()=>Jt(j)?j(sa(re,ia)):j||{};function we(){var Ue;re.touched=!0,((Ue=de().validateOnBlur)!==null&&Ue!==void 0?Ue:So().validateOnBlur)&&z(je(re.path))}function he(){var Ue;((Ue=de().validateOnInput)!==null&&Ue!==void 0?Ue:So().validateOnInput)&&Mt(()=>{z(je(re.path))})}function Le(){var Ue;((Ue=de().validateOnChange)!==null&&Ue!==void 0?Ue:So().validateOnChange)&&Mt(()=>{z(je(re.path))})}const Qe=w(()=>{const Ue={onChange:Le,onInput:he,onBlur:we};return Jt(j)?Object.assign(Object.assign({},Ue),j(sa(re,ia)).props||{}):j?.props?Object.assign(Object.assign({},Ue),j.props(sa(re,ia))):Ue});return[na($,()=>{var Ue,ut,Ct;return(Ct=(Ue=de().validateOnModelUpdate)!==null&&Ue!==void 0?Ue:(ut=So())===null||ut===void 0?void 0:ut.validateOnModelUpdate)!==null&&Ct!==void 0?Ct:!0}),Qe]}function Ie($){return Array.isArray($)?$.map(j=>na(j,!0)):na($)}function Te($,j){const[B,re]=Ne($,j);function de(){re.value.onBlur()}function we(Le){const Qe=ls(Le);Et(je($),Qe,!1),re.value.onInput()}function he(Le){const Qe=ls(Le);Et(je($),Qe,!1),re.value.onChange()}return w(()=>Object.assign(Object.assign({},re.value),{onBlur:de,onInput:we,onChange:he,value:B.value}))}function mt($,j){const[B,re]=Ne($,j),de=ne(je($));function we(he){B.value=he}return w(()=>{const he=Jt(j)?j(sa(de,ia)):j||{};return Object.assign({[he.model||"modelValue"]:B.value,[`onUpdate:${he.model||"modelValue"}`]:we},re.value)})}const at=Object.assign(Object.assign({},kt),{values:Kr(u),handleReset:()=>te(),submitForm:Se});return Va(wf,at),at}function Jf(e,t,n,o){const a={touched:"some",pending:"some",valid:"every"},r=w(()=>!Oo(t,b(n)));function l(){const i=e.value;return Rt(a).reduce((u,c)=>{const v=a[c];return u[c]=i[v](g=>g[c]),u},{})}const s=bn(l());return uo(()=>{const i=l();s.touched=i.touched,s.valid=i.valid,s.pending=i.pending}),w(()=>Object.assign(Object.assign({initialValues:b(n)},s),{valid:s.valid&&!Rt(o.value).length,dirty:r.value}))}function qf(e,t,n){const o=Li(n),a=fe(o),r=fe(Be(o));function l(s,i){i?.force?(a.value=Be(s),r.value=Be(s)):(a.value=Bo(Be(a.value)||{},Be(s)),r.value=Bo(Be(r.value)||{},Be(s))),i?.updateFields&&e.value.forEach(u=>{if(u.touched)return;const v=gn(a.value,je(u.path));pn(t,je(u.path),Be(v))})}return{initialValues:a,originalInitialValues:r,setInitialValues:l}}function Hf(e,t){return t?{valid:e.valid&&t.valid,errors:[...e.errors,...t.errors]}:e}var wr;function ul(e){return{lang:e?.lang??wr?.lang,message:e?.message,abortEarly:e?.abortEarly??wr?.abortEarly,abortPipeEarly:e?.abortPipeEarly??wr?.abortPipeEarly}}var zf;function Kf(e){return zf?.get(e)}var Gf;function Qf(e){return Gf?.get(e)}var Xf;function Zf(e,t){return Xf?.get(e)?.get(t)}function dl(e){const t=typeof e;return t==="string"?`"${e}"`:t==="number"||t==="bigint"||t==="boolean"?`${e}`:t==="object"||t==="function"?(e&&Object.getPrototypeOf(e)?.constructor?.name)??"null":t}function Wt(e,t,n,o,a){const r=a&&"input"in a?a.input:n.value,l=a?.expected??e.expects??null,s=a?.received??dl(r),i={kind:e.kind,type:e.type,input:r,expected:l,received:s,message:`Invalid ${t}: ${l?`Expected ${l} but r`:"R"}eceived ${s}`,requirement:e.requirement,path:a?.path,issues:a?.issues,lang:o.lang,abortEarly:o.abortEarly,abortPipeEarly:o.abortPipeEarly},u=e.kind==="schema",c=a?.message??e.message??Zf(e.reference,i.lang)??(u?Qf(i.lang):null)??o.message??Kf(i.lang);c!==void 0&&(i.message=typeof c=="function"?c(i):c),u&&(n.typed=!1),n.issues?n.issues.push(i):n.issues=[i]}function _n(e){return{version:1,vendor:"valibot",validate(t){return e["~run"]({value:t},ul())}}}function Ji(e,t){const n=[...new Set(e)];return n.length>1?`(${n.join(` ${t} `)})`:n[0]??"never"}function ep(e){if(e.path){let t="";for(const n of e.path)if(typeof n.key=="string"||typeof n.key=="number")t?t+=`.${n.key}`:t+=n.key;else return null;return t}return null}function fo(e,t){return{kind:"validation",type:"check",reference:fo,async:!1,expects:null,requirement:e,message:t,"~run"(n,o){return n.typed&&!this.requirement(n.value)&&Wt(this,"input",n,o),n}}}function Gt(e){return{kind:"validation",type:"non_empty",reference:Gt,async:!1,expects:"!0",message:e,"~run"(t,n){return t.typed&&t.value.length===0&&Wt(this,"length",t,n,{received:"0"}),t}}}function tp(e,t){if(e.issues)for(const n of t)for(const o of e.issues){let a=!1;const r=Math.min(n.length,o.path?.length??0);for(let l=0;l<r;l++)if(n[l]!==o.path[l].key&&(n[l]!=="$"||o.path[l].type!=="array")){a=!0;break}if(!a)return!1}return!0}function po(e,t,n){return{kind:"validation",type:"partial_check",reference:po,async:!1,expects:null,paths:e,requirement:t,message:n,"~run"(o,a){return(o.typed||tp(o,e))&&!this.requirement(o.value)&&Wt(this,"input",o,a),o}}}function np(e,t,n){return typeof e.fallback=="function"?e.fallback(t,n):e.fallback}function Go(e,t){return{...e,"~run"(n,o){const a=n.issues&&[...n.issues];if(n=e["~run"](n,o),n.issues){for(const r of n.issues)if(!a?.includes(r)){let l=n.value;for(const s of t){const i=l[s],u={type:"unknown",origin:"value",input:l,key:s,value:i};if(r.path?r.path.push(u):r.path=[u],!i)break;l=i}}}return n}}}function cl(e,t,n){return typeof e.default=="function"?e.default(t,n):e.default}function rn(e){return{kind:"schema",type:"boolean",reference:rn,expects:"boolean",async:!1,message:e,get"~standard"(){return _n(this)},"~run"(t,n){return typeof t.value=="boolean"?t.typed=!0:Wt(this,"type",t,n),t}}}function va(e,t){return{kind:"schema",type:"literal",reference:va,expects:dl(e),async:!1,literal:e,message:t,get"~standard"(){return _n(this)},"~run"(n,o){return n.value===this.literal?n.typed=!0:Wt(this,"type",n,o),n}}}function fl(e){return{kind:"schema",type:"number",reference:fl,expects:"number",async:!1,message:e,get"~standard"(){return _n(this)},"~run"(t,n){return typeof t.value=="number"&&!isNaN(t.value)?t.typed=!0:Wt(this,"type",t,n),t}}}function At(e,t){return{kind:"schema",type:"object",reference:At,expects:"Object",async:!1,entries:e,message:t,get"~standard"(){return _n(this)},"~run"(n,o){const a=n.value;if(a&&typeof a=="object"){n.typed=!0,n.value={};for(const r in this.entries){const l=this.entries[r];if(r in a||(l.type==="exact_optional"||l.type==="optional"||l.type==="nullish")&&l.default!==void 0){const s=r in a?a[r]:cl(l),i=l["~run"]({value:s},o);if(i.issues){const u={type:"object",origin:"value",input:a,key:r,value:s};for(const c of i.issues)c.path?c.path.unshift(u):c.path=[u],n.issues?.push(c);if(n.issues||(n.issues=i.issues),o.abortEarly){n.typed=!1;break}}i.typed||(n.typed=!1),n.value[r]=i.value}else if(l.fallback!==void 0)n.value[r]=np(l);else if(l.type!=="exact_optional"&&l.type!=="optional"&&l.type!=="nullish"&&(Wt(this,"key",n,o,{input:void 0,expected:`"${r}"`,path:[{type:"object",origin:"key",input:a,key:r,value:a[r]}]}),o.abortEarly))break}}else Wt(this,"type",n,o);return n}}}function qi(e,t){return{kind:"schema",type:"optional",reference:qi,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,default:t,get"~standard"(){return _n(this)},"~run"(n,o){return n.value===void 0&&(this.default!==void 0&&(n.value=cl(this,n,o)),n.value===void 0)?(n.typed=!0,n):this.wrapped["~run"](n,o)}}}function yt(e,t){return{kind:"schema",type:"picklist",reference:yt,expects:Ji(e.map(dl),"|"),async:!1,options:e,message:t,get"~standard"(){return _n(this)},"~run"(n,o){return this.options.includes(n.value)?n.typed=!0:Wt(this,"type",n,o),n}}}function Xe(e){return{kind:"schema",type:"string",reference:Xe,expects:"string",async:!1,message:e,get"~standard"(){return _n(this)},"~run"(t,n){return typeof t.value=="string"?t.typed=!0:Wt(this,"type",t,n),t}}}function Hi(e,t,n){return{kind:"schema",type:"variant",reference:Hi,expects:"Object",async:!1,key:e,options:t,message:n,get"~standard"(){return _n(this)},"~run"(o,a){const r=o.value;if(r&&typeof r=="object"){let l,s=0,i=this.key,u=[];const c=(v,g)=>{for(const p of v.options){if(p.type==="variant")c(p,new Set(g).add(p.key));else{let C=!0,y=0;for(const x of g){const O=p.entries[x];if(x in r?O["~run"]({typed:!1,value:r[x]},a).issues:O.type!=="exact_optional"&&O.type!=="optional"&&O.type!=="nullish"){C=!1,i!==x&&(s<y||s===y&&x in r&&!(i in r))&&(s=y,i=x,u=[]),i===x&&u.push(p.entries[x].expects);break}y++}if(C){const x=p["~run"]({value:r},a);(!l||!l.typed&&x.typed)&&(l=x)}}if(l&&!l.issues)break}};if(c(this,new Set([this.key])),l)return l;Wt(this,"type",o,a,{input:r[i],expected:Ji(u,"|"),path:[{type:"object",origin:"value",input:r,key:i,value:r[i]}]})}else Wt(this,"type",o,a);return o}}}function wt(...e){return{...e[0],pipe:e,get"~standard"(){return _n(this)},"~run"(t,n){for(const o of e)if(o.kind!=="metadata"){if(t.issues&&(o.kind==="schema"||o.kind==="transformation")){t.typed=!1;break}(!t.issues||!n.abortEarly&&!n.abortPipeEarly)&&(t=o["~run"](t,n))}return t}}}function op(e,t,n){const o=e["~run"]({value:t},ul(n));return{typed:o.typed,success:!o.issues,output:o.value,issues:o.issues}}async function ap(e,t,n){const o=await e["~run"]({value:t},ul(n));return{typed:o.typed,success:!o.issues,output:o.value,issues:o.issues}}/**
  * vee-validate v4.15.0
  * (c) 2024 Abdelrahman Awad
  * @license MIT
  */const Oa=e=>e!==null&&!!e&&typeof e=="object"&&!Array.isArray(e);function zi(e){return Number(e)>=0}function rp(e){return typeof e=="object"&&e!==null}function lp(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}function is(e){if(!rp(e)||lp(e)!=="[object Object]")return!1;if(Object.getPrototypeOf(e)===null)return!0;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Ki(e,t){return Object.keys(t).forEach(n=>{if(is(t[n])&&is(e[n])){e[n]||(e[n]={}),Ki(e[n],t[n]);return}e[n]=t[n]}),e}function sp(e){const t=e.split(".");if(!t.length)return"";let n=String(t[0]);for(let o=1;o<t.length;o++){if(zi(t[o])){n+=`[${t[o]}]`;continue}n+=`.${t[o]}`}return n}function Sn(e,t){return{__type:"VVTypedSchema",async parse(o){const a=await ap(e,o,t);if(a.success)return{value:a.output,errors:[]};const r={};return Gi(a.issues,r),{errors:Object.values(r)}},cast(o){if(e.async)return o;const a=op(e,o,t);if(a.success)return a.output;const r=cl(qi(e));return Oa(r)&&Oa(o)?Ki(r,o):o},describe(o){try{if(!o)return{required:!us(e),exists:!0};const a=ip(o,e);return a?{required:!us(a),exists:!0}:{required:!1,exists:!1}}catch{return{required:!1,exists:!1}}}}}function Gi(e,t){e.forEach(n=>{const o=sp(ep(n)||"");n.issues&&(Gi(n.issues.flatMap(a=>a.issues||[]),t),!o)||(t[o]||(t[o]={errors:[],path:o}),t[o].errors.push(n.message))})}function ip(e,t){if(!ds(t))return null;if(Ko(e))return t.entries[Ga(e)];const n=(e||"").split(/\.|\[(\d+)\]/).filter(Boolean);let o=t;for(let a=0;a<=n.length;a++){const r=n[a];if(!r||!o)return o;if(ds(o)){o=o.entries[r]||null;continue}zi(r)&&up(o)&&(o=o.item)}return null}function us(e){return e.type==="optional"}function up(e){return Oa(e)&&"item"in e}function ds(e){return Oa(e)&&"entries"in e}const dp=["placeholder","disabled","min","max"],cp=I({__name:"ObsidianNumberInput",props:Ut({placeholder:{},disabled:{type:Boolean},min:{},max:{},narrow:{type:Boolean}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=Lt(e,"modelValue");return(n,o)=>Yn((m(),_("input",{"onUpdate:modelValue":o[0]||(o[0]=a=>t.value=a),type:"number",class:$t({"narrow-input":n.narrow}),placeholder:n.placeholder,disabled:n.disabled,min:n.min,max:n.max,spellcheck:"false"},null,10,dp)),[[zo,t.value]])}}),ln=ge(cp,[["__scopeId","data-v-d49aaf69"]]);function Qi(e,t,n){const o=fe([]),a=pe();return uo(()=>{const r=G(e.value);if(!r.isValid())return;a.calendarSettings.dow;const l=Oe(),s=r.clone().startOf("month").startOf("week"),i=r.clone().endOf("month").endOf("week"),u=a.calendarViewSettings.weeks||"left",c=t?.value?G(t.value):null,v=n?.value?G(n.value):null,g=[],p=s.clone();for(;p.isSameOrBefore(i);)u==="left"&&p.isSame(p.clone().startOf("week"),"day")&&g.push({date:p.format("[W]w"),key:p.format(Ce),outside:!1,isWeekNumber:!0,disabled:!!c&&p.clone().endOf("week").isBefore(c,"day")||!!v&&p.clone().startOf("week").isAfter(v,"day")}),g.push({date:p.format("D"),key:p.format(Ce),today:p.isSame(l,"day"),outside:!r.isSame(p,"month"),isWeekNumber:!1,disabled:!!c&&p.isBefore(c,"day")||!!v&&p.isAfter(v,"day")}),u==="right"&&p.isSame(p.clone().endOf("week"),"day")&&g.push({date:p.clone().startOf("week").format("[W]w"),key:p.clone().startOf("week").format(Ce),outside:!1,isWeekNumber:!0,disabled:!!c&&p.clone().endOf("week").isBefore(c,"day")||!!v&&p.clone().startOf("week").isAfter(v,"day")}),p.add(1,"day");o.value=g}),{grid:o}}const ro=I({__name:"FormattedDate",props:{date:{},format:{}},setup(e){const t=w(()=>typeof e.date=="string"?G(e.date):e.date);return(n,o)=>(m(),_("span",null,P(t.value.format(n.format)),1))}}),cs=Hi("type",[At({type:va("transparent")}),At({type:va("theme"),name:Xe()}),At({type:va("custom"),color:Xe()})]);function Vt(e){switch(e.type){case"transparent":return"transparent";case"theme":return`var(--${e.name})`;case"custom":return e.color}}const fp={class:"calendar"},pp={class:"calendar-header"},mp={class:"calendar-grid"},vp=I({__name:"CalendarGrid",props:{columns:{},compactFirstLine:{type:Boolean}},setup(e){Tn(s=>({"01aca16e":s.columns,"526e3e82":l.value,"7ba77d1e":n.value,"635b4840":o.value,"1f290d0e":a.value,baf56b3a:r.value}));const t=pe(),n=w(()=>Vt(t.calendarViewSettings.todayStyle.color)),o=w(()=>Vt(t.calendarViewSettings.todayStyle.background)),a=w(()=>Vt(t.calendarViewSettings.activeStyle.color)),r=w(()=>Vt(t.calendarViewSettings.activeStyle.background)),l=w(()=>e.compactFirstLine?"1.2em repeat(auto-fill, 28px)":"repeat(auto-fill, 28px)");return(s,i)=>(m(),_("div",fp,[h("div",pp,[ze(s.$slots,"header",{},void 0,!0)]),h("div",mp,[ze(s.$slots,"default",{},void 0,!0)])]))}}),mo=ge(vp,[["__scopeId","data-v-063a3437"]]),hp=["disabled"],gp=I({__name:"CalendarButton",props:{disabled:{type:Boolean},clickable:{type:Boolean}},setup(e){return(t,n)=>(m(),_("button",{disabled:t.disabled,class:$t({clickable:t.clickable})},[ze(t.$slots,"default",{},void 0,!0)],10,hp))}}),Qo=ge(gp,[["__scopeId","data-v-8cc1c4aa"]]);function yp(){const e=fe([]),t=pe();return lt(()=>t.calendarSettings.dow,()=>{const n=Oe().startOf("week"),o=n.clone().endOf("week"),a=[];for(;n.isSameOrBefore(o);)a.push(n.format("ddd")),n.add(1,"day");e.value=a},{immediate:!0}),e}const wp={key:0},bp={key:1},kp=I({__name:"CalendarWeekdays",setup(e){const t=pe(),n=yp();return(o,a)=>(m(),_(U,null,[b(t).calendarViewSettings.weeks==="left"?(m(),_("div",wp)):R("",!0),(m(!0),_(U,null,_e(b(n),r=>(m(),_("div",{key:r,class:"week-day"},[h("span",null,P(r),1)]))),128)),b(t).calendarViewSettings.weeks==="right"?(m(),_("div",bp)):R("",!0)],64))}}),pl=ge(kp,[["__scopeId","data-v-aa55b3de"]]),Cp=I({__name:"CalendarMonthView",props:{refDate:{},selectedDate:{},min:{},max:{}},emits:["select"],setup(e){const t=pe(),n=w(()=>t.calendarViewSettings.weeks==="none"?7:8),{grid:o}=Qi(w(()=>e.refDate),w(()=>e.min),w(()=>e.max));return(a,r)=>(m(),E(mo,{columns:n.value,"compact-first-line":""},{header:f(()=>[ze(a.$slots,"header",{},()=>[d(ro,{date:a.refDate,format:"MMMM YYYY"},null,8,["date"])])]),default:f(()=>[d(pl),(m(!0),_(U,null,_e(b(o),l=>(m(),E(Qo,{key:l.key+(l.isWeekNumber?"week":"day"),clickable:!l.disabled,disabled:l.disabled,"data-outside":l.outside||null,"data-today":l.today||null,"data-selected":a.selectedDate===l.key||null,onClick:s=>a.$emit("select",l.key,s)},{default:f(()=>[k(P(l.date),1)]),_:2},1032,["clickable","disabled","data-outside","data-today","data-selected","onClick"]))),128))]),_:3},8,["columns"]))}});function _p(e,t,n){const o=fe([]),a=pe(),r=w(()=>G(e.value));return uo(()=>{if(!r.value.isValid())return;a.calendarSettings.dow;const l=[],s=t?.value?G(t.value):null,i=n?.value?G(n.value):null;for(let u=0;u<4;u++){const c=r.value.clone().quarter(u);l.push({date:c.format(Ei.quarter),key:c.format(Ce),disabled:!!s&&c.clone().endOf("quarter").isBefore(s)||!!i&&c.isAfter(i)})}o.value=l}),{grid:o}}const Sp={class:"calendar-quarter-grid"},xp=I({__name:"CalendarQuarterView",props:{refDate:{},min:{},max:{}},emits:["select"],setup(e){const{grid:t}=_p(w(()=>e.refDate),w(()=>e.min),w(()=>e.max));return(n,o)=>(m(),E(mo,{columns:2},{header:f(()=>[ze(n.$slots,"header",{},()=>[d(ro,{date:n.refDate,format:"YYYY"},null,8,["date"])])]),default:f(()=>[h("div",Sp,[(m(!0),_(U,null,_e(b(t),a=>(m(),E(Qo,{key:a.key,clickable:"","data-selected":b(ll)("quarter",a.date,n.refDate)||null,onClick:r=>n.$emit("select",a.key)},{default:f(()=>[k(P(a.date),1)]),_:2},1032,["data-selected","onClick"]))),128))])]),_:3}))}});function Dp(e,t,n){const o=fe([]),a=pe();return uo(()=>{const r=G(e.value);if(!r.isValid())return;a.calendarSettings.dow;const l=r.clone().startOf("year"),s=r.clone().endOf("year"),i=t?.value?G(t.value):void 0,u=n?.value?G(n.value):void 0,c=[],v=l.clone();for(;v.isSameOrBefore(s);)c.push({date:v.format("MMMM"),key:v.format(Ce),disabled:!!i&&v.clone().endOf("year").isBefore(i)||!!u&&v.clone().startOf("year").isAfter(u)}),v.add(1,"month");o.value=c}),{grid:o}}const Vp=I({__name:"CalendarYearView",props:{refDate:{},min:{},max:{}},emits:["select"],setup(e){const{grid:t}=Dp(w(()=>e.refDate),w(()=>e.min),w(()=>e.max));return(n,o)=>(m(),E(mo,{columns:3},{header:f(()=>[ze(n.$slots,"header",{},()=>[d(ro,{date:n.refDate,format:"YYYY"},null,8,["date"])])]),default:f(()=>[(m(!0),_(U,null,_e(b(t),a=>(m(),E(Qo,{key:a.key,clickable:"","data-selected":b(ll)("month",a.date,n.refDate)||null,onClick:r=>n.$emit("select",a.key)},{default:f(()=>[k(P(a.date),1)]),_:2},1032,["data-selected","onClick"]))),128))]),_:3}))}});function jp(e,t,n){const o=fe([]),a=w(()=>G(e.value)),r=w(()=>a.value.year()-a.value.year()%10),l=w(()=>r.value+9);return uo(()=>{if(!a.value.isValid())return;const s=[];for(let i=r.value-1;i<=l.value+1;i++){const u=a.value.clone().year(i);s.push({date:u.format("YYYY"),key:u.format(Ce),outside:i<r.value||i>l.value,disabled:!1})}o.value=s}),{grid:o,startYear:r,endYear:l}}const $p=I({__name:"CalendarDecadeView",props:{refDate:{},min:{},max:{}},emits:["select"],setup(e){const{grid:t,startYear:n,endYear:o}=jp(w(()=>e.refDate));return(a,r)=>(m(),E(mo,{columns:4},{header:f(()=>[ze(a.$slots,"header",{startYear:b(n),endYear:b(o)},()=>[h("div",null,P(b(n))+" - "+P(b(o)),1)])]),default:f(()=>[(m(!0),_(U,null,_e(b(t),l=>(m(),E(Qo,{key:l.key,clickable:"","data-selected":b(ll)("year",l.date,a.refDate)||null,"data-outside":l.outside||null,onClick:s=>a.$emit("select",l.key)},{default:f(()=>[k(P(l.date),1)]),_:2},1032,["data-selected","data-outside","onClick"]))),128))]),_:3}))}}),Xi=I({__name:"DatePicker.modal",props:{selectedDate:{},picking:{},min:{},max:{}},emits:["select","close"],setup(e,{emit:t}){const n=e,o=t,a=fe("month");switch(n.picking){case"day":{a.value="month";break}case"week":{a.value="month";break}case"month":{a.value="month";break}case"quarter":{a.value="quarter";break}case"year":{a.value="decade";break}}const r=fe(n.selectedDate??Oe().format("YYYY-MM-DD")),l=w(()=>G(r.value).startOf("month"));function s(y="month"){r.value=y==="decade"?l.value.subtract(10,"year").format("YYYY-MM-DD"):l.value.subtract(1,y).format("YYYY-MM-DD")}function i(y="month"){if(!n.min)return!0;const x=G(n.min);return y==="decade"?l.value.clone().subtract(10,"year").isAfter(x,"year"):l.value.clone().subtract(1,y).endOf(y).isAfter(x)}function u(y="month"){r.value=y==="decade"?l.value.add(10,"year").format("YYYY-MM-DD"):l.value.add(1,y).format("YYYY-MM-DD")}function c(y="month"){if(!n.max)return!0;const x=G(n.max);return y==="decade"?l.value.clone().add(10,"year").isBefore(x,"year"):l.value.clone().add(1,y).startOf(y).isBefore(x)}function v(y){n.picking==="week"?o("select",G(r.value).startOf("week").format("YYYY-MM-DD")):o("select",y),o("close")}function g(y){n.picking==="month"?(o("select",y),o("close")):(r.value=y,a.value="month")}function p(y){n.picking==="quarter"?(o("select",y),o("close")):(r.value=y,a.value="month")}function C(y){n.picking==="year"?(o("select",y),o("close")):(r.value=y,a.value=n.picking==="quarter"?"quarter":"year")}return(y,x)=>a.value==="decade"?(m(),E($p,{key:0,"ref-date":r.value,min:y.min,max:y.max,onSelect:C},{header:f(({startYear:O,endYear:T})=>[d(be,{icon:"arrow-left",tooltip:"Previous decade",onClick:x[0]||(x[0]=Z=>s("decade"))}),k(" "+P(O)+" - "+P(T)+" ",1),d(be,{icon:"arrow-right",tooltip:"Next decade",onClick:x[1]||(x[1]=Z=>u("decade"))})]),_:1},8,["ref-date","min","max"])):a.value==="year"?(m(),E(Vp,{key:1,"ref-date":r.value,min:y.min,max:y.max,onSelect:g},{header:f(()=>[i("year")?(m(),E(be,{key:0,icon:"arrow-left",tooltip:"Previous year",onClick:x[2]||(x[2]=O=>s("year"))})):R("",!0),d(ue,{onClick:x[3]||(x[3]=O=>a.value="decade")},{default:f(()=>[k(P(l.value.format("YYYY")),1)]),_:1}),c("year")?(m(),E(be,{key:1,icon:"arrow-right",tooltip:"Next year",onClick:x[4]||(x[4]=O=>u("year"))})):R("",!0)]),_:1},8,["ref-date","min","max"])):a.value==="quarter"?(m(),E(xp,{key:2,"ref-date":r.value,min:y.min,max:y.max,onSelect:p},{header:f(()=>[i("quarter")?(m(),E(be,{key:0,icon:"arrow-left",tooltip:"Previous quarter",onClick:x[5]||(x[5]=O=>s("quarter"))})):R("",!0),d(ue,{onClick:x[6]||(x[6]=O=>a.value="year")},{default:f(()=>[d(ro,{date:r.value,format:"YYYY"},null,8,["date"])]),_:1}),c("quarter")?(m(),E(be,{key:1,icon:"arrow-right",tooltip:"Next quarter",onClick:x[7]||(x[7]=O=>u("quarter"))})):R("",!0)]),_:1},8,["ref-date","min","max"])):(m(),E(Cp,{key:3,"ref-date":r.value,"selected-date":y.selectedDate,min:y.min,max:y.max,onSelect:v},{header:f(()=>[i("month")?(m(),E(be,{key:0,icon:"arrow-left",tooltip:"Previous month",onClick:x[8]||(x[8]=O=>s("month"))})):R("",!0),d(ue,{onClick:x[9]||(x[9]=O=>a.value="year")},{default:f(()=>[d(ro,{date:r.value,format:"MMMM YYYY"},null,8,["date"])]),_:1}),c("month")?(m(),E(be,{key:1,icon:"arrow-right",tooltip:"Next month",onClick:x[10]||(x[10]=O=>u("month"))})):R("",!0)]),_:1},8,["ref-date","selected-date","min","max"]))}}),Np=I({__name:"DatePicker",props:Ut({picking:{default:"day"},placeholder:{default:"Pick a date"},previewFormat:{default:"YYYY-MM-DD"},disabled:{type:Boolean},tooltip:{default:"Pick a date"},min:{default:""},max:{default:""}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=e,n=pe(),o=Lt(e,"modelValue"),a=w(()=>o.value?G(o.value):null),r=w(()=>a.value?a.value.format(t.previewFormat):t.placeholder);function l(){new Me(n,"Pick a date",Xi,{selectedDate:o.value,picking:t.picking,min:t.min,max:t.max,onSelect(s){o.value=s}},400).open()}return(s,i)=>(m(),E(ue,{class:"date-picker",disabled:s.disabled,tooltip:s.tooltip,onClick:l},{default:f(()=>[d(un,{name:"calendar"}),i[0]||(i[0]=k()),h("span",null,P(r.value),1)]),_:1},8,["disabled","tooltip"]))}}),Ao=ge(Np,[["__scopeId","data-v-a9348bd1"]]),Mp={key:0,class:"journal-errors"},Op=I({__name:"FormErrors",props:{errors:{}},setup(e){return(t,n)=>t.errors?(m(),_("ul",Mp,[(m(!0),_(U,null,_e(t.errors,o=>(m(),_("li",{key:o},P(o),1))),128))])):R("",!0)}}),tt=ge(Op,[["__scopeId","data-v-c3a13f6e"]]);const ml=I({__name:"CreateJournal.modal",emits:["create","close"],setup(e,{emit:t}){const n=t,o=pe();function a(Z){return!o.hasJournal(Z)}const{defineField:r,errorBag:l,handleSubmit:s}=Cn({initialValues:{journalName:"",write:"day",every:"day",duration:1,anchorDate:""},validationSchema:Sn(wt(At({journalName:wt(Xe(),Gt("Journal name is required"),fo(a,"Journal name should be unique")),write:yt(["day","week","month","quarter","year","custom"]),every:yt(["day","week","month","quarter","year"]),duration:fl(),anchorDate:Xe()}),Go(po([["write"],["anchorDate"]],Z=>Z.write==="custom"?!!Z.anchorDate:!0,"Please select an anchor date."),["anchorDate"])))}),[i,u]=r("journalName"),[c,v]=r("write"),[g,p]=r("every"),[C,y]=r("duration"),[x,O]=r("anchorDate"),T=s(Z=>{n("create",Z.journalName,Z.write==="custom"?{type:"custom",every:Z.every,duration:Z.duration,anchorDate:Z.anchorDate}:{type:Z.write}),n("close")});return(Z,M)=>(m(),_("form",{onSubmit:M[6]||(M[6]=Qt((...A)=>b(T)&&b(T)(...A),["prevent"]))},[d(N,{name:"Journal name"},{description:f(()=>[d(tt,{errors:b(l).journalName},null,8,["errors"])]),default:f(()=>[d(Je,De({modelValue:b(i),"onUpdate:modelValue":M[0]||(M[0]=A=>ce(i)?i.value=A:null),placeholder:"ex. Work"},b(u)),null,16,["modelValue"])]),_:1}),d(N,{name:"I'll be writing"},{default:f(()=>[d(Ve,De({modelValue:b(c),"onUpdate:modelValue":M[1]||(M[1]=A=>ce(c)?c.value=A:null)},b(v)),{default:f(()=>M[7]||(M[7]=[h("option",{value:"day"},"Daily",-1),h("option",{value:"week"},"Weekly",-1),h("option",{value:"month"},"Monthly",-1),h("option",{value:"quarter"},"Quarterly",-1),h("option",{value:"year"},"Annually",-1),h("option",{value:"custom"},"In custom intervals",-1)])),_:1},16,["modelValue"])]),_:1}),b(c)==="custom"?(m(),E(N,{key:0,name:"Every"},{default:f(()=>[d(ln,De({modelValue:b(C),"onUpdate:modelValue":M[2]||(M[2]=A=>ce(C)?C.value=A:null)},b(y),{min:1}),null,16,["modelValue"]),d(Ve,De({modelValue:b(g),"onUpdate:modelValue":M[3]||(M[3]=A=>ce(g)?g.value=A:null)},b(p)),{default:f(()=>M[8]||(M[8]=[h("option",{value:"day"},"days",-1),h("option",{value:"week"},"weeks",-1),h("option",{value:"month"},"months",-1),h("option",{value:"quarter"},"quarters",-1),h("option",{value:"year"},"years",-1)])),_:1},16,["modelValue"])]),_:1})):R("",!0),b(c)==="custom"?(m(),E(N,{key:1,name:"Start date"},{description:f(()=>[M[9]||(M[9]=k(" This date will be used to start counting intervals. It cannot be changed after creating journal. ")),d(tt,{errors:b(l).anchorDate},null,8,["errors"])]),default:f(()=>[d(Ao,De({modelValue:b(x),"onUpdate:modelValue":M[4]||(M[4]=A=>ce(x)?x.value=A:null)},b(O)),null,16,["modelValue"])]),_:1})):R("",!0),d(N,null,{default:f(()=>[d(ue,{onClick:M[5]||(M[5]=A=>n("close"))},{default:f(()=>M[10]||(M[10]=[k("Close")])),_:1}),d(ue,{cta:"",type:"submit",onClick:b(T)},{default:f(()=>M[11]||(M[11]=[k("Add")])),_:1},8,["onClick"])]),_:1})],32))}}),Ap=["data-open"],Tp={class:"collapsible-trigger-text"},Fp=I({__name:"CollapsibleBlock",props:Ut({defaultExpanded:{type:Boolean}},{expanded:{type:Boolean},expandedModifiers:{}}),emits:["update:expanded"],setup(e){const t=Lt(e,"expanded");e.defaultExpanded&&(t.value=!0);const o=w(()=>t.value?"chevron-down":"chevron-right");function a(){t.value=!t.value}return(r,l)=>(m(),_("div",{class:"collapsible-root","data-open":t.value||null},[h("div",{class:"collapsible-trigger",onClick:a},[d(un,{name:o.value},null,8,["name"]),h("span",Tp,[ze(r.$slots,"trigger",{},void 0,!0)]),h("span",{class:"collapsible-trigger-controls",onClick:l[0]||(l[0]=Qt(()=>{},["stop"]))},[ze(r.$slots,"controls",{},void 0,!0)])]),t.value?ze(r.$slots,"default",{key:0},void 0,!0):R("",!0)],8,Ap))}}),xt=ge(Fp,[["__scopeId","data-v-d5749829"]]),Ep={class:"iconed-row"},Pp=I({__name:"IconedRow",props:{icon:{}},setup(e){return(t,n)=>(m(),_("div",Ep,[d(un,{name:t.icon},null,8,["name"]),h("div",null,[ze(t.$slots,"default",{},void 0,!0)])]))}}),Dt=ge(Pp,[["__scopeId","data-v-faf0e4b0"]]),Ip={class:"flair"},Rp=I({__name:"JournalSettingsWithoutShelves",emits:["edit","bulk-add"],setup(e,{emit:t}){const n=t,o=pe(),a=w(()=>o.journals);function r(){new Me(o,"Add Journal",ml,{onCreate(l,s){o.createJournal(l,s),n("edit",l)}}).open()}return(l,s)=>(m(),E(xt,{"default-expanded":a.value.length>0},{trigger:f(()=>[d(Dt,{icon:"book-open"},{default:f(()=>[s[2]||(s[2]=k(" Journals ")),h("span",Ip,P(a.value.length),1)]),_:1})]),controls:f(()=>[d(be,{icon:"plus",cta:"",tooltip:"Create new journal",onClick:r})]),default:f(()=>[d(sl,{journals:a.value,onEdit:s[0]||(s[0]=i=>l.$emit("edit",i)),onBulkAdd:s[1]||(s[1]=i=>l.$emit("bulk-add",i))},null,8,["journals"])]),_:1},8,["default-expanded"]))}}),Bp=I({__name:"CreateShelf.modal",emits:["create","close"],setup(e,{emit:t}){const n=t,o=pe();function a(v){return!o.hasShelf(v)}const{defineField:r,errorBag:l,handleSubmit:s}=Cn({initialValues:{name:""},validationSchema:Sn(At({name:wt(Xe(),Gt("Shelf name is required"),fo(a,"Shelf name should be unique"))}))}),[i,u]=r("name"),c=s(v=>{n("create",v.name),n("close")});return(v,g)=>(m(),_("form",{onSubmit:g[2]||(g[2]=Qt((...p)=>b(c)&&b(c)(...p),["prevent"]))},[d(N,{name:"Shelf name"},{description:f(()=>[d(tt,{errors:b(l).name},null,8,["errors"])]),default:f(()=>[d(Je,De({modelValue:b(i),"onUpdate:modelValue":g[0]||(g[0]=p=>ce(i)?i.value=p:null),placeholder:"ex. Work"},b(u)),null,16,["modelValue"])]),_:1}),d(N,null,{default:f(()=>[d(ue,{onClick:g[1]||(g[1]=p=>n("close"))},{default:f(()=>g[3]||(g[3]=[k("Close")])),_:1}),d(ue,{cta:"",type:"submit",onClick:b(c)},{default:f(()=>g[4]||(g[4]=[k("Add")])),_:1},8,["onClick"])]),_:1})],32))}}),Yp=["value"],Up={key:1},Wp=I({__name:"RemoveShelf.modal",props:{shelfName:{}},emits:["close","remove"],setup(e,{emit:t}){const n=t,o=pe(),a=fe(""),r=w(()=>Object.values(o.shelves).filter(s=>s.name!==e.shelfName));function l(){n("remove",a.value),n("close")}return(s,i)=>(m(),_(U,null,[r.value.length>0?(m(),E(N,{key:0,name:"Move journals to"},{default:f(()=>[d(Ve,{modelValue:a.value,"onUpdate:modelValue":i[0]||(i[0]=u=>a.value=u)},{default:f(()=>[i[2]||(i[2]=h("option",{value:""},"None",-1)),(m(!0),_(U,null,_e(r.value,u=>(m(),_("option",{key:u.name,value:u.name},P(u.name),9,Yp))),128))]),_:1},8,["modelValue"])]),_:1})):(m(),_("p",Up,"Journals will be moved out")),d(N,null,{default:f(()=>[d(ue,{onClick:i[1]||(i[1]=u=>s.$emit("close"))},{default:f(()=>i[3]||(i[3]=[k("Cancel")])),_:1}),d(ue,{cta:"",onClick:l},{default:f(()=>i[4]||(i[4]=[k("Remove")])),_:1})]),_:1})],64))}}),Lp={class:"flair"},Jp={class:"flair"},qp=I({__name:"JournalSettingsWithShelves",emits:["organize","edit","bulk-add"],setup(e,{emit:t}){const n=t,o=pe(),a=w(()=>o.journals.filter(i=>!i.isOnShelf));function r(){new Me(o,"Add Journal Shelf",Bp,{onCreate(i){o.createShelf(i),n("organize",i)}}).open()}function l(i){new Me(o,`Remove ${i} shelf`,Wp,{shelfName:i,onRemove(u){o.removeShelf(i,u)}}).open()}function s(){new Me(o,"Add Journal",ml,{onCreate(i,u){o.createJournal(i,u),n("edit",i)}}).open()}return(i,u)=>(m(),_(U,null,[d(xt,{"default-expanded":b(o).shelves.length>0},{trigger:f(()=>[d(Dt,{icon:"library"},{default:f(()=>[u[2]||(u[2]=k(" Journal shelves ")),h("span",Lp,P(b(o).shelves.length),1)]),_:1})]),controls:f(()=>[d(be,{icon:"plus",cta:"",tooltip:"Create new shelf",onClick:r})]),default:f(()=>[b(o).shelves.length===0?(m(),E(N,{key:0},{description:f(()=>u[3]||(u[3]=[k(" No shelves configured yet. ")])),_:1})):(m(!0),_(U,{key:1},_e(b(o).shelves,c=>(m(),E(N,{key:c.name},{name:f(()=>[h("b",null,P(c.name),1),u[4]||(u[4]=h("br",null,null,-1)),k(" "+P(c.journals.length)+" journals ",1)]),default:f(()=>[d(be,{icon:"library",tooltip:"Organize "+c.name,onClick:v=>i.$emit("organize",c.name)},null,8,["tooltip","onClick"]),d(be,{icon:"trash-2",tooltip:"Delete "+c.name,onClick:v=>l(c.name)},null,8,["tooltip","onClick"])]),_:2},1024))),128))]),_:1},8,["default-expanded"]),d(xt,{"default-expanded":a.value.length>0},{trigger:f(()=>[d(Dt,{icon:"book-open"},{default:f(()=>[u[5]||(u[5]=k(" Journals not on shelf ")),h("span",Jp,P(a.value.length),1)]),_:1})]),controls:f(()=>[d(be,{icon:"plus",cta:"",tooltip:"Create new journal",onClick:s})]),default:f(()=>[d(sl,{journals:a.value,onEdit:u[0]||(u[0]=c=>i.$emit("edit",c)),onBulkAdd:u[1]||(u[1]=c=>i.$emit("bulk-add",c))},null,8,["journals"])]),_:1},8,["default-expanded"])],64))}}),Hp=["disabled"],zp=I({__name:"ObsidianColorPicker",props:Ut({disabled:{type:Boolean}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=Lt(e,"modelValue");return(n,o)=>Yn((m(),_("input",{"onUpdate:modelValue":o[0]||(o[0]=a=>t.value=a),type:"color",disabled:n.disabled,spellcheck:"false"},null,8,Hp)),[[zo,t.value]])}}),Kp={title:"Check title",tag:"Check tags",property:"Check frontmatter property",date:"Check date",weekday:"Check weekday",offset:"Check interval offset","has-note":"Check if note exists","has-open-task":"Check if note has open tasks","all-tasks-completed":"Check if all tasks are completed"},Gp={"background-primary":"Primary background","background-primary-alt":"Background for surfaces on top of primary background","background-secondary":"Secondary background","background-secondary-alt":"Background for surfaces on top of secondary background","background-modifier-hover":"Hovered elements","background-modifier-active-hover":"Active hovered elements","background-modifier-border":"Border color","background-modifier-border-hover":"Border color (hover)","background-modifier-border-focus":"Border color (focus)","background-modifier-error-rgb":"Error background, RGB value","background-modifier-error":"Error background","background-modifier-error-hover":"Error background (hover)","background-modifier-success-rgb":"Success background, RGB value","background-modifier-success":"Success background","background-modifier-message":"Messages background","interactive-normal":"Background for standard interactive elements","interactive-hover":"Background for standard interactive elements (hover)","interactive-accent":"Background for accented interactive elements","interactive-accent-hover":"Background for accented interactive elements (hover)","text-normal":"Normal text","text-muted":"Muted text","text-faint":"Faint text","text-on-accent":"Text on accent background when accent is dark","text-on-accent-inverted":"Text on accent background when accent is light","text-success":"Success text","text-warning":"Warning text","text-error":"Error text","text-accent":"Accent text","text-accent-hover":"Accent text (hover)","text-selection":"Selected text background","text-highlight-bg":"Highlighted text background","caret-color":"Caret color"},Qp={class:"color-picker"},Xp=["value"],Zp=I({__name:"ColorPicker",props:{modelValue:{default:()=>({type:"transparent"})},modelModifiers:{}},emits:["update:modelValue"],setup(e){const t=Lt(e,"modelValue"),n=w({get:()=>t.value.type,set(l){switch(l){case"transparent":{t.value={type:"transparent"};break}case"custom":{t.value={type:"custom",color:"#000000"};break}case"theme":{t.value={type:"theme",name:"text-normal"};break}}}}),o=w({get:()=>t.value.type==="theme"?t.value.name:"",set(l){t.value.type==="theme"&&(t.value={type:"theme",name:l})}}),a=w({get:()=>t.value.type==="custom"?t.value.color:"",set(l){t.value.type==="custom"&&(t.value={type:"custom",color:l})}}),r=w(()=>t.value.type==="theme"?{background:`var(--${t.value.name})`}:{});return(l,s)=>(m(),_("div",Qp,[d(Ve,{modelValue:n.value,"onUpdate:modelValue":s[0]||(s[0]=i=>n.value=i)},{default:f(()=>s[3]||(s[3]=[h("option",{value:"transparent"},"Transparent",-1),h("option",{value:"theme"},"Theme",-1),h("option",{value:"custom"},"Custom",-1)])),_:1},8,["modelValue"]),n.value==="theme"?(m(),E(Ve,{key:0,modelValue:o.value,"onUpdate:modelValue":s[1]||(s[1]=i=>o.value=i),class:"theme-dropdown"},{default:f(()=>[(m(!0),_(U,null,_e(b(Gp),(i,u)=>(m(),_("option",{key:u,value:u},P(i),9,Xp))),128))]),_:1},8,["modelValue"])):R("",!0),n.value==="theme"?(m(),_("div",{key:1,class:"theme-preview",style:io(r.value)},null,4)):R("",!0),n.value==="custom"?(m(),E(zp,{key:2,modelValue:a.value,"onUpdate:modelValue":s[2]||(s[2]=i=>a.value=i)},null,8,["modelValue"])):R("",!0)]))}}),Bt=ge(Zp,[["__scopeId","data-v-67b2b8ef"]]);function jt(e){return JSON.parse(JSON.stringify(e))}function em(e){return new Promise(t=>setTimeout(t,e))}function Qa(e){throw new Error("Unexpected value")}function tm(e){if(e.type==="custom")return`every ${e.duration} ${e.every}s`;switch(e.type){case"day":return"daily";case"week":return"weekly";case"month":return"monthly";case"quarter":return"quarterly";case"year":return"annually"}return""}function nm(e){switch(e.type){case"title":return`title ${e.condition} ${e.value}`;case"tag":return`tag ${e.condition} ${e.value}`;case"property":return`property ${e.name} ${e.condition} ${e.value}`;case"date":return`date is ${e.day}-${e.month}-${e.year??"any year"}`;case"weekday":return`weekday is any of ${e.weekdays.map(t=>X.moment().localeData().weekdaysShort()[t]).join(", ")}`;case"offset":return`date is ${e.offset<0?-e.offset:e.offset} days away from interval ${e.offset<0?"end":"start"}`;case"has-note":return"there is a note connected to a date";case"has-open-task":return"note connected to a date has an open task";case"all-tasks-completed":return"all tasks in note connected to date are completed";default:return Qa(),""}}async function om(e,t){for(const[n,o]of t){const a=e.getJournal(n);if(a)for(const{year:r,weeks:l,path:s}of o){const i=Oe().year(r).week(l).format("YYYY-MM-DD"),u=a.resolveAnchorDate(i);u&&await e.notesManager.updateNoteFrontmatter(s,c=>{c[a.frontmatterDate]=u,a.config.value.frontmatter.addStartDate&&(c[a.frontmatterStartDate]=a.resolveStartDate(u)),a.config.value.frontmatter.addEndDate&&(c[a.frontmatterEndDate]=a.resolveEndDate(u))})}}}const am={key:0},rm={class:"whitespace"},lm={key:0},sm=I({__name:"CalendarWeekSettings.modal",emits:["close"],setup(e,{emit:t}){const n=t,o=pe(),a=fe(),r=fe("0"),l=fe(1),s=Ti(o.calendarSettings),i=w(()=>a.value&&(a.value.dow!==s.dow||a.value.doy!==s.doy||a.value.name!==s.name));bt(()=>{u(s)});function u(g){a.value=jt(g),r.value=String(g.dow),l.value=Mi(g.dow,g.doy)}function c(){a.value&&(a.value.name="custom")}async function v(){if(!a.value)return;const g=o.journals.filter(T=>T.type==="week"),p=new Map;for(const T of g){const Z=[];for(const[M,A]of o.index.getJournalIndex(T.name)){const le=G(M);Z.push({year:le.year(),weeks:le.week(),path:A})}p.set(T.name,Z)}a.value.name==="custom"&&(a.value.dow=Number.parseInt(r.value,10),a.value.doy=Ni(a.value.dow,l.value));const{dow:C,doy:y}=a.value,x=o.calendarSettings.global?oo.dow:X.moment().localeData().firstDayOfWeek(),O=o.calendarSettings.global?oo.doy:X.moment().localeData().firstDayOfYear();C===x&&y===O?(o.calendarSettings.dow=-1,Ma(o.calendarSettings.global)):(o.calendarSettings.dow=C,o.calendarSettings.doy=y,Na(C,y,o.calendarSettings.global)),await om(o,p),n("close")}return(g,p)=>a.value?(m(),_("div",am,[(m(!0),_(U,null,_e(b(Ai),C=>(m(),E(N,{key:C.name},{name:f(()=>[k(P(C.name),1)]),description:f(()=>[h("div",rm,P(C.description),1),h("div",null,"Used in: "+P(C.used),1)]),default:f(()=>[C.name===b(s).name?(m(),_("div",lm,"Currently used")):R("",!0),C.name===a.value.name?(m(),E(un,{key:1,name:"lucide-check"})):(m(),E(ue,{key:2,onClick:y=>u(C)},{default:f(()=>p[3]||(p[3]=[k("Use")])),_:2},1032,["onClick"]))]),_:2},1024))),128)),d(N,{name:"Custom settings"},{description:f(()=>p[4]||(p[4]=[h("div",null,[k(" Here you can define what day of week should be used"),h("br"),k(" as first and how first week of year should be defined"),h("br"),k(" if none of standard presets suits your needs. ")],-1)])),default:f(()=>[a.value.name!=="custom"?(m(),E(ue,{key:0,onClick:p[0]||(p[0]=C=>c())},{default:f(()=>p[5]||(p[5]=[k("Use")])),_:1})):R("",!0)]),_:1}),a.value.name==="custom"?(m(),_(U,{key:0},[d(N,{name:"Start week on",description:"Which day to consider as first day of week."},{default:f(()=>[d(Ve,{modelValue:r.value,"onUpdate:modelValue":p[1]||(p[1]=C=>r.value=C)},{default:f(()=>p[6]||(p[6]=[h("option",{value:"0"},"Sunday",-1),h("option",{value:"1"},"Monday",-1),h("option",{value:"2"},"Tuesday",-1),h("option",{value:"3"},"Wednesday",-1),h("option",{value:"4"},"Thursday",-1),h("option",{value:"5"},"Friday",-1),h("option",{value:"6"},"Saturday",-1)])),_:1},8,["modelValue"])]),_:1}),d(N,{name:"First week of year",description:"Define what date in January a week should contain to be considered first week of a year."},{default:f(()=>[d(ln,{modelValue:l.value,"onUpdate:modelValue":p[2]||(p[2]=C=>l.value=C)},null,8,["modelValue"])]),_:1})],64)):R("",!0),i.value?(m(),E(N,{key:1},{description:f(()=>p[7]||(p[7]=[k(" This will update all weekly notes to use current settings - week number of notes will be kept but dates will be updated. ")])),default:f(()=>[d(ue,{cta:"",onClick:v},{default:f(()=>p[8]||(p[8]=[k("Update")])),_:1})]),_:1})):R("",!0)])):R("",!0)}}),im={class:"column"},um={class:"whitespace"},dm=I({__name:"CalendarWeekSettings",setup(e){const t=pe(),n=w(()=>Ti(t.calendarSettings));lt(()=>t.calendarSettings.global,a=>{a?t.calendarSettings.dow===-1?Ma(!0):Na(t.calendarSettings.dow,t.calendarSettings.doy,!0):(Ma(!0),t.calendarSettings.dow!==-1&&Na(t.calendarSettings.dow,t.calendarSettings.doy,!1))});function o(){new Me(t,"Week configuration",sm,{}).open()}return(a,r)=>(m(),_(U,null,[d(N,{heading:"",name:"Week configuration"},{description:f(()=>r[1]||(r[1]=[k(" Here you can define what day of week should be used"),h("br",null,null,-1),k(" as first and how first week of year should be defined"),h("br",null,null,-1),k(" (influences week numbers). ")])),default:f(()=>[h("div",im,[h("div",um,P(n.value.description),1),d(ue,{class:"self-end",onClick:o},{default:f(()=>r[2]||(r[2]=[k("Change")])),_:1})])]),_:1}),d(N,{name:"Apply week configuration for all dates in vault?"},{description:f(()=>r[3]||(r[3]=[h("div",null," If disabled weak configuration settings are apply only to date within current journals and does not affect any dates created by other plugins or obsidian itself. ",-1),h("div",{class:"journal-hint"},"You might need to restart Obsidian for changes to take effect.",-1)])),default:f(()=>[d(He,{modelValue:b(t).calendarSettings.global,"onUpdate:modelValue":r[0]||(r[0]=l=>b(t).calendarSettings.global=l)},null,8,["modelValue"])]),_:1})],64))}}),cm=ge(dm,[["__scopeId","data-v-1e68a6d9"]]),fm=I({__name:"ShelfDecision",emits:["next"],setup(e,{emit:t}){const n=t,o=pe(),a=fe(!1);function r(){a.value&&(o.usesShelves=!0),n("next")}return(l,s)=>(m(),_("div",null,[d(N,{heading:"",name:"Use shelves?"}),d(N,{"no-controls":""},{description:f(()=>s[1]||(s[1]=[k(" Shelves can be used to organize several journals into one logical group (like work or personal)."),h("br",null,null,-1),k(" Enabling shelves before migration will convert all calendar journals that have more than one section enabled into a shelf."),h("br",null,null,-1),k(" You can always change this decision later. ")])),_:1}),d(N,{name:"Enable shelves?"},{default:f(()=>[d(He,{modelValue:a.value,"onUpdate:modelValue":s[0]||(s[0]=i=>a.value=i)},null,8,["modelValue"])]),_:1}),d(N,null,{default:f(()=>[d(ue,{onClick:r},{default:f(()=>s[2]||(s[2]=[k("Next")])),_:1})]),_:1})]))}}),Zi=3,vl={version:Zi,ui:{calendarShelf:null},pendingMigrations:[],dismissedNotifications:[],useShelves:!1,showReloadHint:!1,openOnStartup:"",journals:{},shelves:{},commands:[{name:"Open today's note",writeType:"day",type:"same",openMode:"tab",showInRibbon:!1,icon:""},{name:"Open weekly note",writeType:"week",type:"same",openMode:"tab",showInRibbon:!1,icon:""},{name:"Open monthly note",writeType:"month",type:"same",openMode:"tab",showInRibbon:!1,icon:""},{name:"Open quarterly note",writeType:"quarter",type:"same",openMode:"tab",showInRibbon:!1,icon:""},{name:"Open yearly note",writeType:"year",type:"same",openMode:"tab",showInRibbon:!1,icon:""},{name:"Open tomorrow's note",writeType:"day",type:"next",openMode:"tab",showInRibbon:!1,icon:""},{name:"Open next week note",writeType:"week",type:"next",openMode:"tab",showInRibbon:!1,icon:""},{name:"Open next month note",writeType:"month",type:"next",openMode:"tab",showInRibbon:!1,icon:""},{name:"Open next quarter note",writeType:"quarter",type:"next",openMode:"tab",showInRibbon:!1,icon:""},{name:"Open next year note",writeType:"year",type:"next",openMode:"tab",showInRibbon:!1,icon:""},{name:"Open yesterday's note",writeType:"day",type:"previous",openMode:"tab",showInRibbon:!1,icon:""},{name:"Open last week note",writeType:"week",type:"previous",openMode:"tab",showInRibbon:!1,icon:""},{name:"Open last month note",writeType:"month",type:"previous",openMode:"tab",showInRibbon:!1,icon:""},{name:"Open last quarter note",writeType:"quarter",type:"previous",openMode:"tab",showInRibbon:!1,icon:""},{name:"Open last year note",writeType:"year",type:"previous",openMode:"tab",showInRibbon:!1,icon:""}],calendar:{dow:-1,doy:1,global:!1},calendarView:{display:"month",leaf:"right",weeks:"left",todayMode:"navigate",pickMode:"create",todayStyle:{color:{type:"theme",name:"text-accent"},background:{type:"transparent"}},activeStyle:{color:{type:"theme",name:"text-on-accent"},background:{type:"theme",name:"interactive-accent"}}}},hl={name:"",shelves:[],write:{type:"day"},confirmCreation:!1,nameTemplate:"",dateFormat:"",folder:"",templates:[],start:"",end:{type:"never"},index:{enabled:!1,anchorDate:"",anchorIndex:1,allowBefore:!1,type:"increment",resetAfter:2},autoCreate:!1,commands:[],decorations:[{mode:"and",conditions:[{type:"has-note"}],styles:[{type:"shape",size:.4,shape:"circle",color:{type:"theme",name:"interactive-accent"},placement_x:"center",placement_y:"bottom"}]}],navBlock:{type:"create",rows:[],decorateWholeBlock:!1},calendarViewBlock:{rows:[],decorateWholeBlock:!1},frontmatter:{dateField:"",addStartDate:!1,startDateField:"",addEndDate:!1,endDateField:"",indexField:""}},pm={dateField:za,indexField:Ka,startDateField:an,endDateField:wn},mm={icon:"",name:"",writeType:"day",type:"same",showInRibbon:!1,openMode:"active"},vm={icon:"",name:"",type:"same",context:"today",showInRibbon:!1,openMode:"active"},eu={date:{type:"date",day:-1,month:-1,year:null},title:{type:"title",condition:"contains",value:""},tag:{type:"tag",condition:"contains",value:""},property:{type:"property",name:"",condition:"contains",value:""},weekday:{type:"weekday",weekdays:[]},offset:{type:"offset",offset:0},"has-note":{type:"has-note"},"has-open-task":{type:"has-open-task"},"all-tasks-completed":{type:"all-tasks-completed"}},hm={background:{type:"background",color:{type:"transparent"}},color:{type:"color",color:{type:"theme",name:"text-normal"}},border:{type:"border",border:"uniform",left:{show:!0,width:1,color:{type:"transparent"},style:"solid"},right:{show:!1,width:1,color:{type:"transparent"},style:"solid"},top:{show:!1,width:1,color:{type:"transparent"},style:"solid"},bottom:{show:!1,width:1,color:{type:"transparent"},style:"solid"}},shape:{type:"shape",size:.4,shape:"circle",color:{type:"transparent"},placement_x:"center",placement_y:"bottom"},corner:{type:"corner",placement:"top-left",color:{type:"transparent"}},icon:{type:"icon",icon:"",size:.5,color:{type:"transparent"},placement_x:"center",placement_y:"top"}},tu={day:"{{date}}",week:"{{date}}",month:"{{date}}",quarter:"{{date}}",year:"{{date}}",custom:"{{journal_name}} {{index}}"},nu={day:"YYYY-MM-DD",week:"YYYY-[W]w",month:"YYYY-MM",quarter:"YYYY-[Q]Q",year:"YYYY",custom:"YYYY-MM-DD"},Ze={template:"",fontSize:1,bold:!1,italic:!1,link:"none",journal:"",color:{type:"theme",name:"text-normal"},background:{type:"transparent"},addDecorations:!1},fs={...Ze,template:"{{date:[W]w}}",link:"week"},br={...Ze,template:"{{date:MMMM}}",link:"month"},yo={...Ze,template:"{{date:YYYY}}",link:"year"},wo={...Ze,template:"{{relative_date}}",fontSize:.7},gm={day:{type:"create",decorateWholeBlock:!1,rows:[{...Ze,template:"{{date:ddd}}"},{...Ze,template:"{{date:D}}",fontSize:3,bold:!0,link:"self",addDecorations:!0},wo,fs,br,yo]},week:{type:"create",decorateWholeBlock:!1,rows:[{...fs,fontSize:3,bold:!0,link:"self",addDecorations:!0},wo,br,yo]},month:{type:"create",decorateWholeBlock:!1,rows:[{...br,fontSize:3,bold:!0,link:"self",addDecorations:!0},wo,yo]},quarter:{type:"create",decorateWholeBlock:!1,rows:[{...Ze,template:"{{date:[Q]Q}}",fontSize:3,bold:!0,link:"self",addDecorations:!0},wo,yo]},year:{type:"create",decorateWholeBlock:!1,rows:[{...yo,fontSize:3,bold:!0,link:"self",addDecorations:!0},wo]},custom:{type:"create",decorateWholeBlock:!1,rows:[{...Ze,template:"{{journal_name}} {{index}}",link:"self",fontSize:3,bold:!0,addDecorations:!0},{...Ze,template:"{{start_date}}"},{...Ze,template:"to"},{...Ze,template:"{{end_date}}"}]}};function gl(e){const t={nameTemplate:tu[e.type],dateFormat:nu[e.type],navBlock:gm[e.type]};return e.type==="custom"&&(t.start=e.anchorDate,t.index={enabled:!0,anchorDate:e.anchorDate,anchorIndex:1,allowBefore:!1,type:"increment",resetAfter:1},t.calendarViewBlock={decorateWholeBlock:!0,rows:[{...Ze,template:"{{journal_name}} {{index}}",link:"self",fontSize:1.2,bold:!0},{...Ze,template:"{{start_date}} to {{end_date}}"}]},t.decorations=[{mode:"and",conditions:[{type:"has-note"}],styles:[{type:"border",border:"different",left:{show:!0,width:2,color:{type:"theme",name:"interactive-accent"},style:"solid"},right:{show:!1,width:1,color:{type:"transparent"},style:"solid"},top:{show:!1,width:1,color:{type:"transparent"},style:"solid"},bottom:{show:!1,width:1,color:{type:"transparent"},style:"solid"}}]}]),t}const kr="journal-section",ha="journal-interval-index",ym={day:"Open today's note",week:"Open this week's note",month:"Open this month's note",quarter:"Open this quarter's note",year:"Open this year's note"};function ou(e){let t=0;return e.day.enabled&&t++,e.week.enabled&&t++,e.month.enabled&&t++,e.quarter.enabled&&t++,e.year.enabled&&t++,t}function wm(e){const t=jt(vl);return t.calendar.dow=e.calendar.firstDayOfWeek,t.calendar.doy=e.calendar.firstDayOfWeek===-1?1:Ni(e.calendar.firstDayOfWeek,e.calendar.firstWeekOfYear),t.calendarView.leaf=e.calendar_view.leaf,t.calendarView.weeks=e.calendar_view.weeks,t.pendingMigrations.push({type:"v1-v2",shelfDecided:!1,frontmatterDecided:!1,journals:Object.values(e.journals)}),t}function bm(e,t){const n={type:"custom",anchorDate:e.start_date,every:e.granularity,duration:e.duration},o=jt({...hl,...gl(n),write:n});if(o.name=e.name,o.autoCreate=e.createOnStartup,o.nameTemplate=e.nameTemplate||"{{journal_name}} {{index}}",o.dateFormat=e.dateFormat||"YYYY-MM-DD",o.folder=e.folder,e.template&&o.templates.push(e.template),o.start=e.start_date,e.end_type==="date"?o.end={type:"date",date:e.end_date}:e.end_type==="repeats"&&(o.end={type:"repeats",repeats:e.repeats}),o.index={enabled:!0,anchorDate:e.start_date,anchorIndex:e.start_index,allowBefore:!1,type:"increment",resetAfter:0},e.numeration_type==="year"){o.index.type="reset_after";const a=e.duration;switch(e.granularity){case"month":{o.index.resetAfter=Math.floor(12/a);break}case"week":{o.index.resetAfter=Math.floor(52/a);break}case"day":{o.index.resetAfter=Math.floor(365/a);break}}}if(e.navNameTemplate||e.navDatesTemplate)if(o.navBlock.rows=[{...Ze,template:e.navNameTemplate||"{{journal_name}} {{index}}",link:"self",fontSize:3,bold:!0,addDecorations:!0}],e.navDatesTemplate)for(const a of e.navDatesTemplate.split("|"))o.navBlock.rows.push({...Ze,template:a});else o.navBlock.rows.push({...Ze,template:"{{start_date}}"},{...Ze,template:"to"},{...Ze,template:"{{end_date}}"});return t&&(o.frontmatter.addStartDate=!0,o.frontmatter.addEndDate=!0),e.ribbon.show&&o.commands.push({icon:e.ribbon.icon||"calendar-range",name:e.ribbon.tooltip||`Open current ${e.name} note`,type:"same",context:"today",showInRibbon:!0,openMode:e.openMode}),o}async function km(e,t,n){const o=bm(t,n),a=e.registerJournal(o);await Cm(e.notesManager,a,t)}async function Cm(e,t,n){const o=e.getMarkdownFiles();for(const a of o){const r=e.getNoteMetadata(a.path);if(!r)continue;const{frontmatter:l}=r;!l||!(ft in l)||l[ft]!==n.id||await e.updateNoteFrontmatter(a.path,i=>{const u=i[an],c=i[wn],v=t.resolveAnchorDate(u);v?(i[ft]=t.name,i[t.frontmatterDate]=u,t.config.value.frontmatter.addStartDate?i[t.frontmatterStartDate]=t.resolveStartDate(v):delete i[an],t.config.value.frontmatter.addEndDate||c!==t.resolveEndDate(v)?i[t.frontmatterEndDate]=c:delete i[wn],i[t.frontmatterIndex]=i[ha],delete i[ha]):(delete i[ft],delete i[an],delete i[wn],delete i[ha])})}}async function _m(e,t,n,o){t.day.enabled&&await bo(e,t,"day",n,o),t.week.enabled&&await bo(e,t,"week",n,o),t.month.enabled&&await bo(e,t,"month",n,o),t.quarter.enabled&&await bo(e,t,"quarter",n,o),t.year.enabled&&await bo(e,t,"year",n,o)}function Sm(e,t,n,o,a){const r={type:t},l=jt({...hl,...gl(r),write:r}),s=e[t];return l.name=n[t],l.autoCreate=s.createOnStartup,o&&n.shelf&&(l.shelves=[n.shelf]),l.nameTemplate=s.nameTemplate||"{{date}}",l.dateFormat=s.dateFormat||nu[t],l.folder=e.rootFolder?e.rootFolder+"/"+s.folder:s.folder,s.template&&l.templates.push(s.template),s.ribbon.show&&l.commands.push({icon:s.ribbon.icon||"calendar-days",name:s.ribbon.tooltip||ym[t],type:"same",context:"today",showInRibbon:!0,openMode:s.openMode}),a&&(l.frontmatter.addStartDate=!0,l.frontmatter.addEndDate=!0),l}async function bo(e,t,n,o,a){const r=Sm(t,n,o,e.usesShelves,a),l=e.registerJournal(r);await xm(e.notesManager,l,n,t)}async function xm(e,t,n,o){const a=e.getMarkdownFiles();for(const r of a){const l=e.getNoteMetadata(r.path);if(!l)continue;const{frontmatter:s}=l;!s||!(ft in s)||s[ft]!==o.id||s[kr]!==n||await e.updateNoteFrontmatter(r.path,c=>{const v=c[an],g=t.resolveAnchorDate(v);g?(c[ft]=t.name,c[t.frontmatterDate]=v,t.config.value.frontmatter.addStartDate?c[t.frontmatterStartDate]=t.resolveStartDate(g):delete c[an],t.config.value.frontmatter.addEndDate?c[t.frontmatterEndDate]=t.resolveEndDate(g):delete c[wn],delete c[kr]):(delete c[ft],delete c[kr],delete c[an],delete c[wn],delete c[ha])})}}const Dm={key:1,class:"loader-container"},Vm=I({__name:"MigrateCalendar",props:{journal:{},keepFrontmatter:{type:Boolean}},emits:["next","finished"],setup(e,{emit:t}){const n=t,o=pe(),a=fe("names"),r=ou(e.journal),l=fe(""),s=fe(""),i=fe(""),u=fe(""),c=fe(""),v=fe("");async function g(){a.value="processing",o.usesShelves&&l.value&&!o.hasShelf(l.value)&&o.createShelf(l.value),await _m(o,e.journal,{shelf:l.value,day:s.value,week:u.value,month:i.value,quarter:c.value,year:v.value},e.keepFrontmatter),o.reprocessNotes(),n("finished"),a.value="done"}return bt(async()=>{if(r===0){n("finished"),Mt(()=>{n("next")});return}r===1?(s.value=e.journal.name,u.value=e.journal.name,i.value=e.journal.name,c.value=e.journal.name,v.value=e.journal.name,await g()):(a.value="names",l.value=e.journal.name,s.value=`${e.journal.name} daily`,u.value=`${e.journal.name} weekly`,i.value=`${e.journal.name} monthly`,c.value=`${e.journal.name} quarterly`,v.value=`${e.journal.name} yearly`)}),(p,C)=>(m(),_("div",null,[d(N,{heading:""},{name:f(()=>[k("Migrating "+P(p.journal.name),1)]),_:1}),a.value==="names"?(m(),_(U,{key:0},[b(o).usesShelves?(m(),E(N,{key:0,name:"Shelf name"},{default:f(()=>[d(Je,{modelValue:l.value,"onUpdate:modelValue":C[0]||(C[0]=y=>l.value=y)},null,8,["modelValue"])]),_:1})):R("",!0),p.journal.day.enabled?(m(),E(N,{key:1,name:"Daily journal name"},{default:f(()=>[d(Je,{modelValue:s.value,"onUpdate:modelValue":C[1]||(C[1]=y=>s.value=y)},null,8,["modelValue"])]),_:1})):R("",!0),p.journal.week.enabled?(m(),E(N,{key:2,name:"Weekly journal name"},{default:f(()=>[d(Je,{modelValue:u.value,"onUpdate:modelValue":C[2]||(C[2]=y=>u.value=y)},null,8,["modelValue"])]),_:1})):R("",!0),p.journal.month.enabled?(m(),E(N,{key:3,name:"Monthly journal name"},{default:f(()=>[d(Je,{modelValue:i.value,"onUpdate:modelValue":C[3]||(C[3]=y=>i.value=y)},null,8,["modelValue"])]),_:1})):R("",!0),p.journal.quarter.enabled?(m(),E(N,{key:4,name:"Quarterly journal name"},{default:f(()=>[d(Je,{modelValue:c.value,"onUpdate:modelValue":C[4]||(C[4]=y=>c.value=y)},null,8,["modelValue"])]),_:1})):R("",!0),p.journal.year.enabled?(m(),E(N,{key:5,name:"Yearly journal name"},{default:f(()=>[d(Je,{modelValue:v.value,"onUpdate:modelValue":C[5]||(C[5]=y=>v.value=y)},null,8,["modelValue"])]),_:1})):R("",!0),d(N,null,{default:f(()=>[d(ue,{cta:"",onClick:g},{default:f(()=>C[7]||(C[7]=[k("Migrate")])),_:1})]),_:1})],64)):a.value==="processing"?(m(),_("div",Dm,[d(un,{name:"loader"})])):(m(),E(N,{key:2,name:"Done!"},{default:f(()=>[d(ue,{cta:"",onClick:C[6]||(C[6]=y=>p.$emit("next"))},{default:f(()=>C[8]||(C[8]=[k("Next")])),_:1})]),_:1}))]))}}),jm=ge(Vm,[["__scopeId","data-v-7e294ea2"]]),$m={key:0,class:"loader-container"},Nm=I({__name:"MigrateInterval",props:{journal:{},keepFrontmatter:{type:Boolean}},emits:["next","finished"],setup(e,{emit:t}){const n=t,o=pe(),a=fe(!0);return bt(async()=>{a.value=!0,await km(o,e.journal,e.keepFrontmatter),o.reprocessNotes(),n("finished"),a.value=!1}),(r,l)=>(m(),_("div",null,[d(N,{heading:""},{name:f(()=>[k(" Migrating "+P(r.journal.name),1)]),_:1}),a.value?(m(),_("div",$m,[d(un,{name:"loader"})])):(m(),E(N,{key:1,name:"Done!"},{default:f(()=>[d(ue,{cta:"",onClick:l[0]||(l[0]=s=>r.$emit("next"))},{default:f(()=>l[1]||(l[1]=[k("Next")])),_:1})]),_:1}))]))}}),Mm=ge(Nm,[["__scopeId","data-v-c1f36a5c"]]),Om=I({__name:"FrontMatterDecision",props:{modelValue:{type:Boolean},modelModifiers:{}},emits:Ut(["next"],["update:modelValue"]),setup(e){const t=Lt(e,"modelValue");return(n,o)=>(m(),_("div",null,[d(N,{name:"Frontmatter data",heading:""}),d(N,{"no-controls":""},{description:f(()=>o[2]||(o[2]=[k(" New plugin version by default reduces frontmatter data."),h("br",null,null,-1),k(" Instead of having start and end dates in frontmatter there is only 1 date (usually first day of month or year for example)."),h("br",null,null,-1),k(" If you used start or end dates from frontmatter in some other plugins (like Dataview) you can configure plugin to keep start and end dates in frontmatter."),h("br",null,null,-1),k(" You can always change this decision later. ")])),_:1}),d(N,{name:"Keep start and end dates in frontmatter?"},{default:f(()=>[d(He,{modelValue:t.value,"onUpdate:modelValue":o[0]||(o[0]=a=>t.value=a)},null,8,["modelValue"])]),_:1}),d(N,null,{default:f(()=>[d(ue,{onClick:o[1]||(o[1]=a=>n.$emit("next"))},{default:f(()=>o[3]||(o[3]=[k("Next")])),_:1})]),_:1})]))}}),Am={key:2},Tm=I({__name:"v2-migration",props:{migration:{}},emits:["finished"],setup(e,{emit:t}){const n=t;let o=fe(!1),a=fe("decideFrontmatter"),r=fe();bt(()=>{e.migration.journals.length===0?n("finished"):e.migration.frontmatterDecided&&(e.migration.shelfDecided?(a.value="journal",r.value=e.migration.journals[0]):a.value="decideShelf")});function l(){if(r.value){const{journals:i}=e.migration;i.shift()}}function s(){if(a.value==="decideFrontmatter"&&(e.migration.frontmatterDecided=!0),a.value==="decideShelf"&&(e.migration.shelfDecided=!0),!e.migration.shelfDecided)if(e.migration.journals.some(u=>u.type==="calendar"?ou(u)>1:!1)){a.value="decideShelf";return}else e.migration.shelfDecided=!0;r.value&&(r.value=null),e.migration.journals.length>0?(a.value="journal",r.value=e.migration.journals[0]):n("finished")}return(i,u)=>(m(),_("div",null,[b(a)==="decideFrontmatter"?(m(),E(Om,{key:0,modelValue:b(o),"onUpdate:modelValue":u[0]||(u[0]=c=>ce(o)?o.value=c:o=c),onNext:s},null,8,["modelValue"])):R("",!0),b(a)==="decideShelf"?(m(),E(fm,{key:1,onNext:s})):b(a)==="journal"&&b(r)?(m(),_("div",Am,[b(r).type==="calendar"?(m(),E(jm,{key:b(r).id+"calendar",journal:b(r),"keep-frontmatter":b(o),onFinished:l,onNext:s},null,8,["journal","keep-frontmatter"])):b(r).type==="interval"?(m(),E(Mm,{key:b(r).id+"interval",journal:b(r),"keep-frontmatter":b(o),onFinished:l,onNext:s},null,8,["journal","keep-frontmatter"])):R("",!0)])):R("",!0)]))}}),Fm={key:0},au=I({__name:"MigrationModal",emits:["close"],setup(e,{emit:t}){const n=t,o=pe(),a=fe(null),r=w(()=>{if(!a.value)return null;switch(a.value.type){case"v1-v2":return Tm}return null});function l(){a.value=null,o.pendingMigrations.shift(),o.pendingMigrations.length===0?n("close"):a.value=o.pendingMigrations[0]}return bt(()=>{o.pendingMigrations.length===0?n("close"):a.value=o.pendingMigrations[0]}),(s,i)=>a.value?(m(),_("div",Fm,[(m(),E(qo(r.value),{migration:a.value,onFinished:l},null,40,["migration"]))])):R("",!0)}}),Em={day:["same","next","previous","same_next_week","same_previous_week","same_next_month","same_previous_month","same_next_year","same_previous_year"],week:["same","next","previous"],month:["same","next","previous","same_next_year","same_previous_year"],quarter:["same","next","previous","same_next_year","same_previous_year"],year:["same","next","previous"],custom:["same","next","previous"]},Pm=e=>Em[e],Xa=(e,t,n)=>{switch(t){case"same":return e==="day"?"Open today's note":`Open current ${e}'s note`;case"previous":return e==="day"&&n==="today"?"Open yesterday's note":`Open last ${e}'s note`;case"next":return e==="day"&&n==="today"?"Open tomorrow's note":`Open next ${e}'s note`;case"same_next_week":return`Open same ${e} next week`;case"same_previous_week":return`Open same ${e} last week`;case"same_next_month":return`Open same ${e} next month`;case"same_previous_month":return`Open same ${e} last month`;case"same_next_year":return`Open same ${e} next year`;case"same_previous_year":return`Open same ${e} last year`}};function Im(e,t,n){return t==="same"?"":n==="only_open_note"?"(using date of currently opened note)":n==="open_note"?"(using date of currently opened note or today's date)":""}class Rm extends X.AbstractInputSuggest{constructor(t,n){super(t,n),this.textInputElement=n}getSuggestions(t){const n=X.getIconIds(),o=t.toLocaleLowerCase();return n.filter(a=>a.toLocaleLowerCase().includes(o)).sort()}renderSuggestion(t,n){const o=X.getIcon(t);if(o){o.classList.add("suggestion-icon"),n.classList.add("mod-complex","journal-suggestion-icon"),n.append(o);const a=n.createSpan();a.classList.add("journal-suggestion-name"),a.style.marginLeft="8px",a.appendText(t)}}selectSuggestion(t){this.textInputElement.value=t,this.textInputElement.trigger("input"),this.close()}}function yl(){return pe().app}const Bm={class:"icon-selector"},Ym=I({__name:"IconSelector",props:Ut({placeholder:{}},{modelValue:{},modelModifiers:{}}),emits:Ut(["blur","change"],["update:modelValue"]),setup(e){const t=Lt(e,"modelValue"),n=fe(),o=yl();return bt(()=>{n.value&&new Rm(o,n.value.$el)}),(a,r)=>(m(),_("div",Bm,[d(un,{name:t.value??""},null,8,["name"]),d(Je,{ref_key:"inputCmp",ref:n,modelValue:t.value,"onUpdate:modelValue":r[0]||(r[0]=l=>t.value=l),placeholder:a.placeholder,onBlur:r[1]||(r[1]=l=>a.$emit("blur")),onChange:r[2]||(r[2]=l=>a.$emit("change",l))},null,8,["modelValue","placeholder"])]))}}),wl=ge(Ym,[["__scopeId","data-v-6d210595"]]),Um={value:"same"},Wm={value:"next"},Lm={value:"previous"},Aa=I({__name:"EditPluginCommand.modal",props:{index:{},command:{},commands:{}},emits:["close","submit"],setup(e,{emit:t}){const n=t,o=new Set(X.getIconIds());function a(ie){return ie?!e.commands.some((L,me)=>L.name===ie&&me!==e.index):!0}const{defineField:r,errorBag:l,handleSubmit:s}=Cn({initialValues:e.command?{...e.command}:{...mm},validationSchema:Sn(wt(At({icon:Xe(),name:wt(Xe(),Gt("Command name is required"),fo(a,"Command name should be unique")),type:yt(["same","next","previous"]),writeType:yt(["day","week","month","quarter","year"]),showInRibbon:rn(),openMode:yt(["active","tab","split","window"])}),Go(po([["showInRibbon"],["icon"]],ie=>ie.showInRibbon?o.has(ie.icon):!0,"Icon is required if command is added to ribbon."),["icon"])))}),[i,u]=r("name"),[c,v]=r("icon"),[g,p]=r("writeType"),[C,y]=r("type"),[x,O]=r("showInRibbon"),[T,Z]=r("openMode"),M={day:"Today's note",week:"This week's note",month:"This month's note",quarter:"This quarter's note",year:"This year's note"},A=w(()=>M[g.value??"day"]),le=s(ie=>{n("submit",ie,e.index),n("close")});return(ie,L)=>(m(),_("form",{onSubmit:L[7]||(L[7]=(...me)=>b(le)&&b(le)(...me))},[d(N,{name:"Name"},{description:f(()=>[L[8]||(L[8]=k(" Journal name will be added to command name automatically. ")),d(tt,{errors:b(l).name},null,8,["errors"])]),default:f(()=>[d(Je,De({modelValue:b(i),"onUpdate:modelValue":L[0]||(L[0]=me=>ce(i)?i.value=me:null)},b(u)),null,16,["modelValue"])]),_:1}),d(N,{name:"Show in ribbon?"},{default:f(()=>[d(He,De({modelValue:b(x),"onUpdate:modelValue":L[1]||(L[1]=me=>ce(x)?x.value=me:null)},b(O)),null,16,["modelValue"])]),_:1}),b(x)?(m(),E(N,{key:0,name:"Icon"},{description:f(()=>[d(tt,{errors:b(l).icon},null,8,["errors"])]),default:f(()=>[d(wl,De({modelValue:b(c),"onUpdate:modelValue":L[2]||(L[2]=me=>ce(c)?c.value=me:null)},b(v)),null,16,["modelValue"])]),_:1})):R("",!0),d(N,{name:"Note type"},{default:f(()=>[d(Ve,De({modelValue:b(g),"onUpdate:modelValue":L[3]||(L[3]=me=>ce(g)?g.value=me:null)},b(p)),{default:f(()=>L[9]||(L[9]=[h("option",{value:"day"},"Daily note",-1),h("option",{value:"week"},"Weekly note",-1),h("option",{value:"month"},"Monthly note",-1),h("option",{value:"quarter"},"Quarterly note",-1),h("option",{value:"year"},"Yearly note",-1)])),_:1},16,["modelValue"])]),_:1}),d(N,{name:"Open"},{default:f(()=>[d(Ve,De({modelValue:b(C),"onUpdate:modelValue":L[4]||(L[4]=me=>ce(C)?C.value=me:null)},b(y)),{default:f(()=>[h("option",Um,P(A.value),1),h("option",Wm,"Next "+P(A.value)+" note",1),h("option",Lm,"Last "+P(A.value)+" note",1)]),_:1},16,["modelValue"])]),_:1}),d(N,{name:"Open note"},{default:f(()=>[d(Ve,De({modelValue:b(T),"onUpdate:modelValue":L[5]||(L[5]=me=>ce(T)?T.value=me:null)},b(Z)),{default:f(()=>L[10]||(L[10]=[h("option",{value:"active"},"Replacing active note",-1),h("option",{value:"tab"},"In new tab",-1),h("option",{value:"split"},"Adjacent to active note",-1),h("option",{value:"window"},"In popout window",-1)])),_:1},16,["modelValue"])]),_:1}),d(N,null,{default:f(()=>[d(ue,{onClick:L[6]||(L[6]=me=>ie.$emit("close"))},{default:f(()=>L[11]||(L[11]=[k("Cancel")])),_:1}),d(ue,{cta:"",type:"submit"},{default:f(()=>L[12]||(L[12]=[k("Save")])),_:1})]),_:1})],32))}});class ru extends X.SuggestModal{constructor(t,n,o){super(t),this.journals=n,this.callback=o}getSuggestions(t){return t=t.toLocaleLowerCase(),this.journals.filter(n=>n.toLocaleLowerCase().contains(t))}renderSuggestion(t,n){n.setText(t)}onChooseSuggestion(t){this.callback(t)}}async function Yo(e,t,n,o=!1,a,r){const l=n.filter(s=>{const i=e.getJournal(s);if(!i)return!1;const u=i.get(t);return!(!u||o&&!("path"in u))});if(l.length!==0){if(l.length===1){const[s]=l;await $n(e,t,s,a);return}if(r){const s=new X.Menu;for(const i of l)s.addItem(u=>{u.setTitle(i).onClick(()=>{$n(e,t,i,a).catch(console.error)})});s.showAtMouseEvent(r)}else new ru(e.app,l,s=>{$n(e,t,s,a).catch(console.error)}).open()}}async function $n(e,t,n,o){const a=e.getJournal(n);if(!a)return;const r=a.get(t);r&&await a.open(r,o)}function Cr(e,t){let n=null;const o=Oe().format(Ce);switch(t){case"same":{n=e.get(o);break}case"next":{n=e.next(o);break}case"previous":{n=e.previous(o);break}}return n?.date??null}function lo(e,t,n,o){const a=r=>{const l=o().filter(s=>Cr(s,t.type)!==null);if(r)return l.length>0;if(l.length===0)return!1;if(l.length===1){const[s]=l,i=Cr(s,t.type);if(!i)return!1;$n(e,i,s.name,t.openMode).catch(console.error)}else new ru(e.app,l.map(s=>s.name),s=>{const i=e.getJournal(s);if(!i)return;const u=Cr(i,t.type);u&&$n(e,u,s,t.openMode).catch(console.error)}).open();return!0};e.appManager.addCommand(n,t,a),t.showInRibbon&&e.appManager.addRibbonIcon(n,t.icon,t.name,()=>a(!1))}function Ta(e,t,n){e.appManager.removeCommand(n,t),e.appManager.removeRibbonIcon(n,t.name)}const Jm=[{id:"v2-commands-change",icon:"lucide-alert-triangle",message:`Commands were considerably changed in v2 resulting in them having different ids compared to v1. 
        So if you have used command ids in other plugins, you may need to adjust them.`}],qm={key:0,class:"journal-warning"},Hm={key:1,class:"journal-warning"},zm=["value"],Km={class:"flair"},Gm=I({__name:"JournalSettingsDashboard",emits:["edit","organize","bulk-add"],setup(e,{emit:t}){const n=t,o=pe(),a=bn({commands:!1}),r=w(()=>Jm.filter(v=>!o.dismissedNotifications.includes(v.id))),l=w(()=>{const v=new Map;for(const g of o.journals){const p=`${g.config.value.nameTemplate.replaceAll("{{journal_name}}",g.name)}-${g.config.value.folder}-${g.config.value.dateFormat}`,C=v.get(p)??[];C.push(g),v.set(p,C)}return[...v.values()].filter(g=>g.length>1)});function s(){new Me(o,"Migrate plugin data",au).open()}function i(){new Me(o,"Add command",Aa,{index:o.commands.length,commands:o.commands,onSubmit:v=>{o.commands.push(v),lo(o,v,"global",()=>o.journals.filter(g=>g.type===v.writeType)),a.commands||(a.commands=!0)}}).open()}function u(v,g){new Me(o,"Edit command",Aa,{index:g,command:v,commands:o.commands,onSubmit:p=>{o.commands[g]=p,Ta(o,v,""),lo(o,p,"",()=>o.journals.filter(C=>C.type===p.writeType))}}).open()}function c(v){const[g]=o.commands.splice(v,1);g&&Ta(o,g,"")}return(v,g)=>(m(),_(U,null,[b(o).hasMigrations?(m(),_("div",qm,[d(N,{name:"Some data is pending migration",heading:""},{default:f(()=>[d(ue,{cta:"",onClick:s},{default:f(()=>g[16]||(g[16]=[k("Migrate")])),_:1})]),_:1})])):R("",!0),(m(!0),_(U,null,_e(r.value,p=>(m(),_("div",{key:p.id,class:"journal-notification"},[d(un,{name:p.icon},null,8,["name"]),k(" "+P(p.message)+" ",1),d(be,{icon:"cross",tooltip:"Dismiss",onClick:C=>b(o).dismissNotification(p.id)},null,8,["onClick"])]))),128)),d(N,{name:"Use shelves?"},{description:f(()=>g[17]||(g[17]=[k(" Shelves can be used to organize several journals into one logical group (like work or personal)."),h("br",null,null,-1),k(" With shelves enabled: "),h("br",null,null,-1),h("ul",null,[h("li",null,"Calendar View can be limited to display just one shelf"),h("li",null,"Navigation code block will show decorations from journals on current shelf only")],-1)])),default:f(()=>[d(He,{modelValue:b(o).usesShelves,"onUpdate:modelValue":g[0]||(g[0]=p=>b(o).usesShelves=p)},null,8,["modelValue"])]),_:1}),l.value.length>0?(m(),_("div",Hm,[d(N,{name:"Colliding journal settings",heading:""}),(m(!0),_(U,null,_e(l.value,(p,C)=>(m(),_("div",{key:C}," Journals "+P(p.map(y=>y.name).join(" and "))+" has colliding configurations so that notes will be overriding each other. Consider changing folder or name template in one of that journals. ",1))),128))])):R("",!0),b(o).usesShelves?(m(),E(qp,{key:2,onOrganize:g[1]||(g[1]=p=>n("organize",p)),onEdit:g[2]||(g[2]=p=>n("edit",p)),onBulkAdd:g[3]||(g[3]=p=>n("bulk-add",p))})):(m(),E(Rp,{key:3,onEdit:g[4]||(g[4]=p=>n("edit",p)),onBulkAdd:g[5]||(g[5]=p=>n("bulk-add",p))})),d(N,{name:"Open on startup",description:"Open a note whenever you open this vault?"},{default:f(()=>[d(Ve,{modelValue:b(o).openOnStartup,"onUpdate:modelValue":g[6]||(g[6]=p=>b(o).openOnStartup=p)},{default:f(()=>[g[18]||(g[18]=h("option",{value:""},"Don't open",-1)),(m(!0),_(U,null,_e(b(o).journals,p=>(m(),_("option",{key:p.name,value:p.name},P(p.name),9,zm))),128))]),_:1},8,["modelValue"])]),_:1}),d(xt,{expanded:a.commands,"onUpdate:expanded":g[7]||(g[7]=p=>a.commands=p)},{trigger:f(()=>[d(Dt,{icon:"terminal"},{default:f(()=>[g[19]||(g[19]=k(" Commands ")),h("span",Km,P(b(o).commands.length),1)]),_:1})]),controls:f(()=>[d(ue,{onClick:i},{default:f(()=>g[20]||(g[20]=[k("Add command")])),_:1})]),default:f(()=>[b(o).commands.length===0?(m(),E(N,{key:0},{description:f(()=>g[21]||(g[21]=[k(" No commands configured yet. ")])),_:1})):(m(!0),_(U,{key:1},_e(b(o).commands,(p,C)=>(m(),E(N,{key:C},{name:f(()=>[k(P(p.name),1)]),description:f(()=>[k(P(b(Xa)(p.writeType,p.type)),1)]),default:f(()=>[d(be,{icon:"pencil",tooltip:"Edit",onClick:y=>u(p,C)},null,8,["onClick"]),d(be,{icon:"trash-2",tooltip:"Delete",onClick:y=>c(C)},null,8,["onClick"])]),_:2},1024))),128))]),_:1},8,["expanded"]),d(xt,null,{trigger:f(()=>[d(Dt,{icon:"calendar"},{default:f(()=>g[22]||(g[22]=[k(" Calendar view ")])),_:1})]),default:f(()=>[d(cm),d(N,{name:"Show calendar in"},{default:f(()=>[d(Ve,{modelValue:b(o).calendarViewSettings.leaf,"onUpdate:modelValue":g[8]||(g[8]=p=>b(o).calendarViewSettings.leaf=p)},{default:f(()=>g[23]||(g[23]=[h("option",{value:"left"},"Left sidebar",-1),h("option",{value:"right"},"Right sidebar",-1)])),_:1},8,["modelValue"])]),_:1}),d(N,{name:"Show weeks"},{default:f(()=>[d(Ve,{modelValue:b(o).calendarViewSettings.weeks,"onUpdate:modelValue":g[9]||(g[9]=p=>b(o).calendarViewSettings.weeks=p)},{default:f(()=>g[24]||(g[24]=[h("option",{value:"none"},"Don't show",-1),h("option",{value:"left"},"Before weekdays",-1),h("option",{value:"right"},"After weekdays",-1)])),_:1},8,["modelValue"])]),_:1}),d(N,{name:"Today button"},{default:f(()=>[d(Ve,{modelValue:b(o).calendarViewSettings.todayMode,"onUpdate:modelValue":g[10]||(g[10]=p=>b(o).calendarViewSettings.todayMode=p)},{default:f(()=>g[25]||(g[25]=[h("option",{value:"create"},"Creates today's note if doesn't exist",-1),h("option",{value:"navigate"},"Opens today's note if it exists",-1),h("option",{value:"switch_date"},"Just switch calendar view to current month",-1)])),_:1},8,["modelValue"])]),_:1}),d(N,{name:"Pick date button"},{default:f(()=>[d(Ve,{modelValue:b(o).calendarViewSettings.pickMode,"onUpdate:modelValue":g[11]||(g[11]=p=>b(o).calendarViewSettings.pickMode=p)},{default:f(()=>g[26]||(g[26]=[h("option",{value:"create"},"Creates note for picked date if doesn't exist",-1),h("option",{value:"navigate"},"Opens note for picked date if it exists",-1),h("option",{value:"switch_date"},"Just switch calendar view to month containing corresponding date",-1)])),_:1},8,["modelValue"])]),_:1}),d(N,{name:"Highlighting today",header:""}),d(N,{name:"Text color"},{default:f(()=>[d(Bt,{modelValue:b(o).calendarViewSettings.todayStyle.color,"onUpdate:modelValue":g[12]||(g[12]=p=>b(o).calendarViewSettings.todayStyle.color=p)},null,8,["modelValue"])]),_:1}),d(N,{name:"Background color"},{default:f(()=>[d(Bt,{modelValue:b(o).calendarViewSettings.todayStyle.background,"onUpdate:modelValue":g[13]||(g[13]=p=>b(o).calendarViewSettings.todayStyle.background=p)},null,8,["modelValue"])]),_:1}),d(N,{name:"Highlighting active note",header:""}),d(N,{name:"Text color"},{default:f(()=>[d(Bt,{modelValue:b(o).calendarViewSettings.activeStyle.color,"onUpdate:modelValue":g[14]||(g[14]=p=>b(o).calendarViewSettings.activeStyle.color=p)},null,8,["modelValue"])]),_:1}),d(N,{name:"Background color"},{default:f(()=>[d(Bt,{modelValue:b(o).calendarViewSettings.activeStyle.background,"onUpdate:modelValue":g[15]||(g[15]=p=>b(o).calendarViewSettings.activeStyle.background=p)},null,8,["modelValue"])]),_:1})]),_:1})],64))}}),Qm=ge(Gm,[["__scopeId","data-v-6d5026af"]]);class Xm extends X.AbstractInputSuggest{constructor(t,n){super(t,n),this.textInputElement=n}getSuggestions(t){const n=this.app.vault.getAllLoadedFiles(),o=t.toLocaleLowerCase();return n.filter(a=>{if(!(a instanceof X.TFolder))return!1;const r=a.path.toLocaleLowerCase();return r==="/"?!1:r.includes(o)})}renderSuggestion(t,n){n.setText(t.path)}selectSuggestion(t){this.textInputElement.value=t.path,this.textInputElement.trigger("input"),this.close()}}const Zm=["placeholder","disabled"],lu=I({__name:"FolderInput",props:Ut({placeholder:{},disabled:{type:Boolean}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=Lt(e,"modelValue"),n=fe(),o=yl();let a;return bt(()=>{n.value&&(a=new Xm(o,n.value))}),tl(()=>{a&&a.close()}),(r,l)=>Yn((m(),_("input",{ref_key:"element",ref:n,"onUpdate:modelValue":l[0]||(l[0]=s=>t.value=s),type:"text",placeholder:r.placeholder,disabled:r.disabled,spellcheck:"false"},null,8,Zm)),[[zo,t.value]])}}),ev={},tv={class:"warn"};function nv(e,t){return m(),_("div",tv,t[0]||(t[0]=[k(" You use `W` to format weeks which does not respect custom week settings. This might show week number different from what is displayed in Calendar view."),h("br",null,null,-1),k(" It is recommended to use `w` instead (and change start of week using plugin settings if needed). ")]))}const Za=ge(ev,[["render",nv],["__scopeId","data-v-c2fb32d2"]]),ov={class:"u-pop"},su=I({__name:"DateFormatPreview",props:{format:{}},setup(e){const t=e,n=w(()=>Oe().format(t.format)),o=w(()=>t.format.replaceAll(/\[.*?\]/gi,"").includes("W"));return(a,r)=>(m(),_("div",null,[r[0]||(r[0]=k(" Your current syntax looks like this: ")),h("b",ov,P(n.value),1),o.value?(m(),E(Za,{key:0})):R("",!0)]))}}),av=I({__name:"DisplayVariable",props:{name:{}},setup(e){const t=e,n=w(()=>`{{${t.name}}}`);async function o(a){const r=a.target.textContent;if(r)try{await navigator.clipboard.writeText(r),new X.Notice("Copied to clipboard")}catch(l){console.error(l)}}return(a,r)=>(m(),_("span",{class:"variable",onClick:o},P(n.value),1))}}),_t=ge(av,[["__scopeId","data-v-bca8a59a"]]),rv=I({__name:"DateVariableReference.modal",setup(e){return(t,n)=>(m(),_(U,null,[n[9]||(n[9]=h("div",null,"Date variables support additional modifications.",-1)),n[10]||(n[10]=h("h4",null,"Changing date format",-1)),n[11]||(n[11]=h("p",null," By default date variables are formatted using Default date format defined in journal settings. However you can override it on variable level by adding colon and putting format definition after it. ",-1)),h("p",null,[n[0]||(n[0]=k("For example ")),d(_t,{name:"date:YYYY"}),n[1]||(n[1]=k(" will output only year."))]),n[12]||(n[12]=h("p",null,[h("a",{target:"_blank",href:"https://momentjs.com/docs/#/displaying/format/"},"Formatting reference.")],-1)),n[13]||(n[13]=h("h4",null,"Date manipulation",-1)),n[14]||(n[14]=h("p",null,[k(" You can add or subtract some number of days, weeks, months, quarters or years to date variable by adding "),h("code",null,"+"),k(" or "),h("code",null,"-"),k(" and unit after name variable. ")],-1)),h("p",null,[n[2]||(n[2]=k("For example ")),d(_t,{name:"date+1w"}),n[3]||(n[3]=k(" will add 1 week to date."))]),n[15]||(n[15]=al("<p>Supported units are:</p><ul><li><code>d</code>: days</li><li><code>w</code>: weeks</li><li><code>m</code>: month</li><li><code>q</code>: quarters</li><li><code>y</code>: years</li></ul><h4>Changing date to start or end of period</h4><p> Date can be changed to start or end of period by using <code>&lt;startOf=period&gt;</code> or <code>&lt;endOf=period&gt;</code></p>",4)),h("p",null,[n[4]||(n[4]=k("For example ")),d(_t,{name:"date<startOf=year>"}),n[5]||(n[5]=k(" will change date to January 1st"))]),n[16]||(n[16]=h("p",null,"Supported periods are:",-1)),n[17]||(n[17]=h("ul",null,[h("li",null,"week"),h("li",null,"month"),h("li",null,"quarter"),h("li",null,"year"),h("li",null,"decade")],-1)),n[18]||(n[18]=h("hr",null,null,-1)),n[19]||(n[19]=h("p",null,"All modifications can be used simultaneously",-1)),h("p",null,[n[6]||(n[6]=k(" For example ")),d(_t,{name:"date+1w<startOf=week>:MMM DD, YYYY"}),n[7]||(n[7]=k(" will modify date to first date of next week and format it using ")),n[8]||(n[8]=h("code",null,"MMM DD, YYYY",-1))])],64))}}),lv={class:"grid"},sv=I({__name:"VariableReference.modal",props:{type:{},dateFormat:{}},emits:["close"],setup(e){const t=pe(),n=w(()=>e.type==="custom"?"interval":e.type);function o(){new Me(t,"Date variable modifications",rv,{}).open()}return(a,r)=>(m(),_(U,null,[r[27]||(r[27]=h("p",{class:"hint"},"Clicking on variable will copy it to clipboard.",-1)),h("div",lv,[h("div",null,[d(_t,{name:"journal_name"})]),r[24]||(r[24]=h("div",null,"Name of corresponding journal",-1)),h("div",null,[d(_t,{name:"note_name"})]),r[25]||(r[25]=h("div",null,"Name of current note",-1)),h("div",null,[d(_t,{name:"title"})]),r[26]||(r[26]=h("div",null,"Name of current note (to support core template variable)",-1)),h("div",null,[d(_t,{name:"date"})]),h("div",null,[k(" Note reference date formatted using default format settings ("+P(a.dateFormat)+").",1),r[3]||(r[3]=h("br",null,null,-1)),a.type==="week"?(m(),_(U,{key:0},[r[0]||(r[0]=k(" Is usually the first day of the week. But for weeks that are considered part of next year but have several day of previous year it will be the last day of week")),r[1]||(r[1]=h("br",null,null,-1))],64)):a.type!=="day"?(m(),_(U,{key:1},[k(" Is same as first day of "+P(n.value)+". ",1),r[2]||(r[2]=h("br",null,null,-1))],64)):R("",!0),r[4]||(r[4]=k(" Variable supports ")),h("a",{href:"#",onClick:o},"additional modifications"),r[5]||(r[5]=k(". "))]),a.type!=="day"?(m(),_(U,{key:0},[h("div",null,[d(_t,{name:"start_date"})]),h("div",null,[k(" First day of "+P(n.value)+" formatted using default format settings ("+P(a.dateFormat)+").",1),r[6]||(r[6]=h("br",null,null,-1)),r[7]||(r[7]=k(" Variable supports ")),h("a",{href:"#",onClick:o},"additional modifications"),r[8]||(r[8]=k(". "))]),h("div",null,[d(_t,{name:"end_date"})]),h("div",null,[k(" Last day of "+P(n.value)+" formatted using default format settings ("+P(a.dateFormat)+").",1),r[9]||(r[9]=h("br",null,null,-1)),r[10]||(r[10]=k(" Variable supports ")),h("a",{href:"#",onClick:o},"additional modifications"),r[11]||(r[11]=k(". "))])],64)):R("",!0),h("div",null,[d(_t,{name:"index"})]),h("div",null,"Index of current "+P(a.type==="custom"?"interval":a.type)+" if enabled.",1),h("div",null,[d(_t,{name:"current_date"})]),h("div",null,[r[12]||(r[12]=k(" Current date (in YYYY-MM-DD format)")),r[13]||(r[13]=h("br",null,null,-1)),r[14]||(r[14]=k(" Variable supports ")),h("a",{href:"#",onClick:o},"additional modifications"),r[15]||(r[15]=k(". "))]),h("div",null,[d(_t,{name:"time"})]),h("div",null,[r[16]||(r[16]=k(" Current time (in HH:mm format) ")),r[17]||(r[17]=h("br",null,null,-1)),r[18]||(r[18]=k(" Variable supports ")),h("a",{href:"#",onClick:o},"additional modifications"),r[19]||(r[19]=k(". "))]),h("div",null,[d(_t,{name:"current_time"})]),h("div",null,[r[20]||(r[20]=k(" Current time (in HH:mm format) ")),r[21]||(r[21]=h("br",null,null,-1)),r[22]||(r[22]=k(" Variable supports ")),h("a",{href:"#",onClick:o},"additional modifications"),r[23]||(r[23]=k(". "))])])],64))}}),iv=ge(sv,[["__scopeId","data-v-aaa55dd0"]]),ga=I({__name:"VariableReferenceHint",props:{type:{},dateFormat:{}},setup(e){const t=e,n=pe();function o(){new Me(n,"Variable reference",iv,{type:t.type,dateFormat:t.dateFormat}).open()}return(a,r)=>(m(),_("a",{href:"#",onClick:Qt(o,["prevent"])},"Supported variables."))}}),uv=["value"],dv={key:0},cv={key:1},ps=I({__name:"EditCommand.modal",props:{index:{},writeType:{},command:{},commands:{}},emits:["close","submit"],setup(e,{emit:t}){const n=t,o=new Set(X.getIconIds()),a=w(()=>Pm(e.writeType));function r(ie){return ie?!e.commands.some((L,me)=>L.name===ie&&me!==e.index):!0}const{defineField:l,errorBag:s,handleSubmit:i}=Cn({initialValues:e.command?{...e.command}:{...vm},validationSchema:Sn(wt(At({icon:Xe(),name:wt(Xe(),Gt("Command name is required"),fo(r,"Command name should be unique in journal")),type:yt(["same","next","previous","same_next_week","same_previous_week","same_next_month","same_previous_month","same_next_year","same_previous_year"]),context:yt(["today","open_note","only_open_note"]),showInRibbon:rn(),openMode:yt(["active","tab","split","window"])}),Go(po([["showInRibbon"],["icon"]],ie=>ie.showInRibbon?o.has(ie.icon):!0,"Icon is required if command is added to ribbon."),["icon"])))}),[u,c]=l("name"),[v,g]=l("icon"),[p,C]=l("type"),[y,x]=l("context"),[O,T]=l("showInRibbon"),[Z,M]=l("openMode"),A=w(()=>a.value.map(ie=>({value:ie,label:Xa(e.writeType,ie,y.value)}))),le=i(ie=>{n("submit",ie,e.index),n("close")});return(ie,L)=>(m(),_("form",{onSubmit:L[7]||(L[7]=(...me)=>b(le)&&b(le)(...me))},[d(N,{name:"Name"},{description:f(()=>[L[8]||(L[8]=k(" Journal name will be added to command name automatically. ")),d(tt,{errors:b(s).name},null,8,["errors"])]),default:f(()=>[d(Je,De({modelValue:b(u),"onUpdate:modelValue":L[0]||(L[0]=me=>ce(u)?u.value=me:null)},b(c)),null,16,["modelValue"])]),_:1}),d(N,{name:"Show in ribbon?"},{default:f(()=>[d(He,De({modelValue:b(O),"onUpdate:modelValue":L[1]||(L[1]=me=>ce(O)?O.value=me:null)},b(T)),null,16,["modelValue"])]),_:1}),b(O)?(m(),E(N,{key:0,name:"Icon"},{description:f(()=>[d(tt,{errors:b(s).icon},null,8,["errors"])]),default:f(()=>[d(wl,De({modelValue:b(v),"onUpdate:modelValue":L[2]||(L[2]=me=>ce(v)?v.value=me:null)},b(g)),null,16,["modelValue"])]),_:1})):R("",!0),d(N,{name:"When command runs"},{default:f(()=>[d(Ve,De({modelValue:b(p),"onUpdate:modelValue":L[3]||(L[3]=me=>ce(p)?p.value=me:null)},b(C)),{default:f(()=>[(m(!0),_(U,null,_e(A.value,me=>(m(),_("option",{key:me.value,value:me.value},P(me.label),9,uv))),128))]),_:1},16,["modelValue"])]),_:1}),b(p)!=="same"?(m(),E(N,{key:1,name:"Context"},{description:f(()=>[L[9]||(L[9]=k(" Allows to run command only in specific context.")),L[10]||(L[10]=h("br",null,null,-1)),b(y)=="open_note"?(m(),_("div",dv," If there is an open journal note - its date will be takes as current, otherwise command will run relative to today. ")):R("",!0),b(y)=="only_open_note"?(m(),_("div",cv," Will only run when there is an open journal note using its date as current. ")):R("",!0)]),default:f(()=>[d(Ve,De({modelValue:b(y),"onUpdate:modelValue":L[4]||(L[4]=me=>ce(y)?y.value=me:null)},b(x)),{default:f(()=>L[11]||(L[11]=[h("option",{value:"today"},"Today",-1),h("option",{value:"open_note"},"Currently opened note",-1),h("option",{value:"only_open_note"},"Only currently opened note",-1)])),_:1},16,["modelValue"])]),_:1})):R("",!0),d(N,{name:"Open note"},{default:f(()=>[d(Ve,De({modelValue:b(Z),"onUpdate:modelValue":L[5]||(L[5]=me=>ce(Z)?Z.value=me:null)},b(M)),{default:f(()=>L[12]||(L[12]=[h("option",{value:"active"},"Replacing active note",-1),h("option",{value:"tab"},"In new tab",-1),h("option",{value:"split"},"Adjacent to active note",-1),h("option",{value:"window"},"In popout window",-1)])),_:1},16,["modelValue"])]),_:1}),d(N,null,{default:f(()=>[d(ue,{onClick:L[6]||(L[6]=me=>ie.$emit("close"))},{default:f(()=>L[13]||(L[13]=[k("Cancel")])),_:1}),d(ue,{cta:"",type:"submit"},{default:f(()=>L[14]||(L[14]=[k("Save")])),_:1})]),_:1})],32))}}),fv=I({__name:"DecorationShape",props:{decoration:{}},setup(e){Tn(a=>({"2bb4d278":o.value,"4a068bcc":n.value}));const t=e,n=w(()=>Vt(t.decoration.color)),o=w(()=>`${t.decoration.size??.4}em`);return(a,r)=>(m(),_("div",{class:$t(["shape-decoration",[`shape-${a.decoration.shape}`]])},null,2))}}),pv=ge(fv,[["__scopeId","data-v-19bc1d49"]]),mv=I({__name:"DecorationCorner",props:{decoration:{}},setup(e){Tn(o=>({"2da80fea":n.value}));const t=e,n=w(()=>Vt(t.decoration.color));return(o,a)=>(m(),_("div",{class:$t(["decoration-corner",[o.decoration.placement]])},null,2))}}),vv=ge(mv,[["__scopeId","data-v-a31b2a0a"]]),hv=I({__name:"DecorationIcon",props:{decoration:{}},setup(e){Tn(a=>({"3aca967e":n.value,"7dcba986":o.value}));const t=e,n=w(()=>Vt(t.decoration.color)),o=w(()=>`${t.decoration.size??.5}em`);return(a,r)=>(m(),E(un,{name:a.decoration.icon,class:"icon-decoration"},null,8,["name"]))}}),gv=ge(hv,[["__scopeId","data-v-365c9744"]]),yv={class:"calendar-decoration"},wv={class:"decoration-holder"},bv={class:"decoration-content"},kv=I({__name:"CalendarDecoration",props:{styles:{}},setup(e){Tn(c=>({af79e276:i.value,"7ece15fa":n.value,"60f7b82c":o.value}));const t=e,n=w(()=>{const c=t.styles.find(v=>v.type==="background");return c?Vt(c.color):"inherit"}),o=w(()=>{const c=t.styles.find(v=>v.type==="color");return c?Vt(c.color):"inherit"}),a=w(()=>t.styles.filter(c=>c.type==="corner")),r=w(()=>{const c={left_top:[],left_middle:[],left_bottom:[],center_top:[],center_middle:[],center_bottom:[],right_top:[],right_middle:[],right_bottom:[]};for(const v of t.styles)(v.type==="shape"||v.type==="icon")&&c[`${v.placement_x}_${v.placement_y}`].push(v);return c}),l=w(()=>t.styles.filter(c=>c.type==="border")),s=w(()=>{const c={borderTop:"none",borderBottom:"none",borderLeft:"none",borderRight:"none"};for(const v of l.value)if(v.border==="uniform"){const g=u(v.left);g!=="none"&&(c.borderTop=g,c.borderBottom=g,c.borderLeft=g,c.borderRight=g)}else{const g=u(v.left);g!=="none"&&(c.borderLeft=g);const p=u(v.right);p!=="none"&&(c.borderRight=p);const C=u(v.top);C!=="none"&&(c.borderTop=C);const y=u(v.bottom);y!=="none"&&(c.borderBottom=y)}return c}),i=w(()=>{let c=0,v=0,g=0,p=0,C=0,y=0,x=0,O=0;for(const T of t.styles)if(!(T.type==="background"||T.type==="color")){if(T.type==="border")T.border==="uniform"?(C=Math.max(C,T.left.width),y=Math.max(y,T.left.width),x=Math.max(x,T.right.width),O=Math.max(O,T.bottom.width)):(C=Math.max(C,T.top.width),y=Math.max(y,T.left.width),x=Math.max(x,T.right.width),O=Math.max(O,T.bottom.width));else if(T.type==="shape"||T.type==="icon"){const Z=T.type==="shape"?.4:.5;switch(T.placement_y){case"top":{c=Math.max(c,T.size??Z);break}case"bottom":{p=Math.max(p,T.size??Z);break}}switch(T.placement_x){case"left":{v=Math.max(v,T.size??Z);break}case"right":{g=Math.max(g,T.size??Z);break}}}}return`max(${c+.1}em, ${C+2}px) max(${g+.1}em, ${x+2}px) max(${p+.1}em, ${O+2}px) max(${v+.1}em, ${y+2}px)`});function u(c){return c.show?`${c.width}px ${c.style} ${Vt(c.color)}`:"none"}return(c,v)=>(m(),_("span",yv,[h("span",{class:"decoration-border",style:io(s.value)},null,4),(m(!0),_(U,null,_e(a.value,(g,p)=>(m(),E(vv,{key:p,decoration:g},null,8,["decoration"]))),128)),h("span",wv,[(m(!0),_(U,null,_e(r.value,(g,p)=>(m(),_(U,{key:p},[g.length>0?(m(),_("span",{key:0,class:$t(`place place-${p}`)},[(m(!0),_(U,null,_e(g,(C,y)=>(m(),_(U,{key:y},[C.type==="icon"?(m(),E(gv,{key:0,decoration:C},null,8,["decoration"])):C.type==="shape"?(m(),E(pv,{key:1,decoration:C},null,8,["decoration"])):R("",!0)],64))),128))],2)):R("",!0)],64))),128))]),h("span",bv,[ze(c.$slots,"default",{},void 0,!0)])]))}}),Xo=ge(kv,[["__scopeId","data-v-f9962932"]]);function Cv(e){return Vs()?(Ou(e),!0):!1}const iu=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const _v=Object.prototype.toString,Sv=e=>_v.call(e)==="[object Object]",Jn=()=>{},xv=Dv();function Dv(){var e,t;return iu&&((e=window?.navigator)==null?void 0:e.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((t=window?.navigator)==null?void 0:t.maxTouchPoints)>2&&/iPad|Macintosh/.test(window?.navigator.userAgent))}function _r(e){return Array.isArray(e)?e:[e]}function Vv(e,t,n){return lt(e,t,{...n,immediate:!0})}const uu=iu?window:void 0;function xo(e){var t;const n=je(e);return(t=n?.$el)!=null?t:n}function ko(...e){const t=[],n=()=>{t.forEach(s=>s()),t.length=0},o=(s,i,u,c)=>(s.addEventListener(i,u,c),()=>s.removeEventListener(i,u,c)),a=w(()=>{const s=_r(je(e[0])).filter(i=>i!=null);return s.every(i=>typeof i!="string")?s:void 0}),r=Vv(()=>{var s,i;return[(i=(s=a.value)==null?void 0:s.map(u=>xo(u)))!=null?i:[uu].filter(u=>u!=null),_r(je(a.value?e[1]:e[0])),_r(b(a.value?e[2]:e[1])),je(a.value?e[3]:e[2])]},([s,i,u,c])=>{if(n(),!s?.length||!i?.length||!u?.length)return;const v=Sv(c)?{...c}:c;t.push(...s.flatMap(g=>i.flatMap(p=>u.map(C=>o(g,p,C,v)))))},{flush:"post"}),l=()=>{r(),n()};return Cv(n),l}let ms=!1;function jv(e,t,n={}){const{window:o=uu,ignore:a=[],capture:r=!0,detectIframe:l=!1,controls:s=!1}=n;if(!o)return s?{stop:Jn,cancel:Jn,trigger:Jn}:Jn;if(xv&&!ms){ms=!0;const x={passive:!0};Array.from(o.document.body.children).forEach(O=>ko(O,"click",Jn,x)),ko(o.document.documentElement,"click",Jn,x)}let i=!0;const u=x=>je(a).some(O=>{if(typeof O=="string")return Array.from(o.document.querySelectorAll(O)).some(T=>T===x.target||x.composedPath().includes(T));{const T=xo(O);return T&&(x.target===T||x.composedPath().includes(T))}});function c(x){const O=je(x);return O&&O.$.subTree.shapeFlag===16}function v(x,O){const T=je(x),Z=T.$.subTree&&T.$.subTree.children;return Z==null||!Array.isArray(Z)?!1:Z.some(M=>M.el===O.target||O.composedPath().includes(M.el))}const g=x=>{const O=xo(e);if(x.target!=null&&!(!(O instanceof Element)&&c(e)&&v(e,x))&&!(!O||O===x.target||x.composedPath().includes(O))){if("detail"in x&&x.detail===0&&(i=!u(x)),!i){i=!0;return}t(x)}};let p=!1;const C=[ko(o,"click",x=>{p||(p=!0,setTimeout(()=>{p=!1},0),g(x))},{passive:!0,capture:r}),ko(o,"pointerdown",x=>{const O=xo(e);i=!u(x)&&!!(O&&!x.composedPath().includes(O))},{passive:!0}),l&&ko(o,"blur",x=>{setTimeout(()=>{var O;const T=xo(e);((O=o.document.activeElement)==null?void 0:O.tagName)==="IFRAME"&&!T?.contains(o.document.activeElement)&&t(x)},0)},{passive:!0})].filter(Boolean),y=()=>C.forEach(x=>x());return s?{stop:y,cancel:()=>{i=!1},trigger:x=>{i=!0,g(x),i=!1}}:y}const $v={class:"button-dropdown"},Nv=I({__name:"ButtonDropdown",props:{options:{}},emits:["select"],setup(e,{emit:t}){const n=t,o=fe(!1),a=fe(),r=fe(),l=fe({});jv(r,()=>{o.value=!1});function s(){o.value=!0}function i(u){o.value=!1,n("select",u)}return(u,c)=>(m(),_("div",$v,[d(ue,{ref_key:"buttonRef",ref:a,onClick:s},{default:f(()=>[ze(u.$slots,"default",{},void 0,!0)]),_:3},512),o.value?(m(),_("div",{key:0,ref_key:"popoutRef",ref:r,class:"button-dropdown-popout",style:io(l.value)},[(m(!0),_(U,null,_e(u.options,v=>(m(),E(ue,{key:v.value,flat:"",class:"button-dropdown-option",onClick:g=>i(v.value)},{default:f(()=>[k(P(v.label),1)]),_:2},1032,["onClick"]))),128))],4)):R("",!0)]))}}),Pr=ge(Nv,[["__scopeId","data-v-0f02a50d"]]),Mv={class:"condition-type"},Ov=I({__name:"ConditionNoteName",props:{condition:{}},emits:["change"],setup(e,{emit:t}){const n=e,o=t,a=w({get(){return n.condition.condition},set(l){o("change",{prop:"condition",value:l})}}),r=w({get(){return n.condition.value},set(l){o("change",{prop:"value",value:l})}});return(l,s)=>(m(),_(U,null,[h("span",Mv,P(l.condition.type),1),d(Ve,{modelValue:a.value,"onUpdate:modelValue":s[0]||(s[0]=i=>a.value=i)},{default:f(()=>s[2]||(s[2]=[h("option",{value:"contains"},"contains",-1),h("option",{value:"starts-with"},"starts with",-1),h("option",{value:"ends-with"},"ends with",-1)])),_:1},8,["modelValue"]),d(Je,{modelValue:r.value,"onUpdate:modelValue":s[1]||(s[1]=i=>r.value=i)},null,8,["modelValue"])],64))}}),du=ge(Ov,[["__scopeId","data-v-2b66f529"]]),Av={class:"condition-type"},Tv=I({__name:"ConditionTag",props:{condition:{}},emits:["change"],setup(e,{emit:t}){const n=e,o=t,a=w({get(){return n.condition.condition},set(l){o("change",{prop:"condition",value:l})}}),r=w({get(){return n.condition.value},set(l){o("change",{prop:"value",value:l})}});return(l,s)=>(m(),_(U,null,[h("span",Av,P(l.condition.type),1),d(Ve,{modelValue:a.value,"onUpdate:modelValue":s[0]||(s[0]=i=>a.value=i)},{default:f(()=>s[2]||(s[2]=[h("option",{value:"contains"},"contains",-1),h("option",{value:"starts-with"},"starts with",-1),h("option",{value:"ends-with"},"ends with",-1)])),_:1},8,["modelValue"]),d(Je,{modelValue:r.value,"onUpdate:modelValue":s[1]||(s[1]=i=>r.value=i)},null,8,["modelValue"])],64))}}),cu=ge(Tv,[["__scopeId","data-v-bb471cda"]]),fu=I({__name:"ConditionProperty",props:{condition:{}},emits:["change"],setup(e,{emit:t}){const n=e,o=t,a=w({get(){return n.condition.name},set(i){o("change",{prop:"name",value:i})}}),r=w({get(){return n.condition.condition},set(i){o("change",{prop:"condition",value:i})}}),l=w({get(){return n.condition.value},set(i){o("change",{prop:"value",value:i})}}),s=w(()=>n.condition.condition!=="exists"&&n.condition.condition!=="does-not-exist");return(i,u)=>(m(),_(U,null,[u[4]||(u[4]=k(" Property ")),d(Je,{modelValue:a.value,"onUpdate:modelValue":u[0]||(u[0]=c=>a.value=c)},null,8,["modelValue"]),d(Ve,{modelValue:r.value,"onUpdate:modelValue":u[1]||(u[1]=c=>r.value=c)},{default:f(()=>u[3]||(u[3]=[h("option",{value:"exists"},"exists",-1),h("option",{value:"does-not-exist"},"does not exist",-1),h("option",{value:"eq"},"equals",-1),h("option",{value:"neq"},"does not equal",-1),h("option",{value:"contains"},"contains",-1),h("option",{value:"does-not-contain"},"does not contain",-1),h("option",{value:"starts-with"},"starts with",-1),h("option",{value:"ends-with"},"ends with",-1)])),_:1},8,["modelValue"]),s.value?(m(),E(Je,{key:0,modelValue:l.value,"onUpdate:modelValue":u[2]||(u[2]=c=>l.value=c)},null,8,["modelValue"])):R("",!0)],64))}}),Fv=["value"],Ev=["value"],Pv=I({__name:"ConditionDate",props:{condition:{}},emits:["change"],setup(e,{emit:t}){const n=e,o=t,a=w({get(){return String(n.condition.day)},set(i){o("change",{prop:"day",value:Number.parseInt(i,10)})}}),r=w({get(){return String(n.condition.month)},set(i){o("change",{prop:"month",value:Number.parseInt(i,10)})}}),l=w({get(){return n.condition.year??void 0},set(i){o("change",{prop:"year",value:i??null})}}),s=X.moment().localeData().months();return(i,u)=>(m(),_(U,null,[d(Ve,{modelValue:a.value,"onUpdate:modelValue":u[0]||(u[0]=c=>a.value=c)},{default:f(()=>[u[3]||(u[3]=h("option",{value:-1},"Any day",-1)),(m(),_(U,null,_e(31,c=>h("option",{key:c,value:c},P(c),9,Fv)),64))]),_:1},8,["modelValue"]),d(Ve,{modelValue:r.value,"onUpdate:modelValue":u[1]||(u[1]=c=>r.value=c)},{default:f(()=>[u[4]||(u[4]=h("option",{value:-1},"Any month",-1)),(m(!0),_(U,null,_e(b(s),(c,v)=>(m(),_("option",{key:v,value:v},P(c),9,Ev))),128))]),_:1},8,["modelValue"]),d(ln,{modelValue:l.value,"onUpdate:modelValue":u[2]||(u[2]=c=>l.value=c),placeholder:"Any year"},null,8,["modelValue"])],64))}}),Iv={class:"wrapper"},Rv=["value"],Bv=I({__name:"ConditionWeekday",props:{condition:{}},emits:["change"],setup(e,{emit:t}){const n=e,o=t,a=pe(),r=a.calendarSettings.dow===-1?X.moment().localeData().firstDayOfWeek():a.calendarSettings.dow,l=[];for(let u=r;u<7;++u)l.push(u);for(let u=0;u<r;++u)l.push(u);const s=l.map(u=>({label:X.moment().localeData().weekdaysShort()[u],value:u})),i=fe([...n.condition.weekdays]);return lt(()=>i.value.length,()=>{o("change",{prop:"weekdays",value:[...i.value]})}),(u,c)=>(m(),_("div",Iv,[(m(!0),_(U,null,_e(b(s),({label:v,value:g})=>(m(),_("label",{key:g},[k(P(v)+" ",1),Yn(h("input",{"onUpdate:modelValue":c[0]||(c[0]=p=>i.value=p),type:"checkbox",value:g},null,8,Rv),[[Mc,i.value]])]))),128))]))}}),Yv=ge(Bv,[["__scopeId","data-v-250c50b8"]]),Uv=I({__name:"ConditionOffset",props:{condition:{}},emits:["change"],setup(e,{emit:t}){const n=e,o=t,a=w({get(){return n.condition.offset},set(r){o("change",{prop:"offset",value:r})}});return(r,l)=>(m(),_("div",null,[d(ln,{modelValue:a.value,"onUpdate:modelValue":l[0]||(l[0]=s=>a.value=s)},null,8,["modelValue"]),k(" days from interval "+P(a.value>=0?"start":"end"),1)]))}}),Wv=I({__name:"ConditionTypeOnly",props:{condition:{}},setup(e){const t={"has-note":"There is a note connected to date","has-open-task":"There is no completed task in a note connected to date","all-tasks-completed":"All tasks in the note connected to date have been completed"};return(n,o)=>(m(),_("div",null,P(t[n.condition.type]),1))}}),Lv=I({__name:"ConditionItem",props:{condition:{}},emits:["change"],setup(e){const t=w(()=>{switch(e.condition.type){case"title":return du;case"tag":return cu;case"property":return fu;case"date":return Pv;case"weekday":return Yv;case"offset":return Uv;case"all-tasks-completed":case"has-note":case"has-open-task":return Wv}return null});return(n,o)=>t.value?(m(),E(qo(t.value),{key:0,condition:n.condition,onChange:o[0]||(o[0]=a=>n.$emit("change",a))},null,40,["condition"])):R("",!0)}}),Jv=I({__name:"DecorationBackground",props:{decoration:{}},emits:["change"],setup(e,{emit:t}){const n=e,o=t,a=w({get(){return n.decoration.color},set(r){o("change",{prop:"color",value:r})}});return(r,l)=>(m(),E(N,{name:"Background color"},{default:f(()=>[d(Bt,{modelValue:a.value,"onUpdate:modelValue":l[0]||(l[0]=s=>a.value=s)},null,8,["modelValue"])]),_:1}))}}),qv=I({__name:"DecorationColor",props:{decoration:{}},emits:["change"],setup(e,{emit:t}){const n=e,o=t,a=w({get(){return n.decoration.color},set(r){o("change",{prop:"color",value:r})}});return(r,l)=>(m(),E(N,{name:"Text color"},{default:f(()=>[d(Bt,{modelValue:a.value,"onUpdate:modelValue":l[0]||(l[0]=s=>a.value=s)},null,8,["modelValue"])]),_:1}))}}),Hv=I({__name:"DecorationShape",props:{decoration:{}},emits:["change"],setup(e,{emit:t}){const n=e,o=t,a=w({get(){return n.decoration.shape},set(u){o("change",{prop:"shape",value:u})}}),r=w({get(){return n.decoration.color},set(u){o("change",{prop:"color",value:u})}}),l=w({get(){return n.decoration.placement_x},set(u){o("change",{prop:"placement_x",value:u})}}),s=w({get(){return n.decoration.placement_y},set(u){o("change",{prop:"placement_y",value:u})}}),i=w({get(){return n.decoration.size??.4},set(u){o("change",{prop:"size",value:u})}});return(u,c)=>{const v=Sd("ObsidianNumberInput");return m(),_(U,null,[d(N,{name:"Shape"},{default:f(()=>[d(Ve,{modelValue:a.value,"onUpdate:modelValue":c[0]||(c[0]=g=>a.value=g)},{default:f(()=>c[5]||(c[5]=[h("option",{value:"circle"},"Circle",-1),h("option",{value:"square"},"Square",-1),h("option",{value:"triangle-up"},"Triangle Up",-1),h("option",{value:"triangle-down"},"Triangle Down",-1),h("option",{value:"triangle-left"},"Triangle Left",-1),h("option",{value:"triangle-right"},"Triangle Right",-1)])),_:1},8,["modelValue"])]),_:1}),d(N,{name:"Color"},{default:f(()=>[d(Bt,{modelValue:r.value,"onUpdate:modelValue":c[1]||(c[1]=g=>r.value=g)},null,8,["modelValue"])]),_:1}),d(N,{name:"Size"},{description:f(()=>c[6]||(c[6]=[k(" Shape size is relative to font size where 1 means that a figure is same size as a letter ")])),default:f(()=>[d(v,{modelValue:i.value,"onUpdate:modelValue":c[2]||(c[2]=g=>i.value=g),min:.1,step:.1},null,8,["modelValue"])]),_:1}),d(N,{name:"Placement"},{default:f(()=>[d(Ve,{modelValue:l.value,"onUpdate:modelValue":c[3]||(c[3]=g=>l.value=g)},{default:f(()=>c[7]||(c[7]=[h("option",{value:"left"},"Left",-1),h("option",{value:"center"},"Center",-1),h("option",{value:"right"},"Right",-1)])),_:1},8,["modelValue"]),d(Ve,{modelValue:s.value,"onUpdate:modelValue":c[4]||(c[4]=g=>s.value=g)},{default:f(()=>c[8]||(c[8]=[h("option",{value:"top"},"Top",-1),h("option",{value:"middle"},"Middle",-1),h("option",{value:"bottom"},"Bottom",-1)])),_:1},8,["modelValue"])]),_:1})],64)}}}),zv=I({__name:"DecorationCorner",props:{decoration:{}},emits:["change"],setup(e,{emit:t}){const n=e,o=t,a=w({get(){return n.decoration.placement},set(l){o("change",{prop:"placement",value:l})}}),r=w({get(){return n.decoration.color},set(l){o("change",{prop:"color",value:l})}});return(l,s)=>(m(),_(U,null,[d(N,{name:"Placement"},{default:f(()=>[d(Ve,{modelValue:a.value,"onUpdate:modelValue":s[0]||(s[0]=i=>a.value=i)},{default:f(()=>s[2]||(s[2]=[h("option",{value:"top-left"},"Top Left",-1),h("option",{value:"top-right"},"Top Right",-1),h("option",{value:"bottom-left"},"Bottom Left",-1),h("option",{value:"bottom-right"},"Bottom Right",-1)])),_:1},8,["modelValue"])]),_:1}),d(N,{name:"Color"},{default:f(()=>[d(Bt,{modelValue:r.value,"onUpdate:modelValue":s[1]||(s[1]=i=>r.value=i)},null,8,["modelValue"])]),_:1})],64))}}),Kv=I({__name:"DecorationIcon",props:{decoration:{}},emits:["change"],setup(e,{emit:t}){const n=e,o=t,a=w({get(){return n.decoration.icon},set(u){o("change",{prop:"icon",value:u})}}),r=w({get(){return n.decoration.color},set(u){o("change",{prop:"color",value:u})}}),l=w({get(){return n.decoration.placement_x},set(u){o("change",{prop:"placement_x",value:u})}}),s=w({get(){return n.decoration.placement_y},set(u){o("change",{prop:"placement_y",value:u})}}),i=w({get(){return n.decoration.size??.5},set(u){o("change",{prop:"size",value:u})}});return(u,c)=>(m(),_(U,null,[d(N,{name:"Icon"},{default:f(()=>[d(wl,{modelValue:a.value,"onUpdate:modelValue":c[0]||(c[0]=v=>a.value=v)},null,8,["modelValue"])]),_:1}),d(N,{name:"Color"},{default:f(()=>[d(Bt,{modelValue:r.value,"onUpdate:modelValue":c[1]||(c[1]=v=>r.value=v)},null,8,["modelValue"])]),_:1}),d(N,{name:"Size"},{description:f(()=>c[5]||(c[5]=[k(" Icon size is relative to font size where 1 means that an icon is same size as a letter ")])),default:f(()=>[d(ln,{modelValue:i.value,"onUpdate:modelValue":c[2]||(c[2]=v=>i.value=v),min:.1,step:.1},null,8,["modelValue"])]),_:1}),d(N,{name:"Placement"},{default:f(()=>[d(Ve,{modelValue:l.value,"onUpdate:modelValue":c[3]||(c[3]=v=>l.value=v)},{default:f(()=>c[6]||(c[6]=[h("option",{value:"left"},"Left",-1),h("option",{value:"center"},"Center",-1),h("option",{value:"right"},"Right",-1)])),_:1},8,["modelValue"]),d(Ve,{modelValue:s.value,"onUpdate:modelValue":c[4]||(c[4]=v=>s.value=v)},{default:f(()=>c[7]||(c[7]=[h("option",{value:"top"},"Top",-1),h("option",{value:"middle"},"Middle",-1),h("option",{value:"bottom"},"Bottom",-1)])),_:1},8,["modelValue"])]),_:1})],64))}}),ua=I({__name:"DecorationBorderSide",props:{border:{},label:{}},emits:["change"],setup(e,{emit:t}){const n=e,o=t,a=w({get(){return n.border.show},set(i){o("change",{prop:"show",value:i})}}),r=w({get(){return n.border.width},set(i){o("change",{prop:"width",value:i})}}),l=w({get(){return n.border.color},set(i){o("change",{prop:"color",value:i})}}),s=w({get(){return n.border.style},set(i){o("change",{prop:"style",value:i})}});return(i,u)=>(m(),E(N,{name:i.label},{default:f(()=>[d(He,{modelValue:a.value,"onUpdate:modelValue":u[0]||(u[0]=c=>a.value=c)},null,8,["modelValue"]),a.value?(m(),_(U,{key:0},[d(ln,{modelValue:r.value,"onUpdate:modelValue":u[1]||(u[1]=c=>r.value=c),narrow:"",min:1},null,8,["modelValue"]),d(Ve,{modelValue:s.value,"onUpdate:modelValue":u[2]||(u[2]=c=>s.value=c)},{default:f(()=>u[4]||(u[4]=[h("option",{value:"solid"},"Solid",-1),h("option",{value:"dotted"},"Dotted",-1),h("option",{value:"dashed"},"Dashed",-1),h("option",{value:"groove"},"groove",-1),h("option",{value:"groove"},"ridge",-1)])),_:1},8,["modelValue"]),d(Bt,{modelValue:l.value,"onUpdate:modelValue":u[3]||(u[3]=c=>l.value=c)},null,8,["modelValue"])],64)):R("",!0)]),_:1},8,["name"]))}}),Gv=I({__name:"DecorationBorder",props:{decoration:{}},emits:["change"],setup(e,{emit:t}){const n=e,o=t,a=w({get(){return n.decoration.border},set(l){o("change",{prop:"border",value:l})}});function r(l,s){o("change",{prop:l,value:{...n.decoration[l],[s.prop]:s.value}})}return(l,s)=>(m(),_(U,null,[d(N,{name:"Border appearance"},{default:f(()=>[d(Ve,{modelValue:a.value,"onUpdate:modelValue":s[0]||(s[0]=i=>a.value=i)},{default:f(()=>s[5]||(s[5]=[h("option",{value:"uniform"},"Uniform",-1),h("option",{value:"different"},"Per side setup",-1)])),_:1},8,["modelValue"])]),_:1}),d(ua,{label:a.value==="uniform"?"":"Left",border:l.decoration.left,onChange:s[1]||(s[1]=i=>r("left",i))},null,8,["label","border"]),a.value!=="uniform"?(m(),_(U,{key:0},[d(ua,{label:"Top",border:l.decoration.top,onChange:s[2]||(s[2]=i=>r("top",i))},null,8,["border"]),d(ua,{label:"Right",border:l.decoration.right,onChange:s[3]||(s[3]=i=>r("right",i))},null,8,["border"]),d(ua,{label:"Bottom",border:l.decoration.bottom,onChange:s[4]||(s[4]=i=>r("bottom",i))},null,8,["border"])],64)):R("",!0)],64))}}),Qv=I({__name:"DecorationItem",props:{decoration:{}},emits:["change"],setup(e){const t=w(()=>{switch(e.decoration.type){case"background":return Jv;case"color":return qv;case"shape":return Hv;case"corner":return zv;case"icon":return Kv;case"border":return Gv}return null});return(n,o)=>(m(),E(qo(t.value),{decoration:n.decoration,onChange:o[0]||(o[0]=a=>n.$emit("change",a))},null,40,["decoration"]))}}),Xv={key:0,class:"mode-hint"},Zv={key:0,class:"journal-hint"},eh={class:"preview-container"},th={class:"preview-decoration-block"},nh={key:0,class:"journal-hint"},oh={key:0,class:"separator"},ah=I({__name:"EditDecoration.modal",props:{index:{},writeType:{},decoration:{}},emits:["close","submit"],setup(e,{emit:t}){const n=e,o=t,a=Oe().day(),r=fe(n.decoration?.mode??"and"),l=w(()=>{const M=["title","tag","property","has-note","has-open-task","all-tasks-completed"];return n.writeType==="day"?[...M,"date","weekday"]:n.writeType==="custom"?[...M,"offset"]:M}),s=fe(n.decoration?jt(n.decoration.conditions):[]),i=w(()=>{const M=new Set(s.value.map(({type:A})=>A));return l.value.filter(A=>!M.has(A)).map(A=>({value:A,label:Kp[A]}))});function u(M){s.value.push(jt(eu[M]))}function c(M){s.value.splice(M,1)}function v(M,A){M[A.prop]=A.value}const g=["background","color","shape","corner","icon","border"],p=fe(n.decoration?jt(n.decoration.styles):[]),C=w(()=>{const M=new Set(p.value.map(({type:A})=>A));return g.filter(A=>!M.has(A)).map(A=>({value:A,label:A}))});function y(M){p.value.push(jt(hm[M]))}function x(M){p.value.splice(M,1)}function O(M,A){M[A.prop]=A.value}const T=w(()=>p.value.length>0&&s.value.length>0);function Z(){o("submit",{mode:r.value,conditions:s.value,styles:p.value}),o("close")}return(M,A)=>(m(),_("div",null,[d(N,null,{default:f(()=>[A[3]||(A[3]=k(" Decorate elements in calendar when ")),d(Ve,{modelValue:r.value,"onUpdate:modelValue":A[0]||(A[0]=le=>r.value=le)},{default:f(()=>A[2]||(A[2]=[h("option",{value:"and"},"all conditions are",-1),h("option",{value:"or"},"any conditions is",-1)])),_:1},8,["modelValue"]),A[4]||(A[4]=k(" fulfilled "))]),_:1}),d(N,null,{default:f(()=>[d(Pr,{options:i.value,onSelect:u},{default:f(()=>A[5]||(A[5]=[k("Add condition")])),_:1},8,["options"])]),_:1}),(m(!0),_(U,null,_e(s.value,(le,ie)=>(m(),E(N,{key:ie,class:"condition-wrapper"},{default:f(()=>[ie>0?(m(),_("span",Xv,P(r.value),1)):R("",!0),d(Lv,{condition:le,onChange:L=>v(le,L)},null,8,["condition","onChange"]),d(be,{icon:"trash",onClick:L=>c(ie)},null,8,["onClick"])]),_:2},1024))),128)),s.value.length===0?(m(),_("p",Zv,"No conditions defined yet")):R("",!0),A[9]||(A[9]=h("div",{class:"separator"},null,-1)),h("div",eh,[h("div",null,[h("div",th,[d(Xo,{class:"preview-decoration",styles:p.value},{default:f(()=>[h("span",null,P(b(a)),1)]),_:1},8,["styles"])])]),h("div",null,[d(N,null,{default:f(()=>[d(Pr,{options:C.value,onSelect:y},{default:f(()=>A[6]||(A[6]=[k("Add style")])),_:1},8,["options"])]),_:1}),p.value.length===0?(m(),_("p",nh,"No styles defined yet")):R("",!0),(m(!0),_(U,null,_e(p.value,(le,ie)=>(m(),_("div",{key:ie},[ie>0?(m(),_("div",oh)):R("",!0),d(N,null,{name:f(()=>[k("Decorating "+P(le.type),1)]),default:f(()=>[d(be,{icon:"trash",onClick:L=>x(ie)},null,8,["onClick"])]),_:2},1024),d(Qv,{decoration:le,onChange:L=>O(le,L)},null,8,["decoration","onChange"])]))),128))])]),d(N,{heading:""},{default:f(()=>[d(ue,{onClick:A[1]||(A[1]=le=>M.$emit("close"))},{default:f(()=>A[7]||(A[7]=[k("Cancel")])),_:1}),d(ue,{cta:"",disabled:!T.value,onClick:Z},{default:f(()=>A[8]||(A[8]=[k("Save")])),_:1},8,["disabled"])]),_:1})]))}}),vs=ge(ah,[["__scopeId","data-v-8284eb68"]]),rh=I({__name:"RenameJournal.modal",props:{name:{}},emits:["save","close"],setup(e,{emit:t}){const n=e,o=t,a=pe();function r(g){return g===n.name||g!==n.name&&!a.hasJournal(g)}const{defineField:l,errorBag:s,handleSubmit:i}=Cn({initialValues:{journalName:n.name},validationSchema:Sn(At({journalName:wt(Xe(),Gt("Journal name is required"),fo(r,"Journal name should be unique"))}))}),[u,c]=l("journalName"),v=i(g=>{g.journalName!==n.name&&o("save",g.journalName),o("close")});return(g,p)=>(m(),_("form",{onSubmit:p[2]||(p[2]=Qt((...C)=>b(v)&&b(v)(...C),["prevent"]))},[d(N,{name:"New name"},{description:f(()=>[p[3]||(p[3]=k(" Renaming journal will require restart if you have ribbon icons and/or commands configured. ")),d(tt,{errors:b(s).journalName},null,8,["errors"])]),default:f(()=>[d(Je,De({modelValue:b(u),"onUpdate:modelValue":p[0]||(p[0]=C=>ce(u)?u.value=C:null)},b(c)),null,16,["modelValue"])]),_:1}),d(N,null,{default:f(()=>[d(ue,{onClick:p[1]||(p[1]=C=>g.$emit("close"))},{default:f(()=>p[4]||(p[4]=[k("Cancel")])),_:1}),d(ue,{cta:"",type:"submit"},{default:f(()=>p[5]||(p[5]=[k("Save")])),_:1})]),_:1})],32))}}),lh={d:"day",m:"month",q:"quarter",w:"week",y:"year",h:"hour"};function bl(e){return new RegExp(`{{\\s*(${e})\\s*((?<math>[+-]\\d+)(?<unit>[yqmwd]))?\\s*(<(?<shift>start|end)Of=(?<shiftTo>.*?)>)?\\s*(:(?<format>.*?))?}}`,"gi")}function Sr(e,t,n){if(t.math&&t.unit&&e.add(Number.parseInt(t.math,10),lh[t.unit]),t.shift&&t.shiftTo)if(t.shiftTo==="decade"){const o=t.shift==="start"?e.year()-e.year()%10:e.year()+(9-e.year()%10);e.year(o),t.shift==="start"?e.startOf("year"):e.endOf("year")}else e[t.shift==="start"?"startOf":"endOf"](t.shiftTo);return e.format(t.format??n)}function It(e,t){let n=e??"";for(const[l,s]of Object.entries(t))switch(s.type){case"string":case"number":{n=n.replaceAll(`{{${l}}}`,(s.value??"").toString());break}case"date":{const i=bl(l);n=n.replaceAll(i,(...u)=>{const c=u.at(-1),v=G(s.value);return Sr(v,c,s.defaultFormat)});break}}const o=X.moment(),a="HH:mm";n=n.replaceAll(/{{\s*(time|current_time)\s*((?<math>[+-]\d+)(?<unit>[yqmwd]))?\s*(<(?<shift>start|end)Of=(?<shiftTo>.*?)>)?\s*(:(?<format>.*?))?}}/gi,(...l)=>{const s=l.at(-1),i=o.clone();return Sr(i,s,a)});const r="YYYY-MM-DD";return n=n.replaceAll(/{{\s*(current_date)\s*((?<math>[+-]\d+)(?<unit>[yqmwd]))?\s*(<(?<shift>start|end)Of=(?<shiftTo>.*?)>)?\s*(:(?<format>.*?))?}}/gi,(...l)=>{const s=l.at(-1),i=o.clone();return Sr(i,s,r)}),n}function pu(e,t){if(!t.includes("<%")&&!t.includes("%>"))return!1;const n=e.plugins.getPlugin("templater-obsidian");return!(!n||!("templater"in n)||!("create_running_config"in n.templater)||!("parse_template"in n.templater))}function sh(e){const t=e.plugins.getPlugin("templater-obsidian");return!(!t||!("editor_handler"in t)||!("jump_to_next_cursor_location"in t.editor_handler))}async function ih(e,t){if(!sh(e))return!1;const n=e.plugins.getPlugin("templater-obsidian");return n?(await n.editor_handler.jump_to_next_cursor_location(t,!0),!0):!1}async function uh(e,t,n,o){if(!pu(e,o))return o;const a=e.plugins.getPlugin("templater-obsidian");if(!a)return o;try{const r=a.templater.create_running_config(t,n,0);return await a.templater.parse_template(r,o)}catch(r){console.error("Error applying templater",r)}return o}function Zo(e){const t=on(e),n=pe(),o=w(()=>{const O=t.value;return n.usesShelves&&O?n.journals.filter(T=>T.shelfName===O):n.journals}),a=w(()=>o.value.filter(O=>O.type==="day")),r=w(()=>o.value.filter(O=>O.type==="week")),l=w(()=>o.value.filter(O=>O.type==="month")),s=w(()=>o.value.filter(O=>O.type==="quarter")),i=w(()=>o.value.filter(O=>O.type==="year")),u=w(()=>o.value.filter(O=>O.type==="custom")),c=w(()=>[...Pn(a.value),...Pn(u.value,O=>O.conditions.some(T=>T.type==="offset"))]),v=w(()=>Pn(r.value)),g=w(()=>Pn(l.value)),p=w(()=>Pn(s.value)),C=w(()=>Pn(i.value)),y=w(()=>Pn(u.value,O=>!O.conditions.some(T=>T.type==="offset"))),x={journals:{all:o,day:a,week:r,month:l,quarter:s,year:i,custom:u},decorations:{day:c,week:v,month:g,quarter:p,year:C,custom:y}};return Va(Fi,x),x}function Pn(e,t=()=>!0){return e.flatMap(n=>n.decorations.filter(o=>t(o)).map(o=>({journalName:n.name,decoration:o})))}function ea(){const e=Zn(Fi);if(!e)throw new Error("Shelf data not provided or composable used outside of vue context");return e}function mu(e,t){const n=on(t);return w(()=>e.getJournal(n.value))}function dh(e,t,n){const o=on(t),a=on(n),r=mu(e,a),l=w(()=>o.value&&r.value?r.value.resolveAnchorDate(o.value):null);return{anchorDate:l,noteData:w(()=>!r.value||!l.value?null:e.index.get(r.value.name,l.value))}}function kl(e,t,n){const o=on(n);return w(()=>{const a=b(t);return a?o.value.flatMap(({journalName:r,decoration:l})=>ch(e,a,r,l).value):[]})}function ch(e,t,n,o){const a=on(t),r=on(n),l=on(o);return w(()=>{if(!a.value)return[];const{noteData:s}=dh(e,a,r);return fh(e,a.value,r.value,s.value,l.value.mode,l.value.conditions)?l.value.styles:[]})}function fh(e,t,n,o,a,r){return r.length===0?!1:a==="or"?r.some(l=>hs(e,t,n,o,l)):r.every(l=>hs(e,t,n,o,l))}function hs(e,t,n,o,a){switch(a.type){case"title":return ph(o,a);case"tag":return mh(o,a);case"date":return vh(t,a);case"property":return hh(o,a);case"weekday":return gh(t,a);case"offset":return yh(e,t,n,a);case"all-tasks-completed":return wh(o);case"has-note":return kh(o);case"has-open-task":return bh(o)}return!1}function ph(e,t){if(!e)return!1;const n=e.title.toLowerCase(),o=t.value.toLowerCase();switch(t.condition){case"contains":return n.includes(o);case"starts-with":return n.startsWith(o);case"ends-with":return n.endsWith(o)}return!1}function mh(e,t){if(!e)return!1;const n=e.tags;if(n.length===0)return!1;const o=t.value.toLowerCase();switch(t.condition){case"contains":return n.some(a=>a.toLowerCase().includes(o));case"starts-with":return n.some(a=>a.toLowerCase().startsWith(o));case"ends-with":return n.some(a=>a.toLowerCase().endsWith(o))}}function vh(e,t){const n=G(e);return!(t.day!==-1&&n.date()!==t.day||t.month!==-1&&n.month()!==t.month||t.year&&n.year()!==t.year)}function hh(e,t){if(!e)return!1;const n=e.properties,o=t.name;switch(t.condition){case"exists":return o in n;case"does-not-exist":return!(o in n);case"eq":return n[o]==t.value;case"neq":return n[o]!=t.value;case"contains":return Array.isArray(n[o])?n[o].some(a=>typeof a=="string"&&a.toLowerCase().includes(t.value.toLowerCase())):typeof n[o]=="string"?n[o].toLowerCase().includes(t.value.toLowerCase()):!1;case"does-not-contain":return Array.isArray(n[o])?!n[o].some(a=>typeof a=="string"&&a.toLowerCase().includes(t.value.toLowerCase())):typeof n[o]=="string"?!n[o].toLowerCase().includes(t.value.toLowerCase()):!1;case"starts-with":return Array.isArray(n[o])?n[o].some(a=>typeof a=="string"&&a.toLowerCase().startsWith(t.value.toLowerCase())):typeof n[o]=="string"?n[o].toLowerCase().startsWith(t.value.toLowerCase()):!1;case"ends-with":return Array.isArray(n[o])?n[o].some(a=>typeof a=="string"&&a.toLowerCase().endsWith(t.value.toLowerCase())):typeof n[o]=="string"?n[o].toLowerCase().endsWith(t.value.toLowerCase()):!1}return!1}function gh(e,t){const n=G(e);return t.weekdays.includes(n.day())}function yh(e,t,n,o){const[a,r]=mu(e,n).value?.calculateOffset(t)??[0,0];return o.offset<0?r===o.offset:a===o.offset}function wh(e){if(!e)return!1;const t=e.tasks;return t.length===0?!1:t.every(n=>n.completed)}function bh(e){if(!e)return!1;const t=e.tasks;return t.length===0?!1:t.filter(o=>!o.completed).length>0}function kh(e){return!!e}function vu(e){return X.Platform.isMacOS?e.metaKey:e.ctrlKey}const Ch=I({__name:"NavigationBlockRow",props:{row:{},refDate:{},defaultFormat:{},journal:{}},emits:["navigate","contextmenu","preview"],setup(e,{emit:t}){Tn(M=>({"95d8dac2":l.value,"75e674d4":s.value,"2538825a":i.value,"6a7da4c5":y.value,"5c3f97d8":u.value,bd28d1c6:c.value}));const n=t,o=w(()=>e.journal.resolveAnchorDate(e.refDate)),a=w(()=>e.journal.get(e.refDate)),r=w(()=>It(e.row.template,{date:{type:"date",value:e.refDate,defaultFormat:e.defaultFormat},start_date:{type:"date",value:o.value?e.journal.resolveStartDate(o.value):"",defaultFormat:e.defaultFormat},end_date:{type:"date",value:o.value?e.journal.resolveEndDate(o.value):"",defaultFormat:e.defaultFormat},relative_date:{type:"string",value:o.value?e.journal.resolveRelativeDate(o.value):""},journal_name:{type:"string",value:e.journal.name},index:{type:"number",value:a.value?.index}})),l=w(()=>`${e.row.fontSize}em`),s=w(()=>e.row.bold?"bold":"normal"),i=w(()=>e.row.italic?"italic":"normal"),u=w(()=>Vt(e.row.color)),c=w(()=>Vt(e.row.background)),v=pe(),{journals:g,decorations:p}=ea(),C=w(()=>e.row.link==="none"?!1:e.row.link==="self"?!0:e.row.link==="journal"?!!e.row.journal:g[e.row.link].value.length>0),y=w(()=>C.value?"pointer":"default"),x=kl(v,o,p[e.journal.type]);function O(M){e.row.link!=="none"&&(e.row.link==="journal"?n("navigate","journal",e.refDate,M,e.journal.name):n("navigate",e.row.link,e.refDate,M))}function T(M){e.row.link!=="none"&&(e.row.link==="journal"?n("contextmenu","journal",e.refDate,M,e.journal.name):n("contextmenu",e.row.link,e.refDate,M))}function Z(M){vu(M)&&e.row.link!=="none"&&(e.row.link==="journal"?n("preview","journal",e.refDate,M,e.journal.name):n("preview",e.row.link,e.refDate,M))}return(M,A)=>o.value?(m(),_("div",{key:0,class:"row",onClick:Qt(O,["prevent"]),onContextmenu:T,onPointerenter:Z},[M.row.addDecorations?(m(),E(Xo,{key:0,styles:b(x)},{default:f(()=>[k(P(r.value),1)]),_:1},8,["styles"])):(m(),_(U,{key:1},[k(P(r.value),1)],64))],32)):R("",!0)}}),Ir=ge(Ch,[["__scopeId","data-v-7f6cc67a"]]),_h={key:0},Sh={class:"nav-row-wrapper"},xh={class:"controls"},Dh=I({__name:"NavigationBlockEditPreview",props:{refDate:{},journalName:{},rows:{}},emits:["move-up","move-down","edit","remove"],setup(e){const t=e,n=pe(),o=w(()=>n.getJournal(t.journalName)),a=w(()=>o.value?.shelfName??null);return Zo(a),(r,l)=>o.value?(m(),_("div",_h,[l[0]||(l[0]=h("div",{class:"setting-item-description"},"Hover a row to see controls",-1)),(m(!0),_(U,null,_e(r.rows,(s,i)=>(m(),_("div",{key:i,class:"nav-row"},[h("div",Sh,[d(Ir,{journal:o.value,row:s,"ref-date":r.refDate,"default-format":o.value.dateFormat},null,8,["journal","row","ref-date","default-format"])]),h("div",xh,[i>0?(m(),E(be,{key:0,icon:"arrow-up",tooltip:"Move up",onClick:u=>r.$emit("move-up",i)},null,8,["onClick"])):R("",!0),i<r.rows.length-1?(m(),E(be,{key:1,icon:"arrow-down",tooltip:"Move down",onClick:u=>r.$emit("move-down",i)},null,8,["onClick"])):R("",!0),d(be,{icon:"pencil",tooltip:"Edit",onClick:u=>r.$emit("edit",i)},null,8,["onClick"]),d(be,{icon:"trash-2",tooltip:"Delete",onClick:u=>r.$emit("remove",i)},null,8,["onClick"])])]))),128))])):R("",!0)}}),gs=ge(Dh,[["__scopeId","data-v-eca349a0"]]),Vh={class:"u-pop"},jh=["value"],da=I({__name:"EditNavBlockRow.modal",props:{row:{},currentJournal:{}},emits:["close","submit"],setup(e,{emit:t}){const n=t,o=pe(),a=w(()=>o.getJournal(e.currentJournal)),r=w(()=>a.value?.shelfName??null),{journals:l}=Zo(r),s=w(()=>l.all.value.map(({name:H})=>H).filter(H=>H!==e.currentJournal)),{defineField:i,errorBag:u,handleSubmit:c}=Cn({initialValues:e.row?{template:e.row.template,fontSize:e.row.fontSize,bold:e.row.bold,italic:e.row.italic,link:e.row.link,journal:e.row.journal,color:jt(e.row.color),background:jt(e.row.background),addDecorations:e.row.addDecorations}:{template:"",fontSize:1,bold:!1,italic:!1,link:"none",journal:"",color:{type:"theme",name:"text-normal"},background:{type:"transparent"},addDecorations:!1},validationSchema:Sn(wt(At({template:wt(Xe(),Gt("Template is required")),fontSize:fl(),bold:rn(),italic:rn(),color:cs,background:cs,link:yt(["none","self","journal","day","week","month","quarter","year"]),journal:Xe(),addDecorations:rn()}),Go(po([["link"],["journal"]],H=>H.link==="journal"?!!H.journal:!0,"Please select a journal."),["journal"])))}),[v,g]=i("template"),[p,C]=i("fontSize"),[y,x]=i("bold"),[O,T]=i("italic"),[Z,M]=i("color"),[A,le]=i("background"),[ie,L]=i("link"),[me,We]=i("journal"),[Ae,nt]=i("addDecorations"),pt=w({get(){return Z.value??{type:"transparent"}},set(H){Z.value=H}}),ot=w({get(){return A.value??{type:"transparent"}},set(H){A.value=H}}),qe=w(()=>{if(!a.value)return"";const H=Oe().format(Ce),oe=a.value.resolveAnchorDate(H),$e=a.value?.dateFormat??Ce;return It(v.value??"",{date:{type:"date",value:H,defaultFormat:$e},start_date:{type:"date",value:oe?a.value.resolveStartDate(oe):"",defaultFormat:$e},end_date:{type:"date",value:oe?a.value.resolveEndDate(oe):"",defaultFormat:$e},relative_date:{type:"string",value:oe?a.value.resolveRelativeDate(oe):""},journal_name:{type:"string",value:a.value?.name??""},index:{type:"number",value:a.value?.config.value.index.enabled?1:void 0}})}),ee=w(()=>v.value?[...v.value.matchAll(/{{(.*?):(.*?)}}/gi)].some(([,,oe])=>oe.replaceAll(/\[.*?\]/gi,"").includes("W")):!1),ne=c(H=>{n("submit",H),n("close")});return(H,oe)=>(m(),_("form",{onSubmit:oe[10]||(oe[10]=(...$e)=>b(ne)&&b(ne)(...$e))},[d(N,{name:"Row template"},{description:f(()=>[h("div",null,[a.value?(m(),E(ga,{key:0,type:a.value.type,"date-format":a.value.dateFormat},null,8,["type","date-format"])):R("",!0),oe[11]||(oe[11]=h("br",null,null,-1)),oe[12]||(oe[12]=k(" With resolved variables: ")),h("b",Vh,P(qe.value),1)]),ee.value?(m(),E(Za,{key:0})):R("",!0),d(tt,{errors:b(u).template},null,8,["errors"])]),default:f(()=>[d(Je,De({modelValue:b(v),"onUpdate:modelValue":oe[0]||(oe[0]=$e=>ce(v)?v.value=$e:null)},b(g)),null,16,["modelValue"])]),_:1}),d(N,{name:"Font size"},{description:f(()=>[d(tt,{errors:b(u).fontSize},null,8,["errors"])]),default:f(()=>[d(ln,De({modelValue:b(p),"onUpdate:modelValue":oe[1]||(oe[1]=$e=>ce(p)?p.value=$e:null)},b(C),{min:.5,step:.1}),null,16,["modelValue"])]),_:1}),d(N,{name:"Bold"},{default:f(()=>[d(He,De({modelValue:b(y),"onUpdate:modelValue":oe[2]||(oe[2]=$e=>ce(y)?y.value=$e:null)},b(x)),null,16,["modelValue"])]),_:1}),d(N,{name:"Italic"},{default:f(()=>[d(He,De({modelValue:b(O),"onUpdate:modelValue":oe[3]||(oe[3]=$e=>ce(O)?O.value=$e:null)},b(T)),null,16,["modelValue"])]),_:1}),d(N,{name:"Text color"},{description:f(()=>[d(tt,{errors:b(u).color},null,8,["errors"])]),default:f(()=>[d(Bt,De({modelValue:pt.value,"onUpdate:modelValue":oe[4]||(oe[4]=$e=>pt.value=$e)},b(M)),null,16,["modelValue"])]),_:1}),d(N,{name:"Background color"},{default:f(()=>[d(Bt,De({modelValue:ot.value,"onUpdate:modelValue":oe[5]||(oe[5]=$e=>ot.value=$e)},b(le)),null,16,["modelValue"])]),_:1}),d(N,{name:"Link"},{default:f(()=>[d(Ve,De({modelValue:b(ie),"onUpdate:modelValue":oe[6]||(oe[6]=$e=>ce(ie)?ie.value=$e:null)},b(L)),{default:f(()=>oe[13]||(oe[13]=[h("option",{value:"none"},"None",-1),h("option",{value:"self"},"Self",-1),h("option",{value:"journal"},"Journal",-1),h("option",{value:"day"},"Day",-1),h("option",{value:"week"},"Week",-1),h("option",{value:"month"},"Month",-1),h("option",{value:"quarter"},"Quarter",-1),h("option",{value:"year"},"Year",-1)])),_:1},16,["modelValue"])]),_:1}),b(ie)==="journal"?(m(),E(N,{key:0,name:"Journal"},{description:f(()=>[d(tt,{errors:b(u).journal},null,8,["errors"])]),default:f(()=>[d(Ve,De({modelValue:b(me),"onUpdate:modelValue":oe[7]||(oe[7]=$e=>ce(me)?me.value=$e:null)},b(We)),{default:f(()=>[(m(!0),_(U,null,_e(s.value,$e=>(m(),_("option",{key:$e,value:$e},P($e),9,jh))),128))]),_:1},16,["modelValue"])]),_:1})):R("",!0),d(N,{name:"Add decorations"},{default:f(()=>[d(He,De({modelValue:b(Ae),"onUpdate:modelValue":oe[8]||(oe[8]=$e=>ce(Ae)?Ae.value=$e:null)},b(nt)),null,16,["modelValue"])]),_:1}),d(N,null,{default:f(()=>[d(ue,{onClick:oe[9]||(oe[9]=$e=>H.$emit("close"))},{default:f(()=>oe[14]||(oe[14]=[k("Cancel")])),_:1}),d(ue,{cta:"",type:"submit"},{default:f(()=>oe[15]||(oe[15]=[k("Save")])),_:1})]),_:1})],32))}}),$h=["value"],Nh=I({__name:"JournalShelf.modal",props:{currentShelf:{}},emits:["close","save"],setup(e,{emit:t}){const n=t,o=pe(),a=fe(e.currentShelf);function r(){a.value!==e.currentShelf&&n("save",a.value),n("close")}return(l,s)=>(m(),_(U,null,[d(N,{name:"Shelf"},{default:f(()=>[d(Ve,{modelValue:a.value,"onUpdate:modelValue":s[0]||(s[0]=i=>a.value=i)},{default:f(()=>[s[2]||(s[2]=h("option",{value:""},"Not on a shelf",-1)),(m(!0),_(U,null,_e(b(o).shelves,i=>(m(),_("option",{key:i.name,value:i.name},P(i.name),9,$h))),128))]),_:1},8,["modelValue"])]),_:1}),d(N,null,{default:f(()=>[d(ue,{onClick:s[1]||(s[1]=i=>l.$emit("close"))},{default:f(()=>s[3]||(s[3]=[k("Cancel")])),_:1}),d(ue,{cta:"",onClick:r},{default:f(()=>s[4]||(s[4]=[k("Save")])),_:1})]),_:1})],64))}}),Mh={class:"u-pop path-preview"},Oh=I({__name:"PathPreview",props:{journalName:{}},setup(e){const t=pe(),n=w(()=>t.getJournal(e.journalName)),o=w(()=>({journal:e.journalName,date:Oe().format("YYYY-MM-DD")})),a=w(()=>n.value?n.value.getConfiguredPathData(o.value)[0]+"/":""),r=w(()=>{const l=n.value?.config.value.folder;if(!l)return!1;const s=bl("(.*?)");return[...l.matchAll(s)].some(i=>i.groups?.format?.replaceAll(/\[.*?\]/gi,"").includes("W"))});return(l,s)=>(m(),_("div",null,[s[0]||(s[0]=k(" Folder with resolved variables: ")),h("b",Mh,P(a.value),1),r.value?(m(),E(Za,{key:0})):R("",!0)]))}}),Ah=ge(Oh,[["__scopeId","data-v-d4817209"]]),Th=I({__name:"DisplayCodeBlock",props:{name:{}},setup(e){async function t(n){const o=n.target.innerText;if(o)try{await navigator.clipboard.writeText(o),new X.Notice("Copied to clipboard")}catch(a){console.error(a)}}return(n,o)=>(m(),_("div",{class:"code-block-sample",onClick:t},[k(" ```"+P(n.name),1),o[1]||(o[1]=h("br",null,null,-1)),n.$slots.default?(m(),_(U,{key:0},[ze(n.$slots,"default",{},void 0,!0),o[0]||(o[0]=h("br",null,null,-1))],64)):R("",!0),o[2]||(o[2]=k("``` "))]))}}),Co=ge(Th,[["__scopeId","data-v-2c805b7f"]]);function er(e){const t=on(e),n=pe();return w(()=>{const o=t.value;return o?n.index.getForPathComputed(o).value:null})}function Uo(e){return X.Keymap.isModifier(e,"Mod")||e.button===1?"tab":"active"}const Fh={key:0,class:"nav-block"},Eh=I({__name:"NavigationBlock",props:{refDate:{},journalName:{},rows:{},preventNavigation:{type:Boolean},decorateBlock:{type:Boolean}},emits:["move-up","move-down","edit","remove"],setup(e){const t=pe(),n=w(()=>t.getJournal(e.journalName)),o=w(()=>n.value?.shelfName??null),{journals:a,decorations:r}=Zo(o),l=w(()=>n.value?r[n.value.type].value.filter(v=>v.journalName===e.journalName):[]),s=kl(t,e.refDate,l);async function i(v,g,p,C){if(!e.preventNavigation&&v!=="none")if(v==="self"){const y=n.value?.get(e.refDate);y&&await n.value?.open(y)}else if(v==="journal"){if(!C)return;await $n(t,g,C)}else{const y=a[v].value.map(x=>x.name);await Yo(t,g,y,!1,p&&Uo(p),p)}}function u(v,g,p,C){if(!e.preventNavigation&&v!=="none")if(v==="self"){const y=n.value?.get(e.refDate);y&&"path"in y&&t.appManager.showContextMenu(y.path,p)}else if(v==="journal"){if(!C)return;const y=t.getJournal(C);if(!y)return;const x=y.get(g);x&&"path"in x&&t.appManager.showContextMenu(x.path,p)}else{const y=a[v].value.map(x=>x.get(g)).filter(x=>!!x&&"path"in x);if(y.length===0)return;if(y.length===1)t.appManager.showContextMenu(y[0].path,p);else{const x=new X.Menu;for(const O of y)x.addItem(T=>{T.setTitle(O.path).onClick(()=>{t.appManager.showContextMenu(O.path,p)})});x.showAtMouseEvent(p)}}}function c(v,g,p,C){if(!e.preventNavigation&&v!=="none")if(v==="self"){const y=n.value?.get(e.refDate);y&&"path"in y&&t.appManager.showPreview(y.path,p)}else if(v==="journal"){if(!C)return;const y=t.getJournal(C);if(!y)return;const x=y.get(g);x&&"path"in x&&t.appManager.showPreview(x.path,p)}else{const y=a[v].value.map(x=>x.get(g)).find(x=>!!x&&"path"in x);if(!y)return;t.appManager.showPreview(y.path,p)}}return(v,g)=>n.value?(m(),_("div",Fh,[v.decorateBlock?(m(),E(Xo,{key:0,styles:b(s),class:"nav-block"},{default:f(()=>[(m(!0),_(U,null,_e(v.rows,(p,C)=>(m(),_("div",{key:C},[d(Ir,{journal:n.value,row:p,"ref-date":v.refDate,"default-format":n.value.dateFormat,onNavigate:i,onContextmenu:u,onPreview:c},null,8,["journal","row","ref-date","default-format"])]))),128))]),_:1},8,["styles"])):(m(!0),_(U,{key:1},_e(v.rows,(p,C)=>(m(),_("div",{key:C},[d(Ir,{journal:n.value,row:p,"ref-date":v.refDate,"default-format":n.value.dateFormat,onNavigate:i,onContextmenu:u,onPreview:c},null,8,["journal","row","ref-date","default-format"])]))),128))])):R("",!0)}}),ya=ge(Eh,[["__scopeId","data-v-cfdddb2d"]]),Ph={key:0,class:"nav-view"},Ih={key:0,class:"nav-block-relative"},Rh={key:1,class:"nav-block-relative"},Bh={key:2,class:"nav-block-relative"},Yh={key:3,class:"nav-block-relative"},Uh={key:1},Wh=I({__name:"NavigationCodeBlock",props:{path:{},preventNavigation:{type:Boolean}},setup(e){const t=e,n=pe(),o=er(t.path),a=w(()=>o.value?n.getJournal(o.value.journal):null),r=w(()=>{if(!o.value||!a.value)return null;const i=a.value.navBlock.type==="existing";return a.value.next(o.value.date,i)}),l=w(()=>{if(!o.value||!a.value)return null;const i=a.value.navBlock.type==="existing";return a.value.previous(o.value.date,i)});function s(i){t.preventNavigation||$n(n,i.date,i.journal).catch(console.error)}return(i,u)=>b(o)&&a.value?(m(),_("div",Ph,[l.value?(m(),_("div",Ih,[d(ya,{rows:a.value.navBlock.rows,"ref-date":l.value.date,"journal-name":b(o).journal,"prevent-navigation":i.preventNavigation,"decorate-block":a.value.navBlock.decorateWholeBlock},null,8,["rows","ref-date","journal-name","prevent-navigation","decorate-block"]),d(be,{icon:"arrow-left",class:"nav-prev",onClick:u[0]||(u[0]=c=>s(l.value))})])):(m(),_("div",Rh)),d(ya,{rows:a.value.navBlock.rows,class:"nav-block","ref-date":b(o).date,"journal-name":b(o).journal,"prevent-navigation":i.preventNavigation,"decorate-block":a.value.navBlock.decorateWholeBlock},null,8,["rows","ref-date","journal-name","prevent-navigation","decorate-block"]),r.value?(m(),_("div",Bh,[d(be,{icon:"arrow-right",class:"nav-next",onClick:u[1]||(u[1]=c=>s(r.value))}),d(ya,{rows:a.value.navBlock.rows,"ref-date":r.value.date,"journal-name":b(o).journal,"prevent-navigation":i.preventNavigation,"decorate-block":a.value.navBlock.decorateWholeBlock},null,8,["rows","ref-date","journal-name","prevent-navigation","decorate-block"])])):(m(),_("div",Yh))])):(m(),_("div",Uh,"Note is not connected to a journal"))}}),hu=ge(Wh,[["__scopeId","data-v-3fb7392e"]]),gu=["week","month","quarter","calendar"];function Lh(e){const t=fe([]),n=pe();return uo(()=>{const o=G(e.value);if(!o.isValid())return;n.calendarSettings.dow;const a=Oe(),r=o.clone().startOf("week"),l=o.clone().endOf("week"),s=n.calendarViewSettings.weeks||"left",i=[];s==="left"&&i.push({date:r.format("[W]w"),key:r.format(Ce),outside:!1,isWeekNumber:!0,disabled:!1});const u=r.clone();for(;u.isSameOrBefore(l);)i.push({date:u.format("D"),key:u.format(Ce),today:u.isSame(a,"day"),outside:!o.isSame(u,"month"),isWeekNumber:!1,disabled:!1}),u.add(1,"day");s==="right"&&i.push({date:r.format("[W]w"),key:r.format(Ce),outside:!1,isWeekNumber:!0,disabled:!1}),t.value=i}),{grid:t}}function tr(e){return w(()=>e.activeNote?e.index.getForPathComputed(e.activeNote).value:null)}const Jh=I({__name:"NotesCalendarButton",props:{date:{},type:{},inactive:{type:Boolean}},setup(e){const t=pe(),{journals:n,decorations:o}=ea(),a=w(()=>!e.inactive&&n[e.type].value.length>0),r=w(()=>Ei[e.type]),l=w(()=>e.date),s=kl(t,l,o[e.type]);function i(v){a.value&&Yo(t,e.date,n[e.type].value.map(g=>g.name),!1,Uo(v),v).catch(console.error)}function u(v){const g=[];for(const p of n[e.type].value){const C=p.get(e.date);C&&"path"in C&&g.push(C)}if(g.length!==0)if(g.length===1)t.appManager.showContextMenu(g[0].path,v);else{const p=new X.Menu;for(const C of g)p.addItem(y=>{y.setTitle(C.path).onClick(()=>{t.appManager.showContextMenu(C.path,v)})});p.showAtMouseEvent(v)}}function c(v){if(!vu(v)||!a.value)return;const g=[];for(const C of n[e.type].value){const y=C.get(e.date);y&&"path"in y&&g.push(y)}const[p]=g;p&&t.appManager.showPreview(p.path,v)}return(v,g)=>(m(),E(Qo,{class:"calendar-button",clickable:a.value,onClick:i,onContextmenu:u,onPointerenter:c},{default:f(()=>[v.inactive?R("",!0):(m(),E(Xo,{key:0,styles:b(s)},{default:f(()=>[d(ro,{date:v.date,format:r.value},null,8,["date","format"])]),_:1},8,["styles"]))]),_:1},8,["clickable"]))}}),qt=ge(Jh,[["__scopeId","data-v-a95a7182"]]),qh=I({__name:"NotesWeekView",props:{refDate:{}},setup(e){const t=pe(),n=w(()=>t.calendarViewSettings.weeks==="none"?7:8),{journals:o}=ea(),a=w(()=>o.quarter.value.length>0),{grid:r}=Lh(w(()=>e.refDate)),l=w(()=>G(e.refDate).startOf("month").format(Ce)),s=w(()=>G(e.refDate).startOf("quarter").format(Ce)),i=w(()=>G(e.refDate).startOf("year").format(Ce)),u=tr(t),c=w(()=>u.value?t.getJournal(u.value.journal):null),v=w(()=>c.value?.type==="day"),g=w(()=>c.value?.type==="week"),p=w(()=>c.value?.type==="month"&&u.value?.date===l.value),C=w(()=>c.value?.type==="quarter"&&u.value?.date===s.value),y=w(()=>c.value?.type==="year"&&u.value?.date===i.value);return(x,O)=>(m(),E(mo,{columns:n.value},{header:f(()=>[ze(x.$slots,"header",{},()=>[d(qt,{date:x.refDate,type:"month","data-selected":p.value?"":null},null,8,["date","data-selected"]),a.value?(m(),E(qt,{key:0,date:x.refDate,type:"quarter","data-selected":C.value?"":null},null,8,["date","data-selected"])):R("",!0),d(qt,{date:x.refDate,type:"year","data-selected":y.value?"":null},null,8,["date","data-selected"])],!0)]),default:f(()=>[d(pl),(m(!0),_(U,null,_e(b(r),T=>(m(),E(qt,{key:T.key+(T.isWeekNumber?"week":"day"),class:$t({"week-number":T.isWeekNumber}),date:T.key,type:T.isWeekNumber?"week":"day","data-outside":T.outside||null,"data-today":T.today||null,"data-selected":b(u)&&(T.isWeekNumber&&g.value||!T.isWeekNumber&&v.value)&&b(u)?.date===T.key?"":null},null,8,["class","date","type","data-outside","data-today","data-selected"]))),128))]),_:3},8,["columns"]))}}),Hh=ge(qh,[["__scopeId","data-v-307b41ae"]]),zh={class:"timeline-week"},Kh=I({__name:"TimelineWeek",props:{noteData:{}},setup(e){const t=e,n=w(()=>t.noteData?t.noteData.date:Oe().format("YYYY-MM-DD"));return(o,a)=>(m(),_("div",zh,[d(Hh,{"ref-date":n.value},null,8,["ref-date"])]))}}),Gh=ge(Kh,[["__scopeId","data-v-1d4774b6"]]),Qh=I({__name:"NotesMonthView",props:{refDate:{},hideOutsideDates:{type:Boolean}},emits:["select","selectWeek"],setup(e){const t=pe(),n=w(()=>t.calendarViewSettings.weeks==="none"?7:8),{journals:o}=ea(),a=w(()=>o.quarter.value.length>0),{grid:r}=Qi(w(()=>e.refDate)),l=w(()=>G(e.refDate).startOf("month").format(Ce)),s=w(()=>G(e.refDate).startOf("quarter").format(Ce)),i=w(()=>G(e.refDate).startOf("year").format(Ce)),u=tr(t),c=w(()=>u.value?t.getJournal(u.value.journal):null),v=w(()=>c.value?.type==="day"),g=w(()=>c.value?.type==="week"),p=w(()=>c.value?.type==="month"&&u.value?.date===l.value),C=w(()=>c.value?.type==="quarter"&&u.value?.date===s.value),y=w(()=>c.value?.type==="year"&&u.value?.date===i.value);return(x,O)=>(m(),E(mo,{class:"month-grid",columns:n.value,"compact-first-line":""},{header:f(()=>[ze(x.$slots,"header",{},()=>[d(qt,{date:x.refDate,type:"month","data-selected":p.value?"":null},null,8,["date","data-selected"]),a.value?(m(),E(qt,{key:0,date:x.refDate,type:"quarter","data-selected":C.value?"":null},null,8,["date","data-selected"])):R("",!0),d(qt,{date:x.refDate,type:"year","data-selected":y.value?"":null},null,8,["date","data-selected"])],!0)]),default:f(()=>[d(pl),(m(!0),_(U,null,_e(b(r),T=>(m(),E(qt,{key:T.key+(T.isWeekNumber?"week":"day"),class:$t({"week-number":T.isWeekNumber}),date:T.key,type:T.isWeekNumber?"week":"day","data-outside":T.outside||null,"data-today":T.today||null,inactive:x.hideOutsideDates&&T.outside,"data-selected":b(u)&&(T.isWeekNumber&&g.value||!T.isWeekNumber&&v.value)&&b(u)?.date===T.key?"":null},null,8,["class","date","type","data-outside","data-today","inactive","data-selected"]))),128))]),_:3},8,["columns"]))}}),nr=ge(Qh,[["__scopeId","data-v-34fdf9ce"]]),Xh={class:"timeline-month"},Zh=I({__name:"TimelineMonth",props:{noteData:{}},setup(e){const t=w(()=>e.noteData?e.noteData.date:Oe().format("YYYY-MM-DD"));return(n,o)=>(m(),_("div",Xh,[d(nr,{"ref-date":t.value},null,8,["ref-date"])]))}}),eg=ge(Zh,[["__scopeId","data-v-889faf70"]]),tg={class:"timeline-quarter-container"},ng={class:"timeline-quarter"},og=I({__name:"TimelineQuarter",props:{noteData:{}},setup(e){const t=e,n=w(()=>t.noteData?t.noteData.date:Oe().format("YYYY-MM-DD")),o=w(()=>G(n.value)),a=w(()=>{const r=o.value.clone().startOf("quarter");return[r.clone(),r.clone().add(1,"month"),r.clone().add(2,"month")]});return(r,l)=>(m(),_("div",tg,[h("div",ng,[(m(!0),_(U,null,_e(a.value,s=>(m(),E(nr,{key:s.format("YYYY-MM-DD"),"ref-date":s.format("YYYY-MM-DD"),"hide-outside-dates":""},null,8,["ref-date"]))),128))])]))}}),ag=ge(og,[["__scopeId","data-v-d9d5c81f"]]),rg={class:"timeline-calendar-container"},lg={class:"timeline-calendar"},sg=I({__name:"TimelineCalendar",props:{noteData:{}},setup(e){const t=e,n=w(()=>t.noteData?t.noteData.date:Oe().format("YYYY-MM-DD")),o=w(()=>G(n.value)),a=w(()=>{const r=o.value.clone().startOf("year");return Array.from({length:12}).map((l,s)=>r.clone().add(s,"month"))});return(r,l)=>(m(),_("div",rg,[h("div",lg,[(m(!0),_(U,null,_e(a.value,s=>(m(),E(nr,{key:s.format("YYYY-MM-DD"),"ref-date":s.format("YYYY-MM-DD"),"hide-outside-dates":""},null,8,["ref-date"]))),128))])]))}}),ig=ge(sg,[["__scopeId","data-v-b317befd"]]),ug={key:1},yu=I({__name:"TimelineCodeBlock",props:{mode:{},path:{}},setup(e){const t=e,n=pe(),o=er(t.path),a=w(()=>o.value?n.getJournal(o.value.journal):null),r=w(()=>a.value?.shelfName??null);Zo(r);const l=w(()=>{if(t.mode&&gu.includes(t.mode))return t.mode;if(a.value)switch(a.value.type){case"day":case"week":return"week";case"month":return"month";case"quarter":return"quarter";case"year":return"calendar"}return"week"}),s=w(()=>{switch(l.value){case"week":return Gh;case"month":return eg;case"quarter":return ag;case"calendar":return ig}return null});return(i,u)=>(m(),_("div",null,[s.value?(m(),E(qo(s.value),{key:0,"note-data":b(o)},null,8,["note-data"])):(m(),_("div",ug,"No component"))]))}}),dg={class:"home-code-block"},cg={key:0},fg=["onClick"],pg=I({__name:"HomeCodeBlock",props:{path:{},config:{}},setup(e){Tn(u=>({"8c1763ac":t.value}));const t=w(()=>e.config.scale??1),n=er(e.path),o=pe(),a=w(()=>n.value?o.getJournal(n.value.journal):null),r=w(()=>e.config.shelf||a.value?.shelfName),l=w(()=>o.journals),s=w(()=>{const u=[],c=Oe().format(Ce);for(const v of e.config.show){const g=l.value.filter(p=>p.type===v&&(!r.value||p.shelfName===r.value));if(g.length!==0)if(v==="custom")for(const p of g)u.push({type:v,text:p.getNoteNameForDate(c),journalNames:[p.name]});else u.push({type:v,text:Oi(v,Oe().format("YYYY-MM-DD")),journalNames:g.map(p=>p.name)})}return u});function i(u,c,v){const g=Oe().format("YYYY-MM-DD");u!=="custom"&&u===a.value?.type?Yo(o,g,[a.value.name],!1,Uo(v),v).catch(console.error):Yo(o,g,c,!1,Uo(v),v).catch(console.error)}return(u,c)=>(m(),_("div",dg,[(m(!0),_(U,null,_e(s.value,(v,g)=>(m(),_(U,{key:v.text},[g>0?(m(),_("span",cg,P(u.config.separator),1)):R("",!0),h("a",{href:"#",onClick:Qt(p=>i(v.type,v.journalNames,p),["stop","prevent"])},P(v.text),9,fg)],64))),128))]))}}),Rr=ge(pg,[["__scopeId","data-v-db98ec2a"]]),mg={},vg={class:"journal-divider"};function hg(e,t){return m(),_("div",vg)}const en=ge(mg,[["render",hg],["__scopeId","data-v-f48008b5"]]);function gg(e){const t=pe(),n=`@fake@/${Date.now()}-${Math.random()}`,o=on(e),a=w(()=>t.getJournal(o.value)),r=Oe().format("YYYY-MM-DD");return t.index.registerPathData(n,{path:n,title:"Fake Note",journal:o.value,date:a.value?.resolveAnchorDate(r)??r,tags:[],properties:{},tasks:[]}),Wa(()=>{t.index.unregisterPathData(n)}),n}const yg=`show: 
  - day 
  - month
scale: 2
separator: " | "`,wg=I({__name:"CodeBlockReference.modal",props:{type:{},journalName:{}},setup(e){const t=gg(e.journalName);return(n,o)=>(m(),_("div",null,[o[3]||(o[3]=h("p",{class:"hint"},"Click on a code block to copy it to your clipboard.",-1)),d(Co,{name:"journal-nav"}),o[4]||(o[4]=h("p",null,"Navigation code block helps navigating relative to current note.",-1)),h("p",null,[o[0]||(o[0]=k(" It is fully customizable on journal level.")),o[1]||(o[1]=h("br",null,null,-1)),k(" Current configuration for "+P(n.journalName)+" journal looks like this: ",1)]),d(en),d(hu,{path:b(t)},null,8,["path"]),d(en),o[5]||(o[5]=h("p",null,[k(" Plugin still supports older code blocks "),h("code",null,"calendar-nav"),k(" and "),h("code",null,"journal-nav"),k(" that function just as aliases to "),h("code",null,"journal-nav"),k(". ")],-1)),d(en),d(Co,{name:"calendar-timeline"}),o[6]||(o[6]=h("p",null,"Timeline code block helps navigating within bigger time periods.",-1)),h("p",null,"Default timeline for "+P(n.journalName)+" journal looks like this:",1),d(en),d(yu,{path:b(t)},null,8,["path"]),d(en),o[7]||(o[7]=h("p",null,"You can change default timeline mode by adding mode prop to code block.",-1)),d(Co,{name:"calendar-timeline"},{default:f(()=>o[2]||(o[2]=[k("mode: month")])),_:1}),o[8]||(o[8]=h("p",null,"Supported modes are:",-1)),h("ul",null,[(m(!0),_(U,null,_e(b(gu),a=>(m(),_("li",{key:a},P(a),1))),128))]),d(en),d(Co,{name:"journals-home"}),o[9]||(o[9]=h("p",null,"Home block displays links to current notes in journals.",-1)),o[10]||(o[10]=h("p",null,"It looks like this by default:",-1)),d(en),d(Rr,{path:b(t),config:{show:["day"],separator:" • ",scale:1}},null,8,["path"]),d(en),o[11]||(o[11]=al("<p data-v-30e980f3>Supported settings:</p><ul data-v-30e980f3><li data-v-30e980f3><code data-v-30e980f3>show</code> - controls what journals are displayed (by default only Today link is displayed). Supported values are - <code data-v-30e980f3>day</code>, <code data-v-30e980f3>week</code>, <code data-v-30e980f3>month</code>, <code data-v-30e980f3>quarter</code>, <code data-v-30e980f3>year</code>, <code data-v-30e980f3>custom</code>. </li><li data-v-30e980f3><code data-v-30e980f3>separator</code> - used to separate multiple links. Default - <code data-v-30e980f3> • </code>.</li><li data-v-30e980f3><code data-v-30e980f3>scale</code> - allows to increase size of links. Used as multiplier of text size - so to have links twice as large use <code data-v-30e980f3>scale: 2</code>. </li><li data-v-30e980f3><code data-v-30e980f3>shelf</code> - allows to limit journal displayed in block to some specific shelf.</li></ul>",2)),d(en),d(Co,{name:"journals-home"},{default:f(()=>[k(P(yg))]),_:1}),d(en),d(Rr,{path:b(t),config:{show:["day","month"],separator:" | ",scale:2}},null,8,["path"])]))}}),bg=ge(wg,[["__scopeId","data-v-30e980f3"]]),kg=I({__name:"CodeBlockReferenceHint",props:{type:{},journalName:{}},setup(e){const t=pe();function n(){new Me(t,"Supported code blocks",bg,{type:e.type,journalName:e.journalName},780).open()}return(o,a)=>(m(),_("a",{href:"#",onClick:Qt(n,["prevent"])},"Supported code blocks."))}}),Cg={class:"path-hint"},_g={class:"u-pop"},Sg=I({__name:"TemplatePathPreview",props:{path:{},journalName:{}},setup(e){const t=pe(),n=w(()=>t.getJournal(e.journalName)),o=w(()=>({journal:e.journalName,date:Oe().format("YYYY-MM-DD")})),a=w(()=>n.value?n.value.getResolvedTemplatePath(e.path,o.value):""),r=w(()=>{const l=bl("(.*?)");return[...e.path.matchAll(l)].some(s=>s.groups?.format?.replaceAll(/\[.*?\]/gi,"").includes("W"))});return(l,s)=>(m(),_("div",Cg,[s[0]||(s[0]=k(" Template path with resolved variables: ")),h("b",_g,P(a.value),1),r.value?(m(),E(Za,{key:0})):R("",!0)]))}}),xg=ge(Sg,[["__scopeId","data-v-b2541cca"]]);class Dg extends X.AbstractInputSuggest{constructor(t,n){super(t,n),this.textInputElement=n}getSuggestions(t){const n=t.toLocaleLowerCase();return n?this.app.vault.getAllLoadedFiles().filter(a=>a instanceof X.TFolder?!1:a.path.toLocaleLowerCase().includes(n)):[]}renderSuggestion(t,n){n.setText(t.path)}selectSuggestion(t){this.textInputElement.value=t.path,this.textInputElement.trigger("input"),this.close()}}const Vg=["placeholder","disabled"],jg=I({__name:"TemplateInput",props:Ut({placeholder:{},disabled:{type:Boolean}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=Lt(e,"modelValue"),n=fe(),o=yl();let a;return bt(()=>{n.value&&(a=new Dg(o,n.value))}),tl(()=>{a&&a.close()}),(r,l)=>Yn((m(),_("input",{ref_key:"element",ref:n,"onUpdate:modelValue":l[0]||(l[0]=s=>t.value=s),type:"text",placeholder:r.placeholder,disabled:r.disabled,spellcheck:"false"},null,8,Vg)),[[zo,t.value]])}}),$g=I({__name:"EditFrontmatterFieldName",props:{journalName:{},fieldName:{}},emits:["close"],setup(e,{emit:t}){const n=t,{defineField:o,errorBag:a,handleSubmit:r}=Cn({initialValues:{name:""},validationSchema:Sn(At({name:wt(Xe(),Gt("Property name is required"))}))}),[l,s]=o("name"),i=pe(),u=w(()=>i.getJournal(e.journalName)),c=w(()=>u.value?.config.value.frontmatter[e.fieldName]||pm[e.fieldName]),v=r(async g=>{u.value&&(await u.value.renameFrontmatterField(e.fieldName,c.value,g.name),n("close"))});return bt(()=>{l.value=c.value}),(g,p)=>(m(),_("form",{onSubmit:p[2]||(p[2]=Qt((...C)=>b(v)&&b(v)(...C),["prevent"]))},[d(N,{name:"Current name"},{default:f(()=>[k(P(c.value),1)]),_:1}),d(N,{name:"New name"},{description:f(()=>[d(tt,{errors:b(a).name},null,8,["errors"])]),default:f(()=>[d(Je,De({modelValue:b(l),"onUpdate:modelValue":p[0]||(p[0]=C=>ce(l)?l.value=C:null)},b(s)),null,16,["modelValue"])]),_:1}),d(N,null,{default:f(()=>[d(ue,{onClick:p[1]||(p[1]=C=>g.$emit("close"))},{default:f(()=>p[3]||(p[3]=[k("Cancel")])),_:1}),d(ue,{cta:"",type:"submit"},{default:f(()=>p[4]||(p[4]=[k("Update")])),_:1})]),_:1})],32))}}),Ng=I({__name:"TemplaterSupport.modal",emits:["close"],setup(e){return(t,n)=>(m(),_("div",null,n[0]||(n[0]=[al("<p> There can be cases when Templater is interfering with plugin actions resulting in partially broken note or journal related data removed from frontmatter. </p><p>The best setup to avoid such problems would be:</p><ul><li>template configured in journal plugin settings</li><li><code>Trigger Templater on new file creation</code> is disabled</li><li> OR <code>Trigger Templater on new file creation</code> is enabled, <code>Enable Folder Templates</code> is enabled, <b>NO</b> Folder template is configured </li></ul><p> This ensures that only journal plugin is processing note template thus avoiding conflicts with templater plugin (journal plugin will use templater itself under the hood to process templater commands). </p>",4)])))}}),Mg=I({__name:"TemplaterSupportHint",setup(e){const t=pe(),n=pu(t.app,"<% $>");function o(){new Me(t,"Templater caveats",Ng,{}).open()}return(a,r)=>b(n)?(m(),_(U,{key:0},[r[0]||(r[0]=h("br",null,null,-1)),r[1]||(r[1]=k("Templater syntax is ")),h("a",{href:"#",onClick:Qt(o,["stop"])},"supported"),r[2]||(r[2]=k(". "))],64)):R("",!0)}}),Og={class:"u-pop name-preview"},Ag=I({__name:"NoteNamePreview",props:{journalName:{}},setup(e){const t=pe(),n=w(()=>t.getJournal(e.journalName)),o=w(()=>({journal:e.journalName,date:Oe().format("YYYY-MM-DD"),index:1})),a=w(()=>n.value?n.value.getConfiguredPathData(o.value)[1]:"");return(r,l)=>(m(),_("div",null,[l[0]||(l[0]=k(" Note name with resolved variables will look like: ")),h("b",Og,P(a.value),1)]))}}),Tg=ge(Ag,[["__scopeId","data-v-d4a91fdb"]]),Fg={key:0},Eg={key:0,class:"journal-important"},Pg={key:1,class:"journal-important"},Ig={key:0},Rg={key:0},Bg={key:1},Yg=["aria-label"],Ug={key:0},Wg={key:0},Lg={key:0,class:"journal-important"},Jg={key:0,class:"journal-important"},qg={class:"flair"},Hg={class:"flair"},zg={class:"flair"},Kg={class:"decoration-preview-container"},Gg={class:"decoration-preview-block"},Qg={key:0},ys=800,Xg=I({__name:"JournalSettingsEdit",props:{journalName:{}},emits:["back","edit"],setup(e,{emit:t}){const n=t,o=pe(),a=w(()=>o.getJournal(e.journalName)),r=w(()=>a.value?.config.value),l=Oe().day(),s=Oe().format("YYYY-MM-DD"),i=bn({templates:!1,commands:!1,decorations:!1,navBlock:!1,calendarViewBlock:!1,frontmatter:!1}),u=w(()=>a.value?tm(a.value.config.value.write):""),c=w(()=>a.value?.config.value.nameTemplate.includes("/")),v=w(()=>a.value?.config.value.dateFormat.includes("/"));function g(){if(!a.value)return;const se=a.value.config.value.nameTemplate.split("/");a.value.config.value.nameTemplate=se.pop()??"";const V=se.join("/");let K=a.value.config.value.folder;K&&!K.endsWith("/")&&(K+="/"),K+=V,a.value.config.value.folder=K}function p(){if(!a.value)return;const se=a.value.config.value.dateFormat.split("/");a.value.config.value.dateFormat=se.pop()??"";const V=se.map(Ge=>`{{date:${Ge}}}`).join("/");let K=a.value.config.value.folder;K&&!K.endsWith("/")&&(K+="/"),K+=V,a.value.config.value.folder=K}function C(){a.value&&new Me(o,"Rename journal",rh,{name:a.value.name,async onSave(se){a.value&&(await o.renameJournal(a.value.name,se),n("edit",se))}}).open()}function y(){a.value&&new Me(o,"Place journal",Nh,{currentShelf:a.value.shelfName,onSave(se){o.moveJournal(e.journalName,se)}}).open()}function x(){r.value?.templates.push(""),i.templates||(i.templates=!0)}function O(){a.value&&new Me(o,"Add command",ps,{index:a.value.commands.length,writeType:a.value.type,commands:a.value.commands,onSubmit:se=>{a.value&&(a.value.addCommand(se),i.commands||(i.commands=!0))}}).open()}function T(se,V){a.value&&new Me(o,"Edit command",ps,{index:V,writeType:a.value.type,command:se,commands:a.value.commands,onSubmit:K=>{a.value&&a.value.updateCommand(V,K)}}).open()}function Z(se){a.value&&a.value.deleteCommand(se)}function M(){a.value&&new Me(o,"Add calendar decoration",vs,{index:a.value.decorations.length,writeType:a.value.type,onSubmit:se=>{a.value&&(a.value.addDecoration(se),i.decorations||(i.decorations=!0))}},ys).open()}function A(se,V){a.value&&new Me(o,"Add calendar decoration",vs,{index:a.value.decorations.length,writeType:a.value.type,decoration:se,onSubmit:K=>{a.value&&a.value.editDecoration(V,K)}},ys).open()}function le(se){a.value&&a.value.deleteDecoration(se)}function ie(){a.value&&new Me(o,"Add row to nav block",da,{currentJournal:a.value.name,onSubmit:se=>{a.value&&(a.value.addNavRow(se),i.navBlock||(i.navBlock=!0))}}).open()}function L(se){a.value&&new Me(o,"Edit nav block row",da,{currentJournal:e.journalName,row:a.value.navBlock.rows[se],onSubmit:V=>{a.value&&a.value.editNavRow(se,V)}}).open()}function me(se){a.value&&a.value.deleteNavRow(se)}function We(se){a.value&&a.value.moveNavRowUp(se)}function Ae(se){a.value&&a.value.moveNavRowDown(se)}function nt(){a.value&&new Me(o,"Add row to calendar view block",da,{currentJournal:a.value.name,onSubmit:se=>{a.value&&(a.value.addCalendarViewRow(se),i.calendarViewBlock||(i.calendarViewBlock=!0))}}).open()}function pt(se){a.value&&new Me(o,"Edit calendar view block row",da,{currentJournal:e.journalName,row:a.value.calendarViewBlock.rows[se],onSubmit:V=>{a.value&&a.value.editCalendarViewRow(se,V)}}).open()}function ot(se){a.value&&a.value.deleteCalendarViewRow(se)}function qe(se){a.value&&a.value.moveNavRowUp(se)}function ee(se){a.value&&a.value.moveNavRowDown(se)}function ne(se){a.value&&new Me(o,"Edit frontmatter field",$g,{journalName:a.value.name,fieldName:se}).open()}async function H(){a.value&&await a.value.toggleFrontmatterStartDate()}async function oe(){a.value&&await a.value.toggleFrontmatterEndDate()}async function $e(se){se&&await a.value?.autoCreate()}return lt(()=>a.value?.config.value.start,se=>{a.value&&se&&(a.value.config.value.index.anchorDate=se)}),lt(()=>a.value?.config.value.end.type,()=>{a.value?.config.value.end.type==="repeats"&&!a.value.config.value.end.repeats&&(a.value.config.value.end.repeats=1)}),(se,V)=>a.value&&r.value?(m(),_("div",Fg,[d(N,{heading:""},{name:f(()=>[k(" Configuring "+P(a.value.name)+" (writing "+P(u.value)+") ",1)]),default:f(()=>[d(be,{icon:"pencil",tooltip:"Rename journal",onClick:C}),d(be,{icon:"chevron-left",tooltip:"Back to list",onClick:V[0]||(V[0]=K=>se.$emit("back"))})]),_:1}),b(o).usesShelves?(m(),E(N,{key:0,name:"Shelf"},{default:f(()=>[k(P(a.value.shelfName||"Not on a shelf")+" ",1),d(be,{icon:"pencil",tooltip:"Change shelf",onClick:y})]),_:1})):R("",!0),d(N,{name:"Start writing on"},{description:f(()=>[V[30]||(V[30]=k(" New notes prior to this date won't be created. ")),r.value.end.type==="repeats"&&!r.value.start?(m(),_("div",Eg," Start date should be defined for journal that ends after some number of repeats. ")):R("",!0),r.value.write.type==="custom"?(m(),_("div",Pg," Start date for custom intervals cannot be changes as it is used to calculate interval ")):R("",!0)]),default:f(()=>[r.value.write.type==="custom"?(m(),_("span",Ig,P(r.value.write.anchorDate),1)):(m(),E(Ao,{key:1,modelValue:r.value.start,"onUpdate:modelValue":V[1]||(V[1]=K=>r.value.start=K)},null,8,["modelValue"])),r.value.start&&r.value.write.type!=="custom"?(m(),E(be,{key:2,icon:"trash",tooltip:"Clear start date",onClick:V[2]||(V[2]=K=>r.value.start="")})):R("",!0)]),_:1}),d(N,{name:"End writing"},{description:f(()=>[r.value.end.type==="repeats"?(m(),_("div",Rg,"After creating this many notes, new notes won't be created.")):R("",!0),r.value.end.type==="date"?(m(),_("div",Bg,"New notes after this date won't be created.")):R("",!0)]),default:f(()=>[d(Ve,{modelValue:r.value.end.type,"onUpdate:modelValue":V[3]||(V[3]=K=>r.value.end.type=K)},{default:f(()=>V[31]||(V[31]=[h("option",{value:"never"},"Never",-1),h("option",{value:"date"},"After date",-1),h("option",{value:"repeats"},"After repeating",-1)])),_:1},8,["modelValue"]),r.value.end.type==="date"?(m(),E(Ao,{key:0,modelValue:r.value.end.date,"onUpdate:modelValue":V[4]||(V[4]=K=>r.value.end.date=K)},null,8,["modelValue"])):R("",!0),r.value.end.type==="repeats"?(m(),_(U,{key:1},[d(ln,{modelValue:r.value.end.repeats,"onUpdate:modelValue":V[5]||(V[5]=K=>r.value.end.repeats=K),min:1},null,8,["modelValue"]),V[32]||(V[32]=k(" times "))],64)):R("",!0)]),_:1}),d(N,{name:"Index notes"},{description:f(()=>V[33]||(V[33]=[k(" Allows to assign numbers to notes (ex. Day 1, Day 2, etc.). ")])),default:f(()=>[d(He,{modelValue:r.value.index.enabled,"onUpdate:modelValue":V[6]||(V[6]=K=>r.value.index.enabled=K)},null,8,["modelValue"])]),_:1}),r.value.index.enabled?(m(),_(U,{key:1},[d(N,{name:"Anchor date"},{description:f(()=>V[34]||(V[34]=[k(" This date is used to connect some number to it for further calculations."),h("br",null,null,-1),k(" Start date is used as anchor date if defined. ")])),default:f(()=>[h("div",{"aria-label":r.value.start?"Start date is used":""},[r.value.start?(m(),_("span",Ug,P(r.value.start),1)):(m(),E(Ao,{key:1,modelValue:r.value.index.anchorDate,"onUpdate:modelValue":V[7]||(V[7]=K=>r.value.index.anchorDate=K)},null,8,["modelValue"]))],8,Yg)]),_:1}),d(N,{name:"Start number"},{description:f(()=>V[35]||(V[35]=[k(" This number is used to start numbering notes at anchor date. ")])),default:f(()=>[d(ln,{modelValue:r.value.index.anchorIndex,"onUpdate:modelValue":V[8]||(V[8]=K=>r.value.index.anchorIndex=K),min:1},null,8,["modelValue"])]),_:1}),d(N,{name:"Index change"},{description:f(()=>V[36]||(V[36]=[k(" Define how index number will change with time. ")])),default:f(()=>[d(Ve,{modelValue:r.value.index.type,"onUpdate:modelValue":V[9]||(V[9]=K=>r.value.index.type=K)},{default:f(()=>V[37]||(V[37]=[h("option",{value:"increment"},"Constantly increasing",-1),h("option",{value:"reset_after"},"Resets after",-1)])),_:1},8,["modelValue"]),r.value.index.type==="reset_after"?(m(),_(U,{key:0},[d(ln,{modelValue:r.value.index.resetAfter,"onUpdate:modelValue":V[10]||(V[10]=K=>r.value.index.resetAfter=K),min:2,narrow:""},null,8,["modelValue"]),V[38]||(V[38]=k(" repeats "))],64)):R("",!0)]),_:1}),!r.value.start&&r.value.index.type==="increment"?(m(),E(N,{key:0,name:"Allow before"},{description:f(()=>V[39]||(V[39]=[k(" Enabled to index before anchor date. Might result in negative numbers. ")])),default:f(()=>[d(He,{modelValue:r.value.index.allowBefore,"onUpdate:modelValue":V[11]||(V[11]=K=>r.value.index.allowBefore=K)},null,8,["modelValue"])]),_:1})):R("",!0)],64)):R("",!0),d(N,{name:"Confirm creating new note?"},{description:f(()=>V[40]||(V[40]=[k(" When turned on will show confirmation dialog any time you try navigating to a date that does not have a note yet. ")])),default:f(()=>[d(He,{modelValue:r.value.confirmCreation,"onUpdate:modelValue":V[12]||(V[12]=K=>r.value.confirmCreation=K)},null,8,["modelValue"])]),_:1}),d(N,{name:"Auto-create current notes"},{description:f(()=>[V[41]||(V[41]=k(" When turned on will automatically create notes for current date if they don't exist yet. ")),V[42]||(V[42]=h("br",null,null,-1)),r.value.confirmCreation?(m(),_("div",Wg,"Confirmation dialog won't be shown for autocreated notes.")):R("",!0)]),default:f(()=>[d(He,{modelValue:r.value.autoCreate,"onUpdate:modelValue":[V[13]||(V[13]=K=>r.value.autoCreate=K),$e]},null,8,["modelValue"])]),_:1}),d(N,{name:"Default date format"},{description:f(()=>[V[44]||(V[44]=k(" Used to format dates if not defined in variables (like ")),V[45]||(V[45]=h("span",{class:"u-pop"}," {{ date }} ",-1)),V[46]||(V[46]=k(").")),V[47]||(V[47]=h("br",null,null,-1)),V[48]||(V[48]=h("a",{target:"_blank",href:"https://momentjs.com/docs/#/displaying/format/"},"Syntax reference",-1)),V[49]||(V[49]=h("br",null,null,-1)),d(su,{format:r.value.dateFormat},null,8,["format"]),v.value?(m(),_("div",Lg,[V[43]||(V[43]=k(' Looks like you are using date format to create folders. Recommended way to do this is to use variables in "Folder" field. ')),h("a",{href:"#",onClick:p},"Apply recommendation")])):R("",!0)]),default:f(()=>[d(Je,{modelValue:r.value.dateFormat,"onUpdate:modelValue":V[14]||(V[14]=K=>r.value.dateFormat=K)},null,8,["modelValue"])]),_:1}),d(N,{name:"Folder"},{description:f(()=>[V[50]||(V[50]=k(" New notes will be created in this folder. ")),V[51]||(V[51]=h("br",null,null,-1)),d(ga,{type:r.value.write.type,"date-format":a.value.dateFormat},null,8,["type","date-format"]),V[52]||(V[52]=k()),V[53]||(V[53]=h("br",null,null,-1)),r.value.folder&&r.value.folder.includes("{")?(m(),E(Ah,{key:0,"journal-name":se.journalName},null,8,["journal-name"])):R("",!0)]),default:f(()=>[d(lu,{modelValue:r.value.folder,"onUpdate:modelValue":V[15]||(V[15]=K=>r.value.folder=K)},null,8,["modelValue"])]),_:1}),d(N,{name:"Note name template"},{description:f(()=>[V[55]||(V[55]=k(" Template used to generate new note name.")),V[56]||(V[56]=h("br",null,null,-1)),d(ga,{type:r.value.write.type,"date-format":a.value.dateFormat},null,8,["type","date-format"]),d(Tg,{"journal-name":se.journalName},null,8,["journal-name"]),c.value?(m(),_("div",Jg,[V[54]||(V[54]=k(' Looks like you are using name template to create folders. Recommended way is to define folder path fully in "Folder" field. ')),h("a",{href:"#",onClick:g},"Apply recommendation")])):R("",!0)]),default:f(()=>[d(Je,{modelValue:r.value.nameTemplate,"onUpdate:modelValue":V[16]||(V[16]=K=>r.value.nameTemplate=K)},null,8,["modelValue"])]),_:1}),d(xt,{expanded:i.templates,"onUpdate:expanded":V[17]||(V[17]=K=>i.templates=K)},{trigger:f(()=>[d(Dt,{icon:"notepad-text-dashed"},{default:f(()=>[V[57]||(V[57]=k(" Templates ")),h("span",qg,P(r.value.templates.length),1)]),_:1})]),controls:f(()=>[d(ue,{onClick:x},{default:f(()=>V[58]||(V[58]=[k(" Add template ")])),_:1})]),default:f(()=>[d(N,{"no-controls":""},{description:f(()=>[V[59]||(V[59]=k(" Path to note that will be used as template when creating new notes. ")),V[60]||(V[60]=h("br",null,null,-1)),V[61]||(V[61]=k(" When multiple templates are configured - first existing will be used. ")),V[62]||(V[62]=h("br",null,null,-1)),d(ga,{type:a.value.type,"date-format":a.value.dateFormat},null,8,["type","date-format"]),V[63]||(V[63]=h("br",null,null,-1)),d(kg,{type:a.value.type,"journal-name":se.journalName},null,8,["type","journal-name"]),d(Mg)]),_:1}),(m(!0),_(U,null,_e(r.value.templates,(K,Ge)=>(m(),_(U,{key:Ge},[d(N,{"controls-only":""},{default:f(()=>[d(jg,{modelValue:r.value.templates[Ge],"onUpdate:modelValue":Ft=>r.value.templates[Ge]=Ft,class:"grow"},null,8,["modelValue","onUpdate:modelValue"]),d(be,{icon:"trash",tooltip:"Remove template",onClick:Ft=>r.value.templates.splice(Ge,1)},null,8,["onClick"])]),_:2},1024),K.includes("{")?(m(),E(xg,{key:0,"journal-name":se.journalName,path:K},null,8,["journal-name","path"])):R("",!0)],64))),128))]),_:1},8,["expanded"]),d(xt,{expanded:i.commands,"onUpdate:expanded":V[18]||(V[18]=K=>i.commands=K)},{trigger:f(()=>[d(Dt,{icon:"terminal"},{default:f(()=>[V[64]||(V[64]=k(" Commands ")),h("span",Hg,P(a.value.commands.length),1)]),_:1})]),controls:f(()=>[d(ue,{onClick:O},{default:f(()=>V[65]||(V[65]=[k("Add command")])),_:1})]),default:f(()=>[a.value.commands.length===0?(m(),E(N,{key:0},{description:f(()=>V[66]||(V[66]=[k(" No commands configured yet. ")])),_:1})):(m(!0),_(U,{key:1},_e(a.value.commands,(K,Ge)=>(m(),E(N,{key:Ge},{name:f(()=>[k(P(K.name),1)]),description:f(()=>[k(P(b(Xa)(a.value.type,K.type))+" "+P(b(Im)(a.value.type,K.type,K.context)),1)]),default:f(()=>[d(be,{icon:"pencil",tooltip:"Edit",onClick:Ft=>T(K,Ge)},null,8,["onClick"]),d(be,{icon:"trash-2",tooltip:"Delete",onClick:Ft=>Z(Ge)},null,8,["onClick"])]),_:2},1024))),128))]),_:1},8,["expanded"]),d(xt,{expanded:i.decorations,"onUpdate:expanded":V[19]||(V[19]=K=>i.decorations=K)},{trigger:f(()=>[d(Dt,{icon:"paintbrush"},{default:f(()=>[V[67]||(V[67]=k(" Calendar decorations ")),h("span",zg,P(a.value.decorations.length),1)]),_:1})]),controls:f(()=>[d(ue,{onClick:M},{default:f(()=>V[68]||(V[68]=[k("Add decoration")])),_:1})]),default:f(()=>[d(N,{"no-controls":""},{description:f(()=>V[69]||(V[69]=[k(" Use decorations to highlight dates in calendar that meet certain conditions. ")])),_:1}),a.value.decorations.length===0?(m(),E(N,{key:0},{description:f(()=>V[70]||(V[70]=[k(" No calendar decorations configured yet. ")])),_:1})):(m(!0),_(U,{key:1},_e(a.value.decorations,(K,Ge)=>(m(),E(N,{key:Ge},{description:f(()=>[h("div",Kg,[h("div",Gg,[d(Xo,{class:"decoration-preview",styles:K.styles},{default:f(()=>[h("span",null,P(b(l)),1)]),_:2},1032,["styles"])]),V[71]||(V[71]=k(" when ")),(m(!0),_(U,null,_e(K.conditions,(Ft,Xt)=>(m(),_(U,{key:Xt},[k(P(b(nm)(Ft))+" ",1),Xt>0?(m(),_("span",Qg,P(K.mode),1)):R("",!0)],64))),128))])]),default:f(()=>[d(be,{icon:"pencil",tooltip:"Edit",onClick:Ft=>A(K,Ge)},null,8,["onClick"]),d(be,{icon:"trash-2",tooltip:"Delete",onClick:Ft=>le(Ge)},null,8,["onClick"])]),_:2},1024))),128))]),_:1},8,["expanded"]),d(xt,{expanded:i.navBlock,"onUpdate:expanded":V[22]||(V[22]=K=>i.navBlock=K)},{trigger:f(()=>[d(Dt,{icon:"signpost-big"},{default:f(()=>V[72]||(V[72]=[k(" Navigation block ")])),_:1})]),controls:f(()=>[d(ue,{onClick:ie},{default:f(()=>V[73]||(V[73]=[k("Add row")])),_:1})]),default:f(()=>[d(gs,{class:"nav-block-preview",rows:a.value.navBlock.rows,"journal-name":se.journalName,"ref-date":b(s),onMoveUp:We,onMoveDown:Ae,onEdit:L,onRemove:me},null,8,["rows","journal-name","ref-date"]),d(N,{name:"Navigation block mode"},{default:f(()=>[d(Ve,{modelValue:a.value.navBlock.type,"onUpdate:modelValue":V[20]||(V[20]=K=>a.value.navBlock.type=K)},{default:f(()=>V[74]||(V[74]=[h("option",{value:"create"},"Create new note",-1),h("option",{value:"existing"},"Open existing note",-1)])),_:1},8,["modelValue"])]),_:1}),d(N,{name:"Decorate whole navigation block"},{default:f(()=>[d(He,{modelValue:a.value.navBlock.decorateWholeBlock,"onUpdate:modelValue":V[21]||(V[21]=K=>a.value.navBlock.decorateWholeBlock=K)},null,8,["modelValue"])]),_:1})]),_:1},8,["expanded"]),a.value.type==="custom"?(m(),E(xt,{key:2,expanded:i.calendarViewBlock,"onUpdate:expanded":V[24]||(V[24]=K=>i.calendarViewBlock=K)},{trigger:f(()=>[d(Dt,{icon:"signpost-big"},{default:f(()=>V[75]||(V[75]=[k(" Calendar View block ")])),_:1})]),controls:f(()=>[d(ue,{onClick:nt},{default:f(()=>V[76]||(V[76]=[k("Add row")])),_:1})]),default:f(()=>[d(gs,{class:"nav-block-preview",rows:a.value.calendarViewBlock.rows,"journal-name":se.journalName,"ref-date":b(s),onMoveUp:qe,onMoveDown:ee,onEdit:pt,onRemove:ot},null,8,["rows","journal-name","ref-date"]),d(N,{name:"Decorate whole navigation block"},{default:f(()=>[d(He,{modelValue:a.value.calendarViewBlock.decorateWholeBlock,"onUpdate:modelValue":V[23]||(V[23]=K=>a.value.calendarViewBlock.decorateWholeBlock=K)},null,8,["modelValue"])]),_:1})]),_:1},8,["expanded"])):R("",!0),d(xt,{expanded:i.frontmatter,"onUpdate:expanded":V[29]||(V[29]=K=>i.frontmatter=K)},{trigger:f(()=>[d(Dt,{icon:"table-properties"},{default:f(()=>V[77]||(V[77]=[k(" Frontmatter ")])),_:1})]),default:f(()=>[d(N,{name:"Date property name"},{default:f(()=>[k(P(r.value.frontmatter.dateField||b(za))+" ",1),d(be,{icon:"pencil",tooltip:"Edit",onClick:V[25]||(V[25]=K=>ne("dateField"))})]),_:1}),r.value.index.enabled?(m(),E(N,{key:0,name:"Index property name"},{default:f(()=>[k(P(r.value.frontmatter.indexField||b(Ka))+" ",1),d(be,{icon:"pencil",tooltip:"Edit",onClick:V[26]||(V[26]=K=>ne("indexField"))})]),_:1})):R("",!0),d(N,{name:"Add start date property?"},{description:f(()=>V[78]||(V[78]=[k(" In most cases start date is equal to date property. But for weeks journals it might be different for weeks that start one year and end in other - in this case date is equals to end date. ")])),default:f(()=>[d(He,{"model-value":r.value.frontmatter.addStartDate,"onUpdate:modelValue":H},null,8,["model-value"])]),_:1}),r.value.frontmatter.addStartDate?(m(),E(N,{key:1,name:"Start date property name"},{default:f(()=>[k(P(r.value.frontmatter.startDateField||b(an))+" ",1),d(be,{icon:"pencil",tooltip:"Edit",onClick:V[27]||(V[27]=K=>ne("startDateField"))})]),_:1})):R("",!0),d(N,{name:"Add end date property?"},{default:f(()=>[d(He,{"model-value":r.value.frontmatter.addEndDate,"onUpdate:modelValue":oe},null,8,["model-value"])]),_:1}),r.value.frontmatter.addEndDate?(m(),E(N,{key:2,name:"End date property name"},{default:f(()=>[k(P(r.value.frontmatter.endDateField||b(wn))+" ",1),d(be,{icon:"pencil",tooltip:"Edit",onClick:V[28]||(V[28]=K=>ne("endDateField"))})]),_:1})):R("",!0)]),_:1},8,["expanded"])])):R("",!0)}}),Zg=ge(Xg,[["__scopeId","data-v-d7644216"]]),ey={key:0,class:"journal-important"},ty=I({__name:"RenameShelf.modal",props:{name:{}},emits:["save","close"],setup(e,{emit:t}){const n=e,o=t,a=pe(),r=fe(n.name),l=w(()=>r.value.length>0&&r.value!==n.name&&!a.hasShelf(r.value)),s=w(()=>r.value&&r.value!==n.name&&a.hasShelf(r.value));function i(){o("save",r.value),o("close")}return(u,c)=>(m(),_(U,null,[d(N,{name:"New name"},{description:f(()=>[s.value?(m(),_("span",ey,"This name is already used.")):R("",!0)]),default:f(()=>[d(Je,{modelValue:r.value,"onUpdate:modelValue":c[0]||(c[0]=v=>r.value=v)},null,8,["modelValue"])]),_:1}),d(N,null,{default:f(()=>[d(ue,{onClick:c[1]||(c[1]=v=>u.$emit("close"))},{default:f(()=>c[2]||(c[2]=[k("Cancel")])),_:1}),d(ue,{cta:"",disabled:!l.value,onClick:i},{default:f(()=>c[3]||(c[3]=[k("Save")])),_:1},8,["disabled"])]),_:1})],64))}}),ny={key:0},oy={class:"flair"},ay={class:"flair"},ry=I({__name:"JournalSettingsShelfDetails",props:{shelfName:{}},emits:["back","edit","organize","bulk-add"],setup(e,{emit:t}){const n=t,o=pe(),a=w(()=>`Shelf: ${e.shelfName}`),r=bn({commands:!1}),l=w(()=>o.getShelf(e.shelfName)),s=w(()=>l.value?o.getShelfJournals(e.shelfName):[]);function i(){l.value&&new Me(o,"Rename shelf",ty,{name:l.value.name,onSave(p){o.renameShelf(e.shelfName,p),n("organize",p)}}).open()}function u(){new Me(o,"Add Journal",ml,{onCreate(p,C){if(!l.value)return;const y=o.createJournal(p,C);l.value.journals.push(p),y.shelves.push(e.shelfName),n("edit",p)}}).open()}function c(){l.value&&new Me(o,"Add command",Aa,{index:l.value.commands.length,commands:l.value.commands,onSubmit:p=>{l.value&&(l.value.commands.push(p),lo(o,p,a.value,()=>o.getShelfJournals(e.shelfName).filter(C=>C.type===p.writeType)),r.commands||(r.commands=!0))}}).open()}function v(p,C){l.value&&new Me(o,"Edit command",Aa,{index:C,command:p,commands:l.value.commands,onSubmit:y=>{l.value&&(l.value.commands[C]=y,Ta(o,p,a.value),lo(o,y,a.value,()=>o.getShelfJournals(e.shelfName).filter(x=>x.type===y.writeType)))}}).open()}function g(p){if(!l.value)return;const[C]=l.value.commands.splice(p,1);C&&Ta(o,C,a.value)}return bt(()=>{l.value&&!l.value.commands&&(l.value.commands=[])}),(p,C)=>l.value?(m(),_("div",ny,[d(N,{heading:""},{name:f(()=>[d(Dt,{icon:"library"},{default:f(()=>[k(" Configuring "+P(l.value.name),1)]),_:1})]),default:f(()=>[d(be,{icon:"pencil",tooltip:"Rename shelf",onClick:i}),d(be,{icon:"chevron-left",tooltip:"Back to list",onClick:C[0]||(C[0]=y=>p.$emit("back"))})]),_:1}),d(xt,{"default-expanded":s.value.length>0},{trigger:f(()=>[d(Dt,{icon:"book-open"},{default:f(()=>[C[4]||(C[4]=k(" Journals ")),h("span",oy,P(s.value.length),1)]),_:1})]),controls:f(()=>[d(be,{icon:"plus",cta:"",tooltip:"Create new journal",onClick:u})]),default:f(()=>[d(sl,{journals:s.value,onEdit:C[1]||(C[1]=y=>p.$emit("edit",y)),onBulkAdd:C[2]||(C[2]=y=>p.$emit("bulk-add",y))},null,8,["journals"])]),_:1},8,["default-expanded"]),d(xt,{expanded:r.commands,"onUpdate:expanded":C[3]||(C[3]=y=>r.commands=y)},{trigger:f(()=>[d(Dt,{icon:"terminal"},{default:f(()=>[C[5]||(C[5]=k(" Commands ")),h("span",ay,P(l.value.commands.length),1)]),_:1})]),controls:f(()=>[d(ue,{onClick:c},{default:f(()=>C[6]||(C[6]=[k("Add command")])),_:1})]),default:f(()=>[l.value.commands.length===0?(m(),E(N,{key:0},{description:f(()=>C[7]||(C[7]=[k(" No commands configured yet. ")])),_:1})):(m(!0),_(U,{key:1},_e(l.value.commands,(y,x)=>(m(),E(N,{key:x},{name:f(()=>[k(P(y.name),1)]),description:f(()=>[k(P(b(Xa)(y.writeType,y.type)),1)]),default:f(()=>[d(be,{icon:"pencil",tooltip:"Edit",onClick:O=>v(y,x)},null,8,["onClick"]),d(be,{icon:"trash-2",tooltip:"Delete",onClick:O=>g(x)},null,8,["onClick"])]),_:2},1024))),128))]),_:1},8,["expanded"])])):R("",!0)}}),ly=I({__name:"ConditionItem",props:{condition:{}},emits:["change"],setup(e){const t=w(()=>{switch(e.condition.type){case"title":return du;case"tag":return cu;case"property":return fu}return null});return(n,o)=>t.value?(m(),E(qo(t.value),{key:0,condition:n.condition,onChange:o[0]||(o[0]=a=>n.$emit("change",a))},null,40,["condition"])):R("",!0)}}),sy={key:0,class:"mode-hint"},iy={key:0,class:"journal-hint"},uy=I({__name:"ConditionsList",props:{mode:{},conditions:{}},emits:["add-condition","change-condition","remove-condition"],setup(e,{emit:t}){const n=t,o=[{value:"title",label:"Note title"},{value:"tag",label:"Tag"},{value:"property",label:"Property"}];function a(s){n("add-condition",jt(eu[s]))}function r(s){n("remove-condition",s)}function l(s,i){n("change-condition",s,i)}return(s,i)=>(m(),_(U,null,[d(N,null,{default:f(()=>[d(Pr,{options:o,onSelect:a},{default:f(()=>i[0]||(i[0]=[k("Add condition")])),_:1})]),_:1}),(m(!0),_(U,null,_e(s.conditions,(u,c)=>(m(),E(N,{key:c,class:"condition-wrapper"},{default:f(()=>[c>0?(m(),_("span",sy,P(s.mode),1)):R("",!0),d(ly,{condition:u,onChange:v=>l(c,v)},null,8,["condition","onChange"]),d(be,{icon:"trash",onClick:v=>r(c)},null,8,["onClick"])]),_:2},1024))),128)),s.conditions.length===0?(m(),_("p",iy,"No conditions defined yet")):R("",!0)],64))}}),dy={key:0},cy=I({__name:"ConfigureBulkAddNotes",props:{journalName:{}},emits:["process","close"],setup(e,{emit:t}){const n=pe(),o=w(()=>n.getJournal(e.journalName)),a=t,{defineField:r,errorBag:l,handleSubmit:s}=Cn({initialValues:{folder:"",date_place:"title",property_name:"",date_format:o.value?.dateFormat,filter_combinator:"no",existing_note:"skip",other_folder:"keep",other_name:"keep",dry_run:!1},validationSchema:Sn(wt(At({folder:Xe(),date_place:yt(["title","property"]),property_name:Xe(),date_format:wt(Xe(),Gt("Date format is required")),filter_combinator:yt(["no","and","or"]),existing_note:yt(["skip","override","merge","ask"]),other_folder:yt(["keep","move","ask"]),other_name:yt(["keep","rename","ask"]),dry_run:rn()}),Go(po([["date_place"],["property_name"]],qe=>qe.date_place==="property"?!!qe.property_name:!0,"Please enter property name."),["property_name"])))}),[i,u]=r("folder"),[c,v]=r("date_place"),[g,p]=r("property_name"),[C,y]=r("date_format"),[x,O]=r("filter_combinator"),[T,Z]=r("existing_note"),[M,A]=r("other_folder"),[le,ie]=r("other_name"),[L,me]=r("dry_run"),We=fe([]);function Ae(qe){We.value.push(qe)}function nt(qe,ee){We.value[qe][ee.prop]=ee.value}function pt(qe){We.value.splice(qe,1)}const ot=s(()=>{a("process",{folder:i.value??"/",date_place:c.value??"title",property_name:g.value??"",date_format:C.value??o.value?.dateFormat??"",filter_combinator:x.value??"no",filters:We.value,existing_note:T.value??"skip",other_folder:M.value??"keep",other_name:le.value??"keep",dry_run:L.value??!1})});return(qe,ee)=>(m(),_("form",{onSubmit:ee[10]||(ee[10]=Qt((...ne)=>b(ot)&&b(ot)(...ne),["prevent"]))},[d(N,{name:"Folder",description:""},{description:f(()=>[ee[11]||(ee[11]=h("div",null,"Select folder with existing notes that you want to process",-1)),d(tt,{errors:b(l).folder},null,8,["errors"])]),default:f(()=>[d(lu,De({modelValue:b(i),"onUpdate:modelValue":ee[0]||(ee[0]=ne=>ce(i)?i.value=ne:null)},b(u)),null,16,["modelValue"])]),_:1}),d(N,{name:"Take date from"},{default:f(()=>[d(Ve,De({modelValue:b(c),"onUpdate:modelValue":ee[1]||(ee[1]=ne=>ce(c)?c.value=ne:null)},b(v)),{default:f(()=>ee[12]||(ee[12]=[h("option",{value:"title"},"Note title",-1),h("option",{value:"property"},"Property",-1)])),_:1},16,["modelValue"])]),_:1}),b(c)==="property"?(m(),E(N,{key:0,name:"Property containing date"},{description:f(()=>[d(tt,{errors:b(l).property_name},null,8,["errors"])]),default:f(()=>[d(Je,De({modelValue:b(g),"onUpdate:modelValue":ee[2]||(ee[2]=ne=>ce(g)?g.value=ne:null)},b(p)),null,16,["modelValue"])]),_:1})):R("",!0),d(N,{name:"Date format"},{description:f(()=>[ee[13]||(ee[13]=h("a",{target:"_blank",href:"https://momentjs.com/docs/#/displaying/format/"},"Syntax reference",-1)),ee[14]||(ee[14]=h("br",null,null,-1)),ee[15]||(ee[15]=k(" If your dates have time component in them - please omit it in format. ")),d(su,{format:b(C)??""},null,8,["format"]),b(c)==="property"?(m(),_("div",dy," Please pay attention that dates might differ from how they are stored. Check format in Source display mode. ")):R("",!0),d(tt,{errors:b(l).date_format},null,8,["errors"])]),default:f(()=>[d(Je,De({modelValue:b(C),"onUpdate:modelValue":ee[3]||(ee[3]=ne=>ce(C)?C.value=ne:null)},b(y)),null,16,["modelValue"])]),_:1}),d(N,{name:"Process"},{default:f(()=>[d(Ve,De({modelValue:b(x),"onUpdate:modelValue":ee[4]||(ee[4]=ne=>ce(x)?x.value=ne:null)},b(O)),{default:f(()=>ee[16]||(ee[16]=[h("option",{value:"no"},"All notes",-1),h("option",{value:"or"},"Notes that match any filter",-1),h("option",{value:"and"},"Notes that match all filters",-1)])),_:1},16,["modelValue"])]),_:1}),b(x)&&b(x)!=="no"?(m(),E(uy,{key:1,conditions:We.value,mode:b(x),onAddCondition:Ae,onChangeCondition:nt,onRemoveCondition:pt},null,8,["conditions","mode"])):R("",!0),d(N,{name:"If other note with same date exists in journal"},{default:f(()=>[d(Ve,De({modelValue:b(T),"onUpdate:modelValue":ee[5]||(ee[5]=ne=>ce(T)?T.value=ne:null)},b(Z)),{default:f(()=>ee[17]||(ee[17]=[h("option",{value:"skip"},"Skip note",-1),h("option",{value:"override"},"Override date connection",-1),h("option",{value:"merge"},"Merge note content into existing one",-1),h("option",{value:"ask"},"Ask for action for every such note",-1)])),_:1},16,["modelValue"])]),_:1}),d(N,{name:"When note name differs from journal settings"},{default:f(()=>[d(Ve,De({modelValue:b(le),"onUpdate:modelValue":ee[6]||(ee[6]=ne=>ce(le)?le.value=ne:null)},b(ie)),{default:f(()=>ee[18]||(ee[18]=[h("option",{value:"keep"},"Keep as is",-1),h("option",{value:"rename"},"Rename",-1),h("option",{value:"ask"},"Ask for action for every such note",-1)])),_:1},16,["modelValue"])]),_:1}),d(N,{name:"When note is not in folder from journal setting"},{default:f(()=>[d(Ve,De({modelValue:b(M),"onUpdate:modelValue":ee[7]||(ee[7]=ne=>ce(M)?M.value=ne:null)},b(A)),{default:f(()=>ee[19]||(ee[19]=[h("option",{value:"keep"},"Keep as is",-1),h("option",{value:"move"},"Move to configured folder",-1),h("option",{value:"ask"},"Ask for action for every such note",-1)])),_:1},16,["modelValue"])]),_:1}),d(N,{name:"Dry run?"},{description:f(()=>ee[20]||(ee[20]=[k(" Don't change notes, just report potential changes ")])),default:f(()=>[d(He,De({modelValue:b(L),"onUpdate:modelValue":ee[8]||(ee[8]=ne=>ce(L)?L.value=ne:null)},b(me)),null,16,["modelValue"])]),_:1}),d(N,null,{default:f(()=>[d(ue,{onClick:ee[9]||(ee[9]=ne=>qe.$emit("close"))},{default:f(()=>ee[21]||(ee[21]=[k("Cancel")])),_:1}),d(ue,{cta:"",onClick:b(ot)},{default:f(()=>ee[22]||(ee[22]=[k("Start")])),_:1},8,["onClick"])]),_:1})],32))}});class fy{#e;repeats=1;constructor(t){this.#e=t}get duration(){return this.#e.value.type}resolveForDate(t){const n=G(t);return n.isValid()?this.#n(n):null}resolveNext(t){const n=G(t);return n.isValid()?(n.add(1,this.#e.value.type),this.#n(n)):null}resolvePrevious(t){const n=G(t);return n.isValid()?(n.subtract(1,this.#e.value.type),this.#n(n)):null}resolveStartDate(t){const n=this.#e.value.type;return G(t).startOf(n).format(Ce)}resolveEndDate(t){const n=this.#e.value.type;return G(t).endOf(n).format(Ce)}resolveRelativeDate(t){const n=this.#e.value.type;return Oi(n,t)}resolveDateForCommand(t,n){switch(n){case"same":return t;case"next":return G(t).add(1,this.#e.value.type).format(Ce);case"previous":return G(t).subtract(1,this.#e.value.type).format(Ce);case"same_next_week":return G(t).add(1,"week").format(Ce);case"same_previous_week":return G(t).subtract(1,"week").format(Ce);case"same_next_month":return G(t).add(1,"month").format(Ce);case"same_previous_month":return G(t).subtract(1,"month").format(Ce);case"same_next_year":return G(t).add(1,"year").format(Ce);case"same_previous_year":return G(t).subtract(1,"year").format(Ce)}return null}countRepeats(t,n){const o=G(t),a=G(n);return Math.abs(Math.ceil(o.diff(a,this.#e.value.type)))}calculateOffset(t){const n=G(t),o=this.#n(n);if(!o)return[0,0];const a=this.resolveStartDate(o),r=this.resolveEndDate(o);return n.isBefore(a)||n.isAfter(r)?[0,0]:[n.diff(a,"days")+1,n.diff(r,"days")-1]}#n(t){const n=this.#e.value.type,o=t.clone().startOf(n);if(this.#e.value.type==="week"){const a=t.clone().endOf(n);if(!o.isSame(a,"year")&&o.week()===1)return a.format(Ce)}return o.format(Ce)}}class py{constructor(t,n,o){this.journalName=t,this.index=o,this.#e=n}#e;get repeats(){return this.#e.value.duration}get duration(){return this.#e.value.every}resolveForDate(t){const o=this.index.getJournalIndex(this.journalName).findClosestDate(t);if(o)return o===t?o:o<=t?this.#o(t,o):this.#n(t,o);const a=this.#e.value.anchorDate,r=this.resolveEndDate(a);return t>=a&&t<r?a:t<a?this.#n(t,a):this.#o(t,a)}resolveNext(t){const n=this.resolveForDate(t);if(!n)return null;const o=this.resolveEndDate(n);return G(o).add(1,"day").format(Ce)}resolvePrevious(t){const n=this.resolveForDate(t);if(!n)return null;const o=this.index.getJournalIndex(this.journalName),a=G(n).subtract(1,"day"),r=o.findClosestDate(a.format(Ce));if(r){const s=this.index.get(this.journalName,r);if(s?.end_date&&a.isSame(s.end_date,"day"))return r}const l=G(n).subtract(this.#e.value.duration,this.#e.value.every);return l.format(Ce)}resolveDateForCommand(t,n){const o=this.resolveForDate(t);return o?n==="next"?this.resolveNext(o):n==="previous"?this.resolvePrevious(o):o:null}resolveStartDate(t){return t}resolveEndDate(t){const n=this.index.get(this.journalName,t);return(n?.end_date?G(n.end_date):G(t).add(this.#e.value.duration,this.#e.value.every).subtract(1,"day")).format(Ce)}resolveRelativeDate(t){const n=this.resolveForDate(Oe().format(Ce));if(!n)return"";const o=this.countRepeats(n,t);switch(o){case 0:return"This "+this.journalName;case-1:return"Last "+this.journalName;case 1:return"Next "+this.journalName}return t<n?`${Math.abs(o)} ${this.journalName}s ago`:`${o} ${this.journalName}s from now`}calculateOffset(t){const n=this.resolveForDate(t);if(!n)return[0,0];const o=G(t),a=G(n),r=G(this.resolveEndDate(n));return[o.diff(a,"days")+1,o.diff(r,"days")-1]}countRepeats(t,n){const o=this.resolveForDate(t),a=this.resolveForDate(n);if(!o||!a)return 0;let r=G(o),l=G(a);r.isAfter(l)&&([r,l]=[l,r]);let s=0;for(;r.isBefore(l);){++s;const i=this.resolveNext(r.format(Ce));if(!i)break;r=G(i)}return t>n?-s:s}#n(t,n){const o=this.index.getJournalIndex(this.journalName);let a=G(n),r=!1;for(;!r;){const l=a.clone().subtract(1,"day"),s=o.findClosestDate(l.format(Ce));let i=a.subtract(this.#e.value.duration,this.#e.value.every);if(s){const u=this.index.get(this.journalName,s);u?.end_date&&l.isSame(u.end_date,"day")&&(i=G(s))}i.isSameOrBefore(t,"day")&&l.isSameOrAfter(t,"day")?r=!0:a=i.clone()}return a.format(Ce)}#o(t,n){let o=G(n),a=!1;for(;!a;){const r=G(this.resolveEndDate(o.format(Ce)));o.isSameOrBefore(t,"day")&&r.isSameOrAfter(t,"day")?a=!0:o=r.clone().add(1,"day")}return o.format(Ce)}}class ca{constructor(t,n,o,a,r,l){this.name=t,this.config=n,this.index=o,this.appManager=a,this.notesManager=r,this.activeNote=l,this.#e=this.config.value.write.type==="custom"?new py(this.name,w(()=>this.config.value.write),this.index):new fy(w(()=>this.config.value.write))}#e;#n=new Map;get type(){return this.config.value.write.type}get dateFormat(){return this.config.value.dateFormat}get navBlock(){return this.config.value.navBlock}get calendarViewBlock(){return this.config.value.calendarViewBlock}get decorations(){return this.config.value.decorations}get commands(){return this.config.value.commands}get isOnShelf(){return this.config.value.shelves.length>0}get shelfName(){return this.config.value.shelves[0]??""}get startDate(){return this.config.value.start}get endDate(){switch(this.config.value.end.type){case"date":return this.config.value.end.date;case"repeats":{const t=G(this.startDate);return t.isValid()?t.clone().add(this.config.value.end.repeats*this.#e.repeats,this.#e.duration).format(Ce):""}}return""}calculateOffset(t){return this.#e.calculateOffset(t)}registerCommands(){for(const t of this.config.value.commands)this.#o(t)}get(t){const n=this.#e.resolveForDate(t);if(!n)return null;const o=this.index.get(this.name,n);return o||(this.#d(n)?this.#u(n):null)}next(t,n=!1){const o=this.#e.resolveForDate(t);if(!o)return null;if(n)return this.index.findNext(this.name,o);const a=this.#e.resolveNext(o);if(!a)return null;const r=this.index.get(this.name,a);return r||(this.#d(a)?this.#u(a):null)}previous(t,n=!1){const o=this.#e.resolveForDate(t);if(!o)return null;if(n)return this.index.findPrevious(this.name,o);const a=this.#e.resolvePrevious(o);if(!a)return null;const r=this.index.get(this.name,a);return r||(this.#d(a)?this.#u(a):null)}getNoteNameForDate(t){const n=this.get(t);if(!n)return"";const o=this.#s(n);return It(this.config.value.nameTemplate,o)}findAll(t,n){const o=this.#e.resolveForDate(t),a=this.#e.resolveForDate(n);if(!o||!a)return[];const r=[];let l=o;for(;l&&l<=a;){const s=this.get(l);s&&r.push(s);const i=this.next(l);l=i?i.date:null}return r}async open(t,n){const[o,a]=await this.#i(t);o&&await this.#l(o,n,a)}resolveAnchorDate(t){return this.#e.resolveForDate(t)}resolveStartDate(t){return this.#e.resolveStartDate(t)}resolveEndDate(t){return this.#e.resolveEndDate(t)}resolveRelativeDate(t){return this.#e.resolveRelativeDate(t)}addCommand(t){this.config.value.commands.push(t),this.#o(t)}updateCommand(t,n){this.#a(this.config.value.commands[t]),this.config.value.commands[t]=n,this.#o(n)}deleteCommand(t){const[n]=this.config.value.commands.splice(t,1);this.#a(n)}#o(t){this.appManager.addCommand(this.name,t,n=>n?this.#t(t):(this.#r(t).catch(console.error),!0)),t.showInRibbon&&this.appManager.addRibbonIcon(this.name,t.icon,t.name,()=>{this.#t(t)&&this.#r(t).catch(console.error)})}#a(t){this.appManager.removeCommand(this.name,t),this.appManager.removeRibbonIcon(this.name,t.name)}#t(t){if(t.context==="only_open_note"){const n=this.activeNote.value;if(!n)return!1;const o=this.index.getForPath(n);if(!o||o.journal!==this.name)return!1}return!0}async#r(t){const n=this.#m(t);if(!n)return;const o=this.#e.resolveDateForCommand(n,t.type);if(!o)return;const a=this.get(o);a&&await this.open(a,t.openMode)}addDecoration(t){this.config.value.decorations.push(t)}editDecoration(t,n){this.config.value.decorations[t]=n}deleteDecoration(t){this.config.value.decorations.splice(t,1)}addNavRow(t){this.config.value.navBlock.rows.push(t)}editNavRow(t,n){this.config.value.navBlock.rows[t]=n}deleteNavRow(t){this.config.value.navBlock.rows.splice(t,1)}moveNavRowUp(t){if(t>0){const n=this.config.value.navBlock.rows[t];this.config.value.navBlock.rows[t]=this.config.value.navBlock.rows[t-1],this.config.value.navBlock.rows[t-1]=n}}moveNavRowDown(t){if(t<this.config.value.navBlock.rows.length-1){const n=this.config.value.navBlock.rows[t];this.config.value.navBlock.rows[t]=this.config.value.navBlock.rows[t+1],this.config.value.navBlock.rows[t+1]=n}}addCalendarViewRow(t){this.config.value.calendarViewBlock.rows.push(t)}editCalendarViewRow(t,n){this.config.value.calendarViewBlock.rows[t]=n}deleteCalendarViewRow(t){this.config.value.calendarViewBlock.rows.splice(t,1)}moveCalendarViewRowUp(t){if(t>0){const n=this.config.value.calendarViewBlock.rows[t];this.config.value.calendarViewBlock.rows[t]=this.config.value.calendarViewBlock.rows[t-1],this.config.value.calendarViewBlock.rows[t-1]=n}}moveCalendarViewRowDown(t){if(t<this.config.value.calendarViewBlock.rows.length-1){const n=this.config.value.calendarViewBlock.rows[t];this.config.value.calendarViewBlock.rows[t]=this.config.value.calendarViewBlock.rows[t+1],this.config.value.calendarViewBlock.rows[t+1]=n}}async connectNote(t,n,o){const a=this.get(n);if(!a)return!1;if("path"in a){if(!o.override)return!1;await this.disconnectNote(a.path)}if(o.rename||o.move){const[r,l]=this.getConfiguredPathData(a),s=o.move?r:this.notesManager.getNoteFolder(t),i=o.rename?l:this.notesManager.getNoteFilename(t),u=this.notesManager.normalizePath(s?`${s}/${i}`:i);await this.notesManager.renameNote(t,u),t=u}return await this.#c(t,a),!0}async disconnectNote(t){await this.notesManager.updateNoteFrontmatter(t,n=>{delete n[ft],delete n[this.frontmatterDate],delete n[this.frontmatterStartDate],delete n[this.frontmatterEndDate],delete n[this.frontmatterIndex]})}async clearNotes(){const t=[],n=this.index.getAllPaths(this.name);for(const o of n)t.push(this.disconnectNote(o));await Promise.allSettled(t)}async deleteNotes(){const t=[],n=this.index.getAllPaths(this.name);for(const o of n)t.push(this.notesManager.deleteNote(o));await Promise.allSettled(t)}get frontmatterDate(){return this.config.value.frontmatter.dateField||za}get frontmatterIndex(){return this.config.value.frontmatter.indexField||Ka}get frontmatterStartDate(){return this.config.value.frontmatter.startDateField||an}get frontmatterEndDate(){return this.config.value.frontmatter.endDateField||wn}async renameFrontmatterField(t,n,o){this.config.value.frontmatter[t]=o;const a=this.index.getJournalIndex(this.name);if(a)for(const[,r]of a)await this.notesManager.updateNoteFrontmatter(r,l=>{String(n)in l&&(l[o]=l[n],delete l[n])})}async toggleFrontmatterStartDate(){this.config.value.frontmatter.addStartDate=!this.config.value.frontmatter.addStartDate;const t=this.index.getJournalIndex(this.name);if(t)for(const[,n]of t)await this.notesManager.updateNoteFrontmatter(n,o=>{const a=this.resolveAnchorDate(o[this.frontmatterDate]);a&&(this.config.value.frontmatter.addStartDate?o[this.frontmatterStartDate]=this.resolveStartDate(a):delete o[this.frontmatterStartDate])})}async toggleFrontmatterEndDate(){this.config.value.frontmatter.addEndDate=!this.config.value.frontmatter.addEndDate;const t=this.index.getJournalIndex(this.name);if(t)for(const[,n]of t)await this.notesManager.updateNoteFrontmatter(n,o=>{const a=this.resolveAnchorDate(o[this.frontmatterDate]);if(!a)return;const r=this.index.getForPath(n);this.config.value.frontmatter.addEndDate?o[this.frontmatterEndDate]=r?.end_date??this.resolveEndDate(a):r?.end_date?this.resolveEndDate(a)===r.end_date&&delete o[this.frontmatterEndDate]:delete o[this.frontmatterEndDate]})}async autoCreate(){if(!this.config.value.autoCreate)return;const t=this.get(Oe().format(Ce));t&&await this.#i(t)}async#l(t,n="active",o=!1){await this.notesManager.openNote(t,n==="active"?void 0:n),o&&await this.notesManager.tryTemplaterCursorJump(t)}async#i(t){const n=this.getNotePath(t);let o=!1;if(!this.notesManager.nodeExists(n)){const a=this.#s(t),r=It(this.config.value.nameTemplate,a);if(this.config.value.confirmCreation&&!await this.notesManager.confirmNoteCreation(this.name,r))return[null,!1];o=!0;try{await this.notesManager.createNote(n,""),a.note_name={type:"string",value:r};const l=await this.#p(n,a);l&&await this.notesManager.updateNote(n,l)}catch(l){throw console.error(l),new Error("Failed to create note")}}return await this.#c(n,t),[n,o]}getConfiguredPathData(t){const n=this.#s(t),o=It(this.config.value.nameTemplate??tu[this.type],n)+".md";return[It(this.config.value.folder,n)||"/",o]}getResolvedTemplatePath(t,n){const o=this.#s(n);return It(t,o)}getNotePath(t){if("path"in t)return t.path;const n=this.#s(t),o=It(this.config.value.nameTemplate,n)+".md",a=It(this.config.value.folder,n);return this.notesManager.normalizePath(a?`${a}/${o}`:o)}#s(t){const n=String(X.moment()),o={date:{type:"date",value:t.date,defaultFormat:this.config.value.dateFormat},start_date:{type:"date",value:this.#e.resolveStartDate(t.date),defaultFormat:this.config.value.dateFormat},end_date:{type:"date",value:t.end_date??this.#e.resolveEndDate(t.date),defaultFormat:this.config.value.dateFormat},journal_name:{type:"string",value:this.config.value.name},index:{type:"number",value:t.index},note_name:{type:"string",value:""},title:{type:"string",value:""},time:{type:"date",value:n,defaultFormat:"HH:mm"},current_time:{type:"date",value:n,defaultFormat:"HH:mm"},current_date:{type:"date",value:n,defaultFormat:"YYYY-MM-DD"}},a=It(this.config.value.nameTemplate,o);return a&&(o.title.value=a,o.note_name.value=a),o}async#p(t,n){if(this.config.value.templates.length>0)for(const o of this.config.value.templates){const a=It(o.endsWith(".md")?o:o+".md",n),r=await this.notesManager.getNoteContent(a);if(r)return this.notesManager.tryApplyingTemplater(a,t,It(r,n))}return""}async#c(t,n){await this.notesManager.updateNoteFrontmatter(t,o=>{o[ft]=this.name,o[this.frontmatterDate]=G(n.date).format(Ce),this.config.value.frontmatter.addStartDate?o[this.frontmatterStartDate]=this.resolveStartDate(n.date):delete o[this.frontmatterStartDate],this.config.value.frontmatter.addEndDate||n.end_date&&n.end_date!==this.resolveStartDate(n.date)?o[this.frontmatterEndDate]=n.end_date?G(n.end_date).format(Ce):this.resolveEndDate(n.date):delete o[this.frontmatterEndDate],n.index==null?delete o[this.frontmatterIndex]:o[this.frontmatterIndex]=n.index})}#u(t){return{journal:this.name,date:t,index:this.#f(t)}}#m(t){const n=this.activeNote.value,o=n?this.index.getForPath(n):null;return o&&t.context!=="today"?o.date:t.context==="only_open_note"?null:Oe().format(Ce)}#d(t){if(this.config.value.start){const n=G(this.config.value.start);if(n.isValid()&&G(t).isBefore(n))return!1}if(this.config.value.end.type==="date"&&this.config.value.end.date){const n=G(this.config.value.end.date);if(n.isValid()&&G(t).isAfter(n))return!1}return!(this.config.value.end.type==="repeats"&&this.config.value.end.repeats&&this.config.value.start&&this.#e.countRepeats(this.config.value.start,t)>=this.config.value.end.repeats)}#f(t){if(!this.config.value.index.enabled||!this.config.value.index.anchorDate||!this.config.value.index.anchorIndex)return;if(this.#n.has(t))return this.#n.get(t);const n=this.previous(t,!0);if(n?.index){const s=this.#e.countRepeats(n.date,t);let i=n.index+s;return this.config.value.index.type==="reset_after"&&(i%=this.config.value.index.resetAfter),this.#n.set(t,i),i}const o=this.next(t,!0);if(o?.index){const s=this.#e.countRepeats(t,o.date);let i=o.index-s;return this.config.value.index.type==="reset_after"&&i<0&&(i*=-1),this.#n.set(t,i),i}const a=G(this.config.value.index.anchorDate);if(!a.isValid())return;if(a.isAfter(t)&&this.config.value.index.type==="increment"&&!this.config.value.index.allowBefore){this.#n.set(t,void 0);return}if(a.isBefore(t)){const s=this.#e.countRepeats(this.config.value.index.anchorDate,t);let i=this.config.value.index.anchorIndex+s;return this.config.value.index.type==="reset_after"&&(i%=this.config.value.index.resetAfter),this.#n.set(t,i),i}const r=this.#e.countRepeats(t,this.config.value.index.anchorDate);let l=this.config.value.index.anchorIndex-r;return this.config.value.index.type==="reset_after"&&l<0&&(l*=-1),this.#n.set(t,l),l}dispose(){for(const t of this.commands)this.#a(t)}}function my(e,t,n,o){const a=[],r=Lc(o.date_format);for(const l of n){const s={path:l,operations:[]};a.push(s);const i=e.index.getForPath(l);if(i){s.operations.push({type:"skipping",reason:t.name===i.journal?"already in journal":"already in another journal "+i.journal});continue}if(!vy(e,l,o.filter_combinator,o.filters)){s.operations.push({type:"skipping",reason:"does not match filters"});continue}const u=o.date_place==="title"?e.notesManager.getNoteName(l):e.notesManager.getNoteMetadata(l)?.frontmatter?.[o.property_name];if(u===void 0){s.operations.push({type:"skipping",reason:"does not have date containing property "+o.property_name});continue}const c=u.match(r);if(!c){s.operations.push({type:"skipping",reason:"date with configured format not found"});continue}const v=G(c[0],o.date_format);if(!v.isValid()){s.operations.push({type:"skipping",reason:"invalid date "+u});continue}const g=t.get(v.format("YYYY-MM-DD"));if(!g){s.operations.push({type:"skipping",reason:"date is outside of journal boundaries "+v.format("YYYY-MM-DD")});continue}"path"in g&&g.path&&s.operations.push({type:"existing_note",other_file:g.path,decision:o.existing_note});const[p,C]=t.getConfiguredPathData(g);p!==e.notesManager.getNoteFolder(l)&&s.operations.push({type:"other_folder",configured_folder:p,decision:o.other_folder}),C!==e.notesManager.getNoteFilename(l)&&s.operations.push({type:"other_name",configured_name:C,decision:o.other_name}),s.operations.push({type:"connect",anchor_date:g.date})}return a}function vy(e,t,n,o){return n==="no"?!0:n==="and"?o.every(a=>ws(e,t,a)):n==="or"?o.some(a=>ws(e,t,a)):!1}function ws(e,t,n){if(!e.notesManager.getNoteMetadata(t))return!1;switch(n.type){case"title":return hy(e,t,n);case"tag":return gy(e,t,n);case"property":return yy(e,t,n)}return!0}function hy(e,t,n){const o=e.notesManager.getNoteName(t);switch(n.condition){case"contains":return o.contains(n.value);case"starts-with":return o.startsWith(n.value);case"ends-with":return o.endsWith(n.value);default:Qa(n.condition)}}function gy(e,t,n){const o=e.notesManager.getNoteMetadata(t);if(!o||!o.tags)return!1;switch(n.condition){case"contains":return o.tags.some(a=>a.tag.contains(n.value));case"starts-with":return o.tags.some(a=>a.tag.startsWith(n.value));case"ends-with":return o.tags.some(a=>a.tag.endsWith(n.value));default:Qa(n.condition)}}function yy(e,t,n){const o=e.notesManager.getNoteMetadata(t);if(!o)return!1;const a=o.frontmatter?.[n.name];switch(n.condition){case"exists":return!!o.frontmatter&&n.name in o.frontmatter;case"does-not-exist":return!!o.frontmatter&&!(n.name in o.frontmatter);case"eq":return a==n.value;case"neq":return a!=n.value;case"contains":return typeof a=="string"&&a.contains(n.value);case"does-not-contain":return typeof a!="string"||typeof a=="string"&&!a.contains(n.value);case"starts-with":return typeof a=="string"&&a.startsWith(n.value);case"ends-with":return typeof a=="string"&&a.endsWith(n.value);default:Qa(n.condition)}}function wy(e,t){t.actions.push(`Skipped: ${e.reason}`)}async function by(e,t,n,o,a){a.actions.push(`Note connected to journal at ${o.anchor_date}`),n.dry_run||await e.connectNote(t.path,o.anchor_date,{})}async function ky(e,t,n,o,a){switch(o.decision){case"skip":{a.actions.push("Skipped: other note connected to same date already exists in journal");break}case"override":{a.actions.push(`Other note "${o.other_file}" connected to same date disconnected`),n.dry_run||await e.disconnectNote(t.path);break}case"merge":{if(a.actions.push(`Content of note was merged into "${o.other_file}, note deleted"`),!n.dry_run){const r=await e.notesManager.getNoteContent(t.path);await e.notesManager.appendNote(o.other_file,r),await e.notesManager.deleteNote(t.path)}break}}}async function Cy(e,t,n,o,a){switch(o.decision){case"keep":{a.actions.push(`Notes folder "${e.notesManager.getNoteFolder(t.path)??"/"}" differs from configured folder "${o.configured_folder??"/"}" - keeping as is`);break}case"move":{if(a.actions.push(`Moved note to "${o.configured_folder??"/"}"`),!n.dry_run){const r=e.notesManager.getNoteFilename(t.path),l=X.normalizePath(o.configured_folder?`${o.configured_folder}/${r}`:r);await e.notesManager.renameNote(t.path,l),t.path=l}break}}}async function _y(e,t,n,o,a){switch(o.decision){case"keep":{a.actions.push(`Note name "${e.notesManager.getNoteName(t.path)}" differs from configured name "${o.configured_name}" - keeping as is`);break}case"rename":{if(a.actions.push(`Renamed note to "${o.configured_name}"`),!n.dry_run){const r=e.notesManager.getNoteFolder(t.path),l=X.normalizePath(r?`${r}/${o.configured_name}`:o.configured_name);await e.notesManager.renameNote(t.path,l),t.path=l}break}}}async function Sy(e,t,n,o){const{path:a,operations:r}=n,l={note:e.notesManager.getNoteFilename(a),folder:e.notesManager.getNoteFolder(a),path:a,actions:[]};try{for(const s of r)switch(s.type){case"skipping":{wy(s,l);break}case"connect":{await by(t,n,o,s,l);break}case"existing_note":return await ky(e,n,o,s,l),l;case"other_folder":{await Cy(e,n,o,s,l);break}case"other_name":{await _y(e,n,o,s,l);break}}}catch(s){console.error(s),l.actions.push(`Error: ${s instanceof Error?s.message:String(s)}`)}return l}const xy={key:0},Dy={key:0},Vy={class:"u-pop"},jy={class:"decision-buttons"},$y={key:1},Ny={class:"u-pop"},My={class:"u-pop"},Oy={class:"decision-buttons"},Ay={key:2},Ty={class:"u-pop"},Fy={class:"u-pop"},Ey={class:"decision-buttons"},Py={key:1},Iy={class:"flair"},Ry=I({__name:"BulkProcessNotes",props:{journalName:{},parameters:{}},emits:["close"],setup(e){const t=pe(),n=w(()=>t.getJournal(e.journalName)),o=fe("Building list..."),a=fe([]),r=fe(null),l=w(()=>r.value?r.value.operations.filter(C=>C.type==="existing_note"&&C.decision==="ask"||C.type==="other_folder"&&C.decision==="ask"||C.type==="other_name"&&C.decision==="ask"):[]),s=w(()=>r.value?t.notesManager.getNoteFilename(r.value.path):""),i=w(()=>r.value?t.notesManager.getNoteFolder(r.value.path):""),u=fe([]),c=w(()=>l.value.length>0);async function v(){await em(10),a.value.length>0?(r.value=a.value.shift()??null,g().catch(console.error)):o.value="Finished"}async function g(){if(!n.value||!r.value||c.value)return;const C=await Sy(t,n.value,r.value,e.parameters);u.value.push(C),r.value=null,v().catch(console.error)}function p(C,y){C.decision=y,g().catch(console.error)}return bt(()=>{if(!n.value)return;const C=t.notesManager.getNotesInFolder(e.parameters.folder);o.value="Preprocessing notes...",a.value=my(t,n.value,C,e.parameters),o.value="Processing notes...",v().catch(console.error)}),(C,y)=>(m(),_(U,null,[r.value&&c.value?(m(),_("div",xy,[h("h4",null,"Note: "+P(s.value),1),(m(!0),_(U,null,_e(l.value,(x,O)=>(m(),_("div",{key:O,class:"operation"},[x.type==="existing_note"?(m(),_("div",Dy,[h("p",null,[y[1]||(y[1]=k(" Other note with same date exists in journal - ")),h("span",Vy,P(b(t).notesManager.getNoteName(x.other_file)),1)]),h("div",jy,[d(ue,{onClick:T=>p(x,"skip")},{default:f(()=>y[2]||(y[2]=[k("Skip note")])),_:2},1032,["onClick"]),d(ue,{onClick:T=>p(x,"override")},{default:f(()=>y[3]||(y[3]=[k("Override date connection")])),_:2},1032,["onClick"]),d(ue,{onClick:T=>p(x,"merge")},{default:f(()=>y[4]||(y[4]=[k("Merge note content into existing one")])),_:2},1032,["onClick"])])])):x.type==="other_folder"?(m(),_("div",$y,[h("p",null,[y[5]||(y[5]=k(" Note is not in folder from journal setting")),y[6]||(y[6]=h("br",null,null,-1)),y[7]||(y[7]=h("b",null,"Configured folder:",-1)),h("span",Ny,P(x.configured_folder),1),y[8]||(y[8]=h("br",null,null,-1)),y[9]||(y[9]=h("b",null,"Current folder:",-1)),y[10]||(y[10]=k()),h("span",My,P(i.value),1)]),h("div",Oy,[d(ue,{onClick:T=>p(x,"keep")},{default:f(()=>y[11]||(y[11]=[k("Keep as is")])),_:2},1032,["onClick"]),d(ue,{onClick:T=>p(x,"move")},{default:f(()=>y[12]||(y[12]=[k("Move to configured folder")])),_:2},1032,["onClick"])])])):x.type==="other_name"?(m(),_("div",Ay,[h("p",null,[y[13]||(y[13]=k(" Note name differs from journal settings")),y[14]||(y[14]=h("br",null,null,-1)),y[15]||(y[15]=h("b",null,"Configured name:",-1)),y[16]||(y[16]=k()),h("span",Ty,P(x.configured_name),1),y[17]||(y[17]=h("br",null,null,-1)),y[18]||(y[18]=h("b",null,"Current name:",-1)),y[19]||(y[19]=k()),h("span",Fy,P(s.value),1)]),h("div",Ey,[d(ue,{onClick:T=>p(x,"keep")},{default:f(()=>y[20]||(y[20]=[k("Keep as is")])),_:2},1032,["onClick"]),d(ue,{onClick:T=>p(x,"rename")},{default:f(()=>y[21]||(y[21]=[k("Rename to configured name")])),_:2},1032,["onClick"])])])):R("",!0)]))),128))])):(m(),_("div",Py,P(o.value),1)),u.value.length>0?(m(),E(xt,{key:2},{trigger:f(()=>[k(" Processed notes "+P(C.parameters.dry_run?"(dry run)":"")+" ",1),h("span",Iy,P(u.value.length),1)]),default:f(()=>[(m(!0),_(U,null,_e(u.value,x=>(m(),_("div",{key:x.path,class:"log-entry"},[k(P(x.path),1),y[22]||(y[22]=h("br",null,null,-1)),h("ul",null,[(m(!0),_(U,null,_e(x.actions,O=>(m(),_("li",{key:O},P(O),1))),128))])]))),128))]),_:1})):R("",!0),o.value==="Finished"?(m(),E(N,{key:3},{default:f(()=>[d(ue,{onClick:y[0]||(y[0]=x=>C.$emit("close"))},{default:f(()=>y[23]||(y[23]=[k("Close")])),_:1})]),_:1})):R("",!0)],64))}}),By=ge(Ry,[["__scopeId","data-v-ffd82087"]]),Yy=I({__name:"BulkAddNotes.modal",props:{journalName:{}},emits:["close"],setup(e){const t=fe();function n(o){t.value=o}return(o,a)=>t.value?(m(),E(By,{key:0,"journal-name":o.journalName,parameters:t.value,onClose:a[0]||(a[0]=r=>o.$emit("close"))},null,8,["journal-name","parameters"])):(m(),E(cy,{key:1,"journal-name":o.journalName,onProcess:n,onClose:a[1]||(a[1]=r=>o.$emit("close"))},null,8,["journal-name"]))}}),Uy=I({__name:"JournalSettingsRoot",setup(e){const t=fe(null),n=fe(null),o=pe();function a(r){new Me(o,`Add notes to ${r}`,Yy,{journalName:r},700).open()}return(r,l)=>t.value?(m(),E(Zg,{key:0,"journal-name":t.value,onBack:l[0]||(l[0]=s=>t.value=null),onEdit:l[1]||(l[1]=s=>t.value=s)},null,8,["journal-name"])):n.value?(m(),E(ry,{key:1,"shelf-name":n.value,onBack:l[2]||(l[2]=s=>n.value=null),onOrganize:l[3]||(l[3]=s=>n.value=s),onEdit:l[4]||(l[4]=s=>t.value=s),onBulkAdd:l[5]||(l[5]=s=>a(s))},null,8,["shelf-name"])):(m(),E(Qm,{key:2,onEdit:l[6]||(l[6]=s=>t.value=s),onOrganize:l[7]||(l[7]=s=>n.value=s),onBulkAdd:l[8]||(l[8]=s=>a(s))}))}});class Wy extends X.PluginSettingTab{#e=null;#n;constructor(t,n){super(t,n),this.#n=n}display(){this.#e=co(Uy),this.#e.provide(Un,this.#n),this.#e.mount(this.containerEl)}hide(){this.#e?.unmount(),this.#e=null,this.containerEl.empty()}}class Ly{#e=fe(new Map);#n=new Map;#o=[];has(t){return this.#e.value.has(t)}get(t){return this.#e.value.get(t)??null}getAll(){return[...this.#e.value.values()]}set(t,n){const o=this.#e.value.has(t);this.#e.value.set(t,n),this.#n.set(n,t),o||this.#a(t)}delete(t){const n=this.#e.value.get(t);this.#e.value.delete(t),n&&this.#n.delete(n),this.#t(t)}deleteForPath(t){const n=this.#n.get(t);n&&this.delete(n)}findNext(t){const n=this.#r(t);return n===-1||n===this.#o.length-1?null:this.#e.value.get(this.#o[n+1])??null}findPrevious(t){const n=this.#r(t);return n===-1||n===0?null:this.#e.value.get(this.#o[n-1])??null}findClosestDate(t){if(this.#e.value.size===0)return;if(this.#e.value.has(t))return t;if(t<=this.#o[0])return this.#o[0];const n=this.#o.at(-1);if(n&&t>=n)return n;const o=this.#r(t);if(o!==-1)return this.#o[o]}*[Symbol.iterator](){yield*this.#e.value}#a(t){const n=this.#r(t);return this.#o.splice(n+1,0,t),n+1}#t(t){const n=this.#r(t);n!==-1&&this.#o.splice(n,1)}#r(t){if(this.#o.length===0)return-1;let n=0,o=this.#o.length;for(;o-n>1;){const a=Math.floor((n+o)/2);if(this.#o[a]===t)return a;this.#o[a]<t?n=a:o=a}return n===0&&this.#o[0]>t?-1:n}}class Jy{#e=fe(new Map);#n=new Map;#o=Xr(new Map);getForPath(t){return this.#e.value.get(t)??null}getForPathComputed(t){let n=this.#n.get(t);return n||(n=w(()=>this.#e.value.get(t)??null),this.#n.set(t,n),n)}get(t,n){const o=this.getJournalIndex(t).get(n);return o?this.getForPath(o):null}getAllPaths(t){return this.getJournalIndex(t).getAll()}findNext(t,n){const o=this.getJournalIndex(t).findNext(n);return o?this.getForPath(o):null}findPrevious(t,n){const o=this.getJournalIndex(t).findPrevious(n);return o?this.getForPath(o):null}getJournalIndex(t){let n=this.#o.value.get(t);return n||(n=new Ly,this.#o.value.set(t,n)),n}registerPathData(t,n){this.#e.value.set(t,n),this.getJournalIndex(n.journal).set(n.date,t)}unregisterPathData(t){const n=this.#e.value.get(t);this.#e.value.delete(t),n&&this.getJournalIndex(n.journal).delete(n.date)}clearForPath(t){const n=this.#e.value.get(t);n&&(this.#e.value.delete(t),this.#n.delete(t),this.#o.value.get(n.journal)?.delete(n.date))}transferPathData(t,n,o){const a=this.#e.value.get(t);if(!a)return;this.#e.value.delete(t),a.path=n,a.title=o,this.#e.value.set(n,a);const r=this.#o.value.get(a.journal);r&&(r.deleteForPath(t),r.set(a.date,n))}updateFromMetadata(t,n,o,a){const{frontmatter:r}=a;if(!r||!(ft in r))return;const l=r[t.frontmatterDate],s=r[t.frontmatterEndDate];if(!G(l).isValid()||s&&!G(s).isValid())return;const i={title:n,journal:t.name,date:l,end_date:s,path:o,index:r[t.frontmatterIndex],tags:a.tags?.map(u=>u.tag)??[],tasks:a.listItems?.filter(u=>u.task!=null).map(u=>({completed:u.task!==" "}))??[],properties:r};this.#e.value.set(o,i),this.getJournalIndex(t.name).set(l,o)}onunload(){this.#e.value.clear(),this.#n.clear(),this.#o.value.clear()}}const qy={class:"calendar-view-interval"},Hy=I({__name:"CalendarViewCustomInterval",props:{date:{},journal:{}},setup(e){Tn(u=>({cfc2f888:s.value,"01165f16":i.value}));const t=pe(),n=w(()=>G(e.date).startOf("month").format("YYYY-MM-DD")),o=w(()=>G(e.date).endOf("month").format("YYYY-MM-DD")),a=w(()=>e.journal.findAll(n.value,o.value)),r=tr(t),l=w(()=>r.value?.journal===e.journal.name),s=w(()=>Vt(t.calendarViewSettings.activeStyle.color)),i=w(()=>Vt(t.calendarViewSettings.activeStyle.background));return(u,c)=>(m(),_("div",qy,[(m(!0),_(U,null,_e(a.value,v=>(m(),E(ya,{key:v.date,rows:u.journal.calendarViewBlock.rows,"ref-date":v.date,"journal-name":u.journal.name,class:$t({"is-active":l.value&&v.date===b(r)?.date}),"decorate-block":u.journal.calendarViewBlock.decorateWholeBlock},null,8,["rows","ref-date","journal-name","class","decorate-block"]))),128))]))}}),zy=ge(Hy,[["__scopeId","data-v-6fda8589"]]),Ky={class:"custom-intervals-journals"},Gy=I({__name:"CalendarViewCustomIntervals",props:{date:{}},setup(e){const{journals:{custom:t}}=ea();return(n,o)=>(m(),_("div",Ky,[(m(!0),_(U,null,_e(b(t),a=>(m(),E(zy,{key:a.name,date:n.date,journal:a},null,8,["date","journal"]))),128))]))}}),Qy=ge(Gy,[["__scopeId","data-v-1db5074f"]]),Xy={class:"calendar-view-header"},Zy={class:"month-header"},e1=I({__name:"CalendarView",setup(e){const t=pe(),n=fe(Oe()),o=w(()=>n.value.format("YYYY-MM-DD")),a=w({get(){return t.uiSettings.calendarShelf},set(M){t.uiSettings.calendarShelf=M}}),r=w(()=>t.usesShelves&&Object.values(t.shelves).length>0),{journals:l}=Zo(a),s=w(()=>n.value.clone().startOf("month").format(Ce)),i=w(()=>n.value.clone().startOf("quarter").format(Ce)),u=w(()=>n.value.clone().startOf("year").format(Ce)),c=tr(t),v=w(()=>c.value?t.getJournal(c.value.journal):null),g=w(()=>v.value?.type==="month"&&c.value?.date===s.value),p=w(()=>v.value?.type==="quarter"&&c.value?.date===i.value),C=w(()=>v.value?.type==="year"&&c.value?.date===u.value);function y(M){const A=new X.Menu;A.addItem(le=>{le.setTitle("All journals").onClick(()=>{a.value=null})});for(const le of t.shelves)A.addItem(ie=>{ie.setTitle(le.name).onClick(()=>{a.value=le.name})});A.showAtMouseEvent(M)}function x(M,A="month"){const le=n.value.clone();M<0?le.subtract(Math.abs(M),A):le.add(M,A),n.value=le}function O(M){n.value=Oe(),t.calendarViewSettings.todayMode==="create"?Z(o.value,M):t.calendarViewSettings.todayMode==="navigate"&&Z(o.value,M,!0)}function T(M){new Me(t,"Pick a date",Xi,{selectedDate:o.value,onSelect(A){n.value=G(A),t.calendarViewSettings.pickMode==="create"?Z(A,M):t.calendarViewSettings.pickMode==="navigate"&&Z(A,M,!0)}},400).open()}function Z(M,A,le=!1){Yo(t,M,l.day.value.map(ie=>ie.name),le,Uo(A),A).catch(console.error)}return lt(c,M=>{if(!M)return;const A=t.getJournal(M.journal);if(A)switch(A.type){case"week":{const le=G(M.date),ie=n.value.clone().startOf("month").startOf("week"),L=n.value.clone().endOf("month").endOf("week");(le.isBefore(ie)||le.isAfter(L))&&(n.value=le);break}case"quarter":{const le=G(M.date).startOf("quarter"),ie=G(M.date).endOf("quarter");n.value.isBetween(le,ie)||(n.value=le);break}case"year":{const le=G(M.date).startOf("year"),ie=G(M.date).endOf("year");n.value.isBetween(le,ie)||(n.value=le);break}default:n.value=G(M.date)}}),(M,A)=>(m(),_("div",null,[h("div",Xy,[r.value?(m(),E(ue,{key:0,onClick:y},{default:f(()=>[k(P(a.value||"All journals"),1)]),_:1})):R("",!0),d(be,{icon:"crosshair",tooltip:"Select a date to be displayed",onClick:T}),d(ue,{onClick:O},{default:f(()=>A[4]||(A[4]=[k("Today")])),_:1})]),d(nr,{"ref-date":o.value},{header:f(()=>[d(be,{icon:"chevrons-left",tooltip:"Previous year",onClick:A[0]||(A[0]=le=>x(-1,"year"))}),d(be,{icon:"chevron-left",tooltip:"Previous month",onClick:A[1]||(A[1]=le=>x(-1,"month"))}),h("div",Zy,[d(qt,{date:s.value,type:"month","data-selected":g.value?"":null},null,8,["date","data-selected"]),b(l).quarter.value.length>0?(m(),E(qt,{key:0,date:i.value,type:"quarter","data-selected":p.value?"":null},null,8,["date","data-selected"])):R("",!0),d(qt,{date:u.value,type:"year","data-selected":C.value?"":null},null,8,["date","data-selected"])]),d(be,{icon:"chevron-right",tooltip:"Next month",onClick:A[2]||(A[2]=le=>x(1,"month"))}),d(be,{icon:"chevrons-right",tooltip:"Next year",onClick:A[3]||(A[3]=le=>x(1,"year"))})]),_:1},8,["ref-date"]),A[5]||(A[5]=h("div",{class:"calendar-view-separator"},null,-1)),d(Qy,{date:o.value},null,8,["date"])]))}}),t1=ge(e1,[["__scopeId","data-v-778e81e7"]]);class n1 extends X.ItemView{constructor(t,n){super(t),this.plugin=n}navigation=!1;#e=null;getViewType(){return fn}getDisplayText(){return"Calendar"}getIcon(){return"calendar-days"}onOpen(){return this.#e=co(t1),this.#e.provide(Un,this.plugin),this.#e.mount(this.contentEl),Promise.resolve()}onClose(){return this.#e?.unmount(),this.#e=null,this.contentEl.empty(),Promise.resolve()}}class o1 extends X.MarkdownRenderChild{constructor(t,n,o,a){super(n),this.source=o,this.path=a,this.init(t)}_vueApp;mode;init(t){const n=this.source.split(`
`);for(const o of n){const[a,r]=o.split(":");a.trim()==="mode"&&(this.mode=r.trim())}this._vueApp=co(yu,{mode:this.mode,path:this.path}),this._vueApp.provide(Un,t),this._vueApp.mount(this.containerEl)}onunload(){this._vueApp?.unmount(),this._vueApp=void 0,this.containerEl.empty()}}class xr extends X.MarkdownRenderChild{constructor(t,n,o,a){super(n),this.source=o,this.path=a,this.init(t)}_vueApp;init(t){this._vueApp=co(hu,{path:this.path}),this._vueApp.provide(Un,t),this._vueApp.mount(this.containerEl)}onunload(){this._vueApp?.unmount(),this._vueApp=void 0,this.containerEl.empty()}}const a1={key:0},r1={class:"u-pop"},l1={key:1},s1=["value"],i1={class:"u-pop"},u1={class:"u-pop"},d1={class:"u-pop"},c1={class:"u-pop"},f1={class:"u-pop"},p1=I({__name:"ConnectNote.modal",props:{path:{}},emits:["close"],setup(e,{emit:t}){const n=e,o=t,a=pe(),r=er(n.path),l=w(()=>a.notesManager.getNoteFilename(n.path)),s=w(()=>a.notesManager.getNoteFolder(n.path)),{defineField:i,errorBag:u,handleSubmit:c}=Cn({initialValues:{journalName:"",refDate:"",override:!1,rename:!1,move:!1},validationSchema:Sn(At({journalName:wt(Xe(),Gt("Journal name is required")),refDate:wt(Xe(),Gt("Date is required")),override:rn(),rename:rn(),move:rn()}))}),[v,g]=i("journalName"),[p,C]=i("refDate"),[y,x]=i("override"),[O,T]=i("rename"),[Z,M]=i("move");lt(p,()=>{y.value=!1,O.value=!1,Z.value=!1});const A=w(()=>v.value?a.getJournal(v.value):null),le=w(()=>{if(A.value)return A.value.startDate}),ie=w(()=>{if(A.value)return A.value.endDate}),L=w(()=>!A.value||!p.value?null:A.value.resolveAnchorDate(p.value)),me=w(()=>!A.value||!L.value?null:A.value.get(L.value)),We=w(()=>!A.value||!p.value||!L.value?null:a.index.get(A.value.name,L.value)),Ae=w(()=>!me.value||!A.value?null:A.value.getConfiguredPathData(me.value)),nt=w(()=>{if(!Ae.value)return!1;const[,ne]=Ae.value;return l.value!==ne}),pt=w(()=>{if(!Ae.value)return!1;const[ne]=Ae.value;return s.value!==(ne??"/")}),ot=w(()=>!(!A.value||!p.value||We.value&&!y.value));function qe(){a.disconnectNote(n.path).catch(console.error)}const ee=c(()=>{ot.value&&L.value&&(A.value?.connectNote(n.path,L.value,{override:y.value,rename:O.value,move:Z.value}).catch(console.error),o("close"))});return(ne,H)=>b(r)?(m(),_("div",a1,[d(N,{name:"Note is already connected"},{description:f(()=>[H[8]||(H[8]=k(" Journal: ")),h("b",r1,P(b(r).journal),1)]),_:1}),d(N,null,{default:f(()=>[d(ue,{onClick:H[0]||(H[0]=oe=>ne.$emit("close"))},{default:f(()=>H[9]||(H[9]=[k("Cancel")])),_:1}),d(ue,{cta:"",onClick:qe},{default:f(()=>H[10]||(H[10]=[k("Disconnect")])),_:1})]),_:1})])):(m(),_("div",l1,[k(P(ne.path)+" ",1),h("form",{onSubmit:H[7]||(H[7]=(...oe)=>b(ee)&&b(ee)(...oe))},[d(N,{name:"Journal"},{description:f(()=>[d(tt,{errors:b(u).journalName},null,8,["errors"])]),default:f(()=>[d(Ve,De({modelValue:b(v),"onUpdate:modelValue":H[1]||(H[1]=oe=>ce(v)?v.value=oe:null)},b(g)),{default:f(()=>[(m(!0),_(U,null,_e(b(a).journals,oe=>(m(),_("option",{key:oe.name,value:oe.name},P(oe.name),9,s1))),128))]),_:1},16,["modelValue"])]),_:1}),b(v)?(m(),_(U,{key:0},[d(N,{name:"Date"},{description:f(()=>[d(tt,{errors:b(u).refDate},null,8,["errors"])]),default:f(()=>[d(Ao,De({modelValue:b(p),"onUpdate:modelValue":H[2]||(H[2]=oe=>ce(p)?p.value=oe:null)},b(C),{min:le.value,max:ie.value}),null,16,["modelValue","min","max"])]),_:1}),We.value?(m(),E(N,{key:0,name:"Override?"},{description:f(()=>[H[11]||(H[11]=k(" Other note ")),h("b",i1,P(We.value?.path),1),H[12]||(H[12]=k(" is connected to this date. It will be disconnected if override option is on. "))]),default:f(()=>[d(He,De({modelValue:b(y),"onUpdate:modelValue":H[3]||(H[3]=oe=>ce(y)?y.value=oe:null)},b(x)),null,16,["modelValue"])]),_:1})):R("",!0),nt.value?(m(),E(N,{key:1,name:"Rename?"},{description:f(()=>[H[13]||(H[13]=k(" Note name ")),h("b",u1,P(l.value),1),H[14]||(H[14]=k(" differs from journal note name config: ")),h("b",d1,P(Ae.value?.[1]??""),1)]),default:f(()=>[d(He,De({modelValue:b(O),"onUpdate:modelValue":H[4]||(H[4]=oe=>ce(O)?O.value=oe:null)},b(T)),null,16,["modelValue"])]),_:1})):R("",!0),pt.value?(m(),E(N,{key:2,name:"Move?"},{description:f(()=>[H[15]||(H[15]=k(" Note folder ")),h("b",c1,P(s.value),1),H[16]||(H[16]=k(" differs from journal folder path config: ")),h("b",f1,P(Ae.value?.[0]??""),1)]),default:f(()=>[d(He,De({modelValue:b(Z),"onUpdate:modelValue":H[5]||(H[5]=oe=>ce(Z)?Z.value=oe:null)},b(M)),null,16,["modelValue"])]),_:1})):R("",!0)],64)):R("",!0),d(N,null,{default:f(()=>[d(ue,{onClick:H[6]||(H[6]=oe=>ne.$emit("close"))},{default:f(()=>H[17]||(H[17]=[k("Cancel")])),_:1}),d(ue,{cta:"",type:"submit",disabled:!ot.value},{default:f(()=>H[18]||(H[18]=[k("Connect")])),_:1},8,["disabled"])]),_:1})],32)]))}}),m1="All journals";class v1 extends X.SuggestModal{constructor(t,n,o){super(t),this.shelves=n,this.callback=o}getSuggestions(t){return t=t.toLocaleLowerCase(),["All journals",...this.shelves.filter(n=>n.toLocaleLowerCase().contains(t))]}renderSuggestion(t,n){n.setText(t)}onChooseSuggestion(t){this.callback(t===m1?null:t)}}class h1 extends X.MarkdownRenderChild{constructor(t,n,o,a){super(n),this.source=o,this.context=a,this.init(t)}_vueApp;init(t){const n=this.#e();this._vueApp=co(Rr,{path:this.context.sourcePath,config:n}),this._vueApp.provide(Un,t),this._vueApp.mount(this.containerEl)}#e(){try{const t=this.source?X.parseYaml(this.source.replaceAll("	","  ")):{show:["day"]};return{show:t.show.filter(n=>["day","week","month","quarter","year","custom"].includes(n)),separator:t.separator||" • ",scale:t.scale||1,shelf:t.shelf}}catch(t){return console.error(t),{show:["day"],separator:" • ",scale:1}}}onunload(){this._vueApp?.unmount(),this._vueApp=void 0,this.containerEl.empty()}}function g1(e){e.commands||(e.commands=jt(vl.commands));for(const t of Object.values(e.shelves))t.commands||(t.commands=[]);return e.dismissedNotifications||(e.dismissedNotifications=[]),e.version=3,e}function y1(e){let t=!1,n=e;return"version"in n||(n=wm(n),t=!0),n.version===2&&(n=g1(n)),{migratedData:n,needsUser:t}}const w1=I({__name:"ConfirmNoteCreation.modal",props:{noteName:{},journalName:{}},emits:["confirm","close"],setup(e){return(t,n)=>(m(),_(U,null,[d(N,{name:"Journal"},{default:f(()=>[k(P(t.journalName),1)]),_:1}),d(N,{name:"Note"},{default:f(()=>[k(P(t.noteName),1)]),_:1}),d(N,null,{default:f(()=>[d(ue,{onClick:n[0]||(n[0]=o=>t.$emit("confirm",!1))},{default:f(()=>n[2]||(n[2]=[k("Cancel")])),_:1}),d(ue,{cta:"",onClick:n[1]||(n[1]=o=>t.$emit("confirm",!0))},{default:f(()=>n[3]||(n[3]=[k("Create")])),_:1})]),_:1})],64))}});class b1{constructor(t){this.plugin=t,this.app=t.app}app;normalizePath(t){return X.normalizePath(t)}nodeExists(t){return!!this.app.vault.getAbstractFileByPath(t)}getNoteName(t){const n=this.app.vault.getAbstractFileByPath(t);return n?n instanceof X.TFile?n.basename:n.name:""}getNoteFilename(t){return this.app.vault.getAbstractFileByPath(t)?.name??""}getNoteFolder(t){return this.app.vault.getAbstractFileByPath(t)?.parent?.path??""}async confirmNoteCreation(t,n){return new Promise(o=>{const a=new Me(this.plugin,"About to create a new note",w1,{journalName:t,noteName:n,onConfirm(r){a.close(),o(r)},onClose(){a.close(),o(!1)}},400);a.open()})}async createNote(t,n){await this.#e(t),await this.app.vault.create(t,n)}async updateNote(t,n){const o=this.app.vault.getAbstractFileByPath(t);o&&o instanceof X.TFile&&await this.app.vault.modify(o,n)}async appendNote(t,n){const o=this.app.vault.getAbstractFileByPath(t);o&&o instanceof X.TFile&&await this.app.vault.append(o,n)}async renameNote(t,n){const o=this.app.vault.getAbstractFileByPath(t);o&&o instanceof X.TFile&&(await this.#e(n),await this.app.vault.rename(o,n))}getMarkdownFiles(){return this.app.vault.getMarkdownFiles()}getNotesInFolder(t){const n=this.app.vault.getFolderByPath(t||"/");if(!n)throw new Error(`Folder ${t} not found`);const o=[],a=[n];for(;a.length>0;){const r=a.shift();if(!r)break;for(const l of r.children)l instanceof X.TFile?o.push(l.path):l instanceof X.TFolder&&a.push(l)}return o}getNoteMetadata(t){return this.app.metadataCache.getCache(t)}async openNote(t,n){const o=this.findOpenedNote(t);if(o)return this.app.workspace.setActiveLeaf(o,{focus:!0});const a=this.app.vault.getAbstractFileByPath(t);if(!a||!(a instanceof X.TFile))return;await this.app.workspace.getLeaf(n).openFile(a,{active:!0})}findOpenedNote(t){for(const n of this.app.workspace.getLeavesOfType("markdown")){const{file:o}=n.view;if(o&&o.path===t)return n}return null}async getNoteContent(t){const n=this.app.vault.getAbstractFileByPath(t);return!n||!(n instanceof X.TFile)?"":this.app.vault.read(n)}async updateNoteFrontmatter(t,n){const o=this.app.vault.getAbstractFileByPath(t);o&&o instanceof X.TFile&&await this.app.fileManager.processFrontMatter(o,a=>{n(a)})}async deleteNote(t){const n=this.app.vault.getAbstractFileByPath(t);n&&n instanceof X.TFile&&await this.app.vault.delete(n)}async tryApplyingTemplater(t,n,o){const a=this.app.vault.getAbstractFileByPath(t);if(!a||!(a instanceof X.TFile))return o;const r=this.app.vault.getAbstractFileByPath(n);return!r||!(r instanceof X.TFile)?o:uh(this.app,a,r,o)}async tryTemplaterCursorJump(t){const n=this.app.vault.getAbstractFileByPath(t);return!n||!(n instanceof X.TFile)?!1:await ih(this.app,n)}async#e(t){if(!t)return;const n=t.split("/");if(t.endsWith(".md")&&n.pop(),n.length>0){const o=n.join("/");this.app.vault.getAbstractFileByPath(o)||await this.app.vault.createFolder(o)}}}class k1{constructor(t){this.plugin=t}#e=new Map;addCommand(t,n,o){this.plugin.addCommand({id:this.#n(t+":"+n.name),name:t?`${t}: ${n.name}`:n.name,icon:n.icon,checkCallback:o})}removeCommand(t,n){this.plugin.removeCommand(this.#n(t+":"+n.name))}addRibbonIcon(t,n,o,a){const r=this.#n("journals:"+t+":"+o),l=this.plugin.app.workspace.leftRibbon.addRibbonItemButton(r,n,o,a);return this.#e.set(r,l),r}removeRibbonIcon(t,n){const o=this.#n("journals:"+t+":"+n);return this.plugin.app.workspace.leftRibbon.removeRibbonAction(o),this.#e.get(o)?.detach(),this.#e.delete(o),o}showContextMenu(t,n){const o=this.plugin.app.vault.getAbstractFileByPath(t);if(o){const a=new X.Menu;this.plugin.app.workspace.trigger("file-menu",a,o,"file-explorer-context-menu",null),a.addItem(r=>r.setTitle("Delete").setIcon("trash").onClick(()=>{this.plugin.app.fileManager.promptForFileDeletion(o)})),a.showAtMouseEvent(n)}}showPreview(t,n){this.plugin.app.workspace.trigger("link-hover",this.plugin,n.target,t,t)}#n(t){return t.replaceAll(/\s/gi,"-").toLocaleLowerCase()}dispose(){for(const t of this.#e.values())t.detach();this.#e.clear()}}class C1 extends X.Plugin{#e=[];#n=Xr({});#o=new Jy;#a=fe(null);#t=fe(jt(vl));#r;#l=new b1(this);#i=new k1(this);#s=!1;get hasMigrations(){return this.#t.value.pendingMigrations.length>0}get dismissedNotifications(){return this.#t.value.dismissedNotifications}dismissNotification(t){this.#t.value.dismissedNotifications.push(t)}get notesManager(){return this.#l}get appManager(){return this.#i}get showReloadHint(){return this.#t.value.showReloadHint}get index(){return this.#o}get activeNote(){return this.#a.value}get usesShelves(){return this.#t.value.useShelves}set usesShelves(t){this.#t.value.useShelves=t}get openOnStartup(){return this.#t.value.openOnStartup}set openOnStartup(t){this.#t.value.openOnStartup=t}get calendarSettings(){return this.#t.value.calendar}get calendarViewSettings(){return this.#t.value.calendarView}get uiSettings(){return this.#t.value.ui}get pendingMigrations(){return this.#t.value.pendingMigrations}get shelves(){return Object.values(this.#t.value.shelves).sort((t,n)=>t.name.localeCompare(n.name))}get commands(){return this.#t.value.commands}getShelf(t){return this.#t.value.shelves[t]}get journals(){return Object.values(this.#n.value).sort((t,n)=>t.name.localeCompare(n.name))}hasJournal(t){return t in this.#n.value}getJournal(t){return this.#n.value[t]}getJournalConfig(t){return this.#t.value.journals[t]}createJournal(t,n){const o=jt({...hl,...gl(n),name:t,write:n});return this.#t.value.journals[t]=o,this.#n.value={...this.#n.value,[t]:new ca(t,w(()=>this.#t.value.journals[t]),this.#o,this.#i,this.#l,this.#a)},this.getJournal(t)?.autoCreate().catch(console.error),this.#t.value.journals[t]}registerJournal(t){if(t.name in this.#t.value.journals)throw new Error("Name already used");this.#t.value.journals[t.name]=t;const n=new ca(t.name,w(()=>this.#t.value.journals[t.name]),this.#o,this.#i,this.#l,this.#a);if(this.#n.value={...this.#n.value,[t.name]:n},t.shelves.length>0)for(const o of t.shelves)this.#t.value.shelves[o].journals.push(t.name);return n}async renameJournal(t,n){const o=this.getJournal(t);if(!o)return;o.dispose(),this.#t.value.journals[n]=this.#t.value.journals[t],this.#t.value.journals[n].name=n,delete this.#t.value.journals[t];for(const i of this.#t.value.journals[n].shelves)this.#t.value.shelves[i].journals=this.#t.value.shelves[i].journals.map(u=>u===t?n:u);const{[t]:a,...r}=this.#n.value,l=new ca(n,w(()=>this.#t.value.journals[n]),this.#o,this.#i,this.#l,this.#a);this.#n.value={...r,[n]:l},l.registerCommands(),this.#t.value.openOnStartup===t&&(this.#t.value.openOnStartup=n);const s=this.#o.getJournalIndex(t);if(s)for(const[,i]of s)await this.#l.updateNoteFrontmatter(i,u=>{u[ft]=n})}async removeJournal(t,n){const o=this.getJournal(t);if(!o)return;switch(n){case"clear":{await o.clearNotes();break}case"delete":{await o.deleteNotes();break}}o.dispose();const{[t]:a,...r}=this.#n.value;this.#n.value=r;for(const l of this.#t.value.journals[t].shelves)this.#t.value.shelves[l].journals=this.#t.value.shelves[l].journals.filter(s=>s!==t);delete this.#t.value.journals[t],this.#t.value.openOnStartup===t&&(this.#t.value.openOnStartup="")}getShelfJournals(t){return this.journals.filter(n=>n.shelfName===t)}moveJournal(t,n){const o=this.getJournal(t);if(!o)return;const a=o.shelfName;a&&(this.#t.value.shelves[a].journals=this.#t.value.shelves[a].journals.filter(r=>r!==t)),n?(this.#t.value.shelves[n].journals.push(t),this.#t.value.journals[t].shelves=[n]):this.#t.value.journals[t].shelves=[]}requestReloadHint(){this.#t.value.showReloadHint=!0}placeCalendarView(t=!1){if(this.app.workspace.getLeavesOfType(fn).length>0){if(!t)return;for(const n of this.app.workspace.getLeavesOfType(fn))n.detach()}this.#t.value.calendarView.leaf==="left"?this.app.workspace.getLeftLeaf(!1)?.setViewState({type:fn}).catch(console.error):this.app.workspace.getRightLeaf(!1)?.setViewState({type:fn}).catch(console.error)}hasShelf(t){return t in this.#t.value.shelves}createShelf(t){this.#t.value.shelves[t]={name:t,journals:[],commands:[]}}renameShelf(t,n){this.#t.value.shelves[n]=this.#t.value.shelves[t],this.#t.value.shelves[n].name=n;for(const o of this.#t.value.shelves[n].journals)this.#t.value.journals[o].shelves=this.#t.value.journals[o].shelves.map(a=>a===t?n:a);delete this.#t.value.shelves[t]}removeShelf(t,n){for(const o of this.#t.value.shelves[t].journals)this.#t.value.journals[o].shelves=n?this.#t.value.journals[o].shelves.map(a=>a===t?n:a):this.#t.value.journals[o].shelves.filter(a=>a!==t);delete this.#t.value.shelves[t]}async onload(){const t=!this.app.workspace.layoutReady;await this.#c(),Jc(),this.#t.value.calendar.dow===-1?Ma(this.#t.value.calendar.global):Na(this.#t.value.calendar.dow,this.#t.value.calendar.doy,this.#t.value.calendar.global),this.#m(),this.#d(),this.#t.value.showReloadHint&&(this.#t.value.showReloadHint=!1),this.#v(),this.addSettingTab(new Wy(this.app,this)),this.registerMarkdownCodeBlockProcessor("calendar-timeline",(n,o,a)=>{const r=new o1(this,o,n,a.sourcePath);a.addChild(r)}),this.registerMarkdownCodeBlockProcessor("calendar-nav",(n,o,a)=>{const r=new xr(this,o,n,a.sourcePath);a.addChild(r)}),this.registerMarkdownCodeBlockProcessor("interval-nav",(n,o,a)=>{const r=new xr(this,o,n,a.sourcePath);a.addChild(r)}),this.registerMarkdownCodeBlockProcessor("journal-nav",(n,o,a)=>{const r=new xr(this,o,n,a.sourcePath);a.addChild(r)}),this.registerMarkdownCodeBlockProcessor("journals-home",(n,o,a)=>{const r=new h1(this,o,n,a);a.addChild(r)}),this.registerView(fn,n=>new n1(n,this)),this.app.workspace.onLayoutReady(async()=>{this.reprocessNotes(),this.placeCalendarView(),this.#a.value=this.app.workspace.getActiveFile()?.path??null,await this.autoCreateNotes(),t&&await this.openStartupNote(),this.#s&&(this.#u(),this.#s=!1)})}onunload(){clearTimeout(this.#r);for(const t of this.#e)t();for(const t of this.app.workspace.getLeavesOfType(fn))t.detach();for(const t of this.journals)t.dispose()}reprocessNotes(){const t=this.#l.getMarkdownFiles();for(const n of t)this.#f(n)}async autoCreateNotes(){for(const t of Object.values(this.#n.value))await t.autoCreate();this.#p()}async openStartupNote(){const t=this.#t.value.openOnStartup;t&&this.getJournal(t)&&await $n(this,Oe().format(Ce),t)}async disconnectNote(t){const n=this.#l.getNoteMetadata(t);if(!n)return;const{frontmatter:o}=n;if(!o)return;const a=o[ft];if(!a)return;const r=this.getJournal(a);if(r)await r.disconnectNote(t);else return this.#l.updateNoteFrontmatter(t,l=>{delete l[ft],delete l[za],delete l[an],delete l[wn],delete l[Ka]})}#p(){clearTimeout(this.#r),this.#r=setTimeout(()=>{this.autoCreateNotes().catch(console.error)},df)}async#c(){const t=await this.loadData();if(t)if((t.version??1)===Zi)this.#t.value=t;else{const{migratedData:o,needsUser:a}=y1(t);this.#t.value=o,await this.saveData(o).catch(console.error),this.#s=a}}#u(){new Me(this,"Migrate Journals plugin data to v2",au).open()}#m(){const t={};for(const n of Object.keys(this.#t.value.journals))t[n]=new ca(n,w(()=>this.#t.value.journals[n]),this.#o,this.#i,this.#l,this.#a);this.#n.value=t}#d(){this.#e.push(lt(this.#t,Bc(t=>{this.saveData(t).catch(console.error)},50),{deep:!0}),lt(()=>this.#t.value.calendarView.leaf,()=>{this.placeCalendarView(!0)})),this.registerEvent(this.app.workspace.on("file-open",t=>{this.#a.value=t?.path??null})),this.registerEvent(this.app.vault.on("rename",(t,n)=>{t instanceof X.TFile&&this.index.transferPathData(n,t.path,t.basename)})),this.registerEvent(this.app.vault.on("delete",t=>{t instanceof X.TFile&&this.index.clearForPath(t.path)})),this.registerEvent(this.app.metadataCache.on("changed",t=>{this.#f(t)}))}#f(t){const n=this.#l.getNoteMetadata(t.path);if(!n)return;const{frontmatter:o}=n;if(!o||!(ft in o))return;const a=o[ft],r=this.getJournal(a);r&&this.index.updateFromMetadata(r,t.basename,t.path,n)}#v(){this.addCommand({id:"open-next",name:"Open next note",editorCallback:async(t,n)=>{const o=n.file;if(!o)return;const a=this.#o.getForPath(o.path);if(!a){new X.Notice("This note is not connected to any journal.");return}const r=this.getJournal(a.journal);if(!r){new X.Notice("Unknown journal.");return}const l=r.next(a.date,!0);if(!l){new X.Notice("There is no next note after this one.");return}await r.open(l)}}),this.addCommand({id:"open-prev",name:"Open previous note",editorCallback:async(t,n)=>{const o=n.file;if(!o)return;const a=this.#o.getForPath(o.path);if(!a){new X.Notice("This note is not connected to any journal.");return}const r=this.getJournal(a.journal);if(!r){new X.Notice("Unknown journal.");return}const l=r.previous(a.date,!0);if(!l){new X.Notice("There is no previous note before this one.");return}await r.open(l)}}),this.addCommand({id:"connect-note",name:"Connect note to a journal",editorCallback:(t,n)=>{const o=n.file;o&&new Me(this,"Connect note to a journal",p1,{path:o.path}).open()}}),this.addCommand({id:"open-calendar",name:"Open calendar",callback:()=>{let[t]=this.app.workspace.getLeavesOfType(fn);t||(this.placeCalendarView(),t=this.app.workspace.getLeavesOfType(fn)[0]),this.app.workspace.revealLeaf(t).catch(console.error)}});for(const t of Object.values(this.#n.value))t.registerCommands();for(const t of this.commands)lo(this,t,"",()=>this.journals.filter(n=>n.type===t.writeType));for(const t of this.shelves)for(const n of t.commands)lo(this,n,`Shelf: ${t.name}`,()=>this.getShelfJournals(t.name).filter(o=>o.type===n.writeType));this.addCommand({id:"change-calendar-shelf",name:"Change calendar view shelf",checkCallback:t=>t?this.#t.value.useShelves&&Object.values(this.#t.value.shelves).length>0:(new v1(this.app,Object.keys(this.#t.value.shelves),n=>{this.#t.value.ui.calendarShelf=n}).open(),!0)})}}exports.default=C1;

/* nosourcemap */